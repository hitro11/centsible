{
  "version": 3,
  "sources": ["../../../../../../node_modules/.pnpm/supertokens-website@20.1.5/node_modules/supertokens-website/lib/build/utils/windowHandler/defaultImplementation.js", "../../../../../../node_modules/.pnpm/supertokens-website@20.1.5/node_modules/supertokens-website/lib/build/utils/windowHandler/index.js", "../../../../../../node_modules/.pnpm/supertokens-website@20.1.5/node_modules/supertokens-website/utils/windowHandler/index.js", "../../../../../../node_modules/.pnpm/supertokens-web-js@0.14.0/node_modules/supertokens-web-js/lib/build/windowHandler/index.js", "../../../../../../node_modules/.pnpm/supertokens-web-js@0.14.0/node_modules/supertokens-web-js/lib/build/constants.js", "../../../../../../node_modules/.pnpm/supertokens-web-js@0.14.0/node_modules/supertokens-web-js/lib/build/normalisedURLDomain.js", "../../../../../../node_modules/.pnpm/supertokens-web-js@0.14.0/node_modules/supertokens-web-js/lib/build/normalisedURLPath.js", "../../../../../../node_modules/.pnpm/supertokens-website@20.1.5/node_modules/supertokens-website/lib/build/normalisedURLDomain.js", "../../../../../../node_modules/.pnpm/supertokens-website@20.1.5/node_modules/supertokens-website/lib/build/normalisedURLPath.js", "../../../../../../node_modules/.pnpm/supertokens-website@20.1.5/node_modules/supertokens-website/lib/build/utils/index.js", "../../../../../../node_modules/.pnpm/supertokens-website@20.1.5/node_modules/supertokens-website/lib/build/processState.js", "../../../../../../node_modules/.pnpm/supertokens-website@20.1.5/node_modules/supertokens-website/lib/build/version.js", "../../../../../../node_modules/.pnpm/supertokens-website@20.1.5/node_modules/supertokens-website/lib/build/utils/cookieHandler/defaultImplementation.js", "../../../../../../node_modules/.pnpm/supertokens-website@20.1.5/node_modules/supertokens-website/lib/build/utils/cookieHandler/index.js", "../../../../../../node_modules/.pnpm/browser-tabs-lock@1.3.0/node_modules/browser-tabs-lock/processLock.js", "../../../../../../node_modules/.pnpm/browser-tabs-lock@1.3.0/node_modules/browser-tabs-lock/index.js", "../../../../../../node_modules/.pnpm/supertokens-website@20.1.5/node_modules/supertokens-website/lib/build/utils/lockFactory/index.js", "../../../../../../node_modules/.pnpm/supertokens-website@20.1.5/node_modules/supertokens-website/lib/build/logger.js", "../../../../../../node_modules/.pnpm/supertokens-website@20.1.5/node_modules/supertokens-website/lib/build/utils/dateProvider/defaultImplementation.js", "../../../../../../node_modules/.pnpm/supertokens-website@20.1.5/node_modules/supertokens-website/lib/build/utils/dateProvider/index.js", "../../../../../../node_modules/.pnpm/supertokens-website@20.1.5/node_modules/supertokens-website/lib/build/fetch.js", "../../../../../../node_modules/.pnpm/supertokens-website@20.1.5/node_modules/supertokens-website/lib/build/utils/sessionClaimValidatorStore.js", "../../../../../../node_modules/.pnpm/supertokens-website@20.1.5/node_modules/supertokens-website/lib/build/utils/globalClaimValidators.js", "../../../../../../node_modules/.pnpm/supertokens-website@20.1.5/node_modules/supertokens-website/utils/globalClaimValidators/index.js", "../../../../../../node_modules/.pnpm/supertokens-web-js@0.14.0/node_modules/supertokens-web-js/lib/build/utils.js", "../../../../../../node_modules/.pnpm/supertokens-website@20.1.5/node_modules/supertokens-website/lib/build/axiosError.js", "../../../../../../node_modules/.pnpm/supertokens-website@20.1.5/node_modules/supertokens-website/lib/build/axios.js", "../../../../../../node_modules/.pnpm/supertokens-website@20.1.5/node_modules/supertokens-website/lib/build/error.js", "../../../../../../node_modules/.pnpm/supertokens-website@20.1.5/node_modules/supertokens-website/lib/build/xmlhttprequest.js", "../../../../../../node_modules/.pnpm/supertokens-website@20.1.5/node_modules/supertokens-website/lib/build/recipeImplementation.js", "../../../../../../node_modules/.pnpm/supertokens-js-override@0.0.4/node_modules/supertokens-js-override/lib/build/getProxyObject.js", "../../../../../../node_modules/.pnpm/supertokens-js-override@0.0.4/node_modules/supertokens-js-override/lib/build/index.js", "../../../../../../node_modules/.pnpm/supertokens-website@20.1.5/node_modules/supertokens-website/lib/build/claims/primitiveClaim.js", "../../../../../../node_modules/.pnpm/supertokens-website@20.1.5/node_modules/supertokens-website/lib/build/claims/primitiveArrayClaim.js", "../../../../../../node_modules/.pnpm/supertokens-website@20.1.5/node_modules/supertokens-website/lib/build/claims/booleanClaim.js", "../../../../../../node_modules/.pnpm/supertokens-website@20.1.5/node_modules/supertokens-website/lib/build/index.js", "../../../../../../node_modules/.pnpm/supertokens-website@20.1.5/node_modules/supertokens-website/index.js", "../../../../../../node_modules/.pnpm/supertokens-web-js@0.14.0/node_modules/supertokens-web-js/lib/build/recipe/recipeModule/index.js", "../../../../../../node_modules/.pnpm/supertokens-web-js@0.14.0/node_modules/supertokens-web-js/lib/build/recipe/emailverification/constants.js", "../../../../../../node_modules/.pnpm/supertokens-web-js@0.14.0/node_modules/supertokens-web-js/lib/build/recipe/session/recipe.js"],
  "sourcesContent": ["\"use strict\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nvar __generator = this && this.__generator || function (thisArg, body) {\n  var _ = {\n      label: 0,\n      sent: function () {\n        if (t[0] & 1) throw t[1];\n        return t[1];\n      },\n      trys: [],\n      ops: []\n    },\n    f,\n    y,\n    t,\n    g;\n  return g = {\n    next: verb(0),\n    throw: verb(1),\n    return: verb(2)\n  }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function () {\n    return this;\n  }), g;\n  function verb(n) {\n    return function (v) {\n      return step([n, v]);\n    };\n  }\n  function step(op) {\n    if (f) throw new TypeError(\"Generator is already executing.\");\n    while (_) try {\n      if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n      if (y = 0, t) op = [op[0] & 2, t.value];\n      switch (op[0]) {\n        case 0:\n        case 1:\n          t = op;\n          break;\n        case 4:\n          _.label++;\n          return {\n            value: op[1],\n            done: false\n          };\n        case 5:\n          _.label++;\n          y = op[1];\n          op = [0];\n          continue;\n        case 7:\n          op = _.ops.pop();\n          _.trys.pop();\n          continue;\n        default:\n          if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {\n            _ = 0;\n            continue;\n          }\n          if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {\n            _.label = op[1];\n            break;\n          }\n          if (op[0] === 6 && _.label < t[1]) {\n            _.label = t[1];\n            t = op;\n            break;\n          }\n          if (t && _.label < t[2]) {\n            _.label = t[2];\n            _.ops.push(op);\n            break;\n          }\n          if (t[2]) _.ops.pop();\n          _.trys.pop();\n          continue;\n      }\n      op = body.call(thisArg, _);\n    } catch (e) {\n      op = [6, e];\n      y = 0;\n    } finally {\n      f = t = 0;\n    }\n    if (op[0] & 5) throw op[1];\n    return {\n      value: op[0] ? op[1] : void 0,\n      done: true\n    };\n  }\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.defaultWindowHandlerImplementation = void 0;\nfunction getWindowOrThrow() {\n  if (typeof window === \"undefined\") {\n    throw Error(\"If you are using this package with server-side rendering, please make sure that you are checking if the window object is defined.\");\n  }\n  return window;\n}\nvar defaultLocalStorageHandler = {\n  key: function (index) {\n    return __awaiter(this, void 0, void 0, function () {\n      return __generator(this, function (_a) {\n        return [2 /*return*/, getWindowOrThrow().localStorage.key(index)];\n      });\n    });\n  },\n  clear: function () {\n    return __awaiter(this, void 0, void 0, function () {\n      return __generator(this, function (_a) {\n        return [2 /*return*/, getWindowOrThrow().localStorage.clear()];\n      });\n    });\n  },\n  getItem: function (key) {\n    return __awaiter(this, void 0, void 0, function () {\n      return __generator(this, function (_a) {\n        return [2 /*return*/, getWindowOrThrow().localStorage.getItem(key)];\n      });\n    });\n  },\n  removeItem: function (key) {\n    return __awaiter(this, void 0, void 0, function () {\n      return __generator(this, function (_a) {\n        return [2 /*return*/, getWindowOrThrow().localStorage.removeItem(key)];\n      });\n    });\n  },\n  setItem: function (key, value) {\n    return __awaiter(this, void 0, void 0, function () {\n      return __generator(this, function (_a) {\n        return [2 /*return*/, getWindowOrThrow().localStorage.setItem(key, value)];\n      });\n    });\n  },\n  keySync: function (index) {\n    return getWindowOrThrow().localStorage.key(index);\n  },\n  clearSync: function () {\n    return getWindowOrThrow().localStorage.clear();\n  },\n  getItemSync: function (key) {\n    return getWindowOrThrow().localStorage.getItem(key);\n  },\n  removeItemSync: function (key) {\n    return getWindowOrThrow().localStorage.removeItem(key);\n  },\n  setItemSync: function (key, value) {\n    return getWindowOrThrow().localStorage.setItem(key, value);\n  }\n};\nvar defaultSessionStorageHandler = {\n  key: function (index) {\n    return __awaiter(this, void 0, void 0, function () {\n      return __generator(this, function (_a) {\n        return [2 /*return*/, getWindowOrThrow().sessionStorage.key(index)];\n      });\n    });\n  },\n  clear: function () {\n    return __awaiter(this, void 0, void 0, function () {\n      return __generator(this, function (_a) {\n        return [2 /*return*/, getWindowOrThrow().sessionStorage.clear()];\n      });\n    });\n  },\n  getItem: function (key) {\n    return __awaiter(this, void 0, void 0, function () {\n      return __generator(this, function (_a) {\n        return [2 /*return*/, getWindowOrThrow().sessionStorage.getItem(key)];\n      });\n    });\n  },\n  removeItem: function (key) {\n    return __awaiter(this, void 0, void 0, function () {\n      return __generator(this, function (_a) {\n        return [2 /*return*/, getWindowOrThrow().sessionStorage.removeItem(key)];\n      });\n    });\n  },\n  setItem: function (key, value) {\n    return __awaiter(this, void 0, void 0, function () {\n      return __generator(this, function (_a) {\n        return [2 /*return*/, getWindowOrThrow().sessionStorage.setItem(key, value)];\n      });\n    });\n  },\n  keySync: function (index) {\n    return getWindowOrThrow().sessionStorage.key(index);\n  },\n  clearSync: function () {\n    return getWindowOrThrow().sessionStorage.clear();\n  },\n  getItemSync: function (key) {\n    return getWindowOrThrow().sessionStorage.getItem(key);\n  },\n  removeItemSync: function (key) {\n    return getWindowOrThrow().sessionStorage.removeItem(key);\n  },\n  setItemSync: function (key, value) {\n    return getWindowOrThrow().sessionStorage.setItem(key, value);\n  }\n};\nexports.defaultWindowHandlerImplementation = {\n  history: {\n    replaceState: function (data, unused, url) {\n      return getWindowOrThrow().history.replaceState(data, unused, url);\n    },\n    getState: function () {\n      return getWindowOrThrow().history.state;\n    }\n  },\n  location: {\n    getHref: function () {\n      return getWindowOrThrow().location.href;\n    },\n    setHref: function (href) {\n      getWindowOrThrow().location.href = href;\n    },\n    getSearch: function () {\n      return getWindowOrThrow().location.search;\n    },\n    getHash: function () {\n      return getWindowOrThrow().location.hash;\n    },\n    getPathName: function () {\n      return getWindowOrThrow().location.pathname;\n    },\n    assign: function (url) {\n      /**\n       * The type for assign accepts URL | string but when building\n       * it complains about only accepting a string. To prevent this\n       * we use any\n       */\n      getWindowOrThrow().location.assign(url);\n    },\n    getHostName: function () {\n      return getWindowOrThrow().location.hostname;\n    },\n    getHost: function () {\n      return getWindowOrThrow().location.host;\n    },\n    getOrigin: function () {\n      return getWindowOrThrow().location.origin;\n    }\n  },\n  getDocument: function () {\n    return getWindowOrThrow().document;\n  },\n  getWindowUnsafe: function () {\n    return getWindowOrThrow().window;\n  },\n  localStorage: defaultLocalStorageHandler,\n  sessionStorage: defaultSessionStorageHandler\n};", "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.WindowHandlerReference = void 0;\n/* Copyright (c) 2022, VRAI Labs and/or its affiliates. All rights reserved.\n *\n * This software is licensed under the Apache License, Version 2.0 (the\n * \"License\") as published by the Apache Software Foundation.\n *\n * You may not use this file except in compliance with the License. You may\n * obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\n * License for the specific language governing permissions and limitations\n * under the License.\n */\nvar defaultImplementation_1 = require(\"./defaultImplementation\");\nvar WindowHandlerReference = /** @class */function () {\n  function WindowHandlerReference(windowHandlerInput) {\n    var windowHandlerFunc = function (original) {\n      return original;\n    };\n    if (windowHandlerInput !== undefined) {\n      windowHandlerFunc = windowHandlerInput;\n    }\n    this.windowHandler = windowHandlerFunc(defaultImplementation_1.defaultWindowHandlerImplementation);\n  }\n  WindowHandlerReference.init = function (windowHandlerInput) {\n    if (WindowHandlerReference.instance !== undefined) {\n      return;\n    }\n    WindowHandlerReference.instance = new WindowHandlerReference(windowHandlerInput);\n  };\n  WindowHandlerReference.getReferenceOrThrow = function () {\n    if (WindowHandlerReference.instance === undefined) {\n      throw new Error(\"SuperTokensWindowHandler must be initialized before calling this method.\");\n    }\n    return WindowHandlerReference.instance;\n  };\n  return WindowHandlerReference;\n}();\nexports.WindowHandlerReference = WindowHandlerReference;\nexports.default = WindowHandlerReference;", "/* Copyright (c) 2020, VRAI Labs and/or its affiliates. All rights reserved.\n *\n * This software is licensed under the Apache License, Version 2.0 (the\n * \"License\") as published by the Apache Software Foundation.\n * \n * You may not use this file except in compliance with the License. You may\n * obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n * \n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\n * License for the specific language governing permissions and limitations\n * under the License. \n*/\n\"use strict\";\n\nfunction __export(m) {\n  for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n}\nexports.__esModule = true;\n__export(require(\"../../lib/build/utils/windowHandler\"));", "\"use strict\";\n\n/* Copyright (c) 2022, VRAI Labs and/or its affiliates. All rights reserved.\n *\n * This software is licensed under the Apache License, Version 2.0 (the\n * \"License\") as published by the Apache Software Foundation.\n *\n * You may not use this file except in compliance with the License. You may\n * obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\n * License for the specific language governing permissions and limitations\n * under the License.\n */\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.WindowHandlerReference = void 0;\nvar windowHandler_1 = require(\"supertokens-website/utils/windowHandler\");\nObject.defineProperty(exports, \"WindowHandlerReference\", {\n  enumerable: true,\n  get: function () {\n    return windowHandler_1.WindowHandlerReference;\n  }\n});", "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.SSR_ERROR = exports.DEFAULT_API_BASE_PATH = void 0;\n/* Copyright (c) 2022, VRAI Labs and/or its affiliates. All rights reserved.\n *\n * This software is licensed under the Apache License, Version 2.0 (the\n * \"License\") as published by the Apache Software Foundation.\n *\n * You may not use this file except in compliance with the License. You may\n * obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\n * License for the specific language governing permissions and limitations\n * under the License.\n */\nexports.DEFAULT_API_BASE_PATH = \"/auth\";\nexports.SSR_ERROR = \"\\nIf you are trying to use this method doing server-side-rendering, please make sure you move this method inside a componentDidMount method or useEffect hook.\";", "\"use strict\";\n\n/* Copyright (c) 2022, VRAI Labs and/or its affiliates. All rights reserved.\n *\n * This software is licensed under the Apache License, Version 2.0 (the\n * \"License\") as published by the Apache Software Foundation.\n *\n * You may not use this file except in compliance with the License. You may\n * obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\n * License for the specific language governing permissions and limitations\n * under the License.\n */\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar NormalisedURLDomain = /** @class */function () {\n  function NormalisedURLDomain(url) {\n    var _this = this;\n    this.getAsStringDangerous = function () {\n      return _this.value;\n    };\n    this.value = normaliseURLDomainOrThrowError(url);\n  }\n  return NormalisedURLDomain;\n}();\nexports.default = NormalisedURLDomain;\nfunction normaliseURLDomainOrThrowError(input, ignoreProtocol) {\n  if (ignoreProtocol === void 0) {\n    ignoreProtocol = false;\n  }\n  function isAnIpAddress(ipaddress) {\n    return /^(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/.test(ipaddress);\n  }\n  input = input.trim();\n  try {\n    if (!input.startsWith(\"http://\") && !input.startsWith(\"https://\")) {\n      throw new Error(\"Error converting to proper URL\");\n    }\n    var urlObj = new URL(input);\n    if (ignoreProtocol) {\n      if (urlObj.hostname.startsWith(\"localhost\") || isAnIpAddress(urlObj.hostname)) {\n        input = \"http://\" + urlObj.host;\n      } else {\n        input = \"https://\" + urlObj.host;\n      }\n    } else {\n      input = urlObj.protocol + \"//\" + urlObj.host;\n    }\n    return input;\n    // eslint-disable-next-line no-empty\n  } catch (err) {}\n  if (input.startsWith(\"/\")) {\n    throw new Error(\"Please provide a valid domain name\");\n  }\n  // not a valid URL\n  if (input.indexOf(\".\") === 0) {\n    input = input.substr(1);\n  }\n  // If the input contains a . it means they have given a domain name.\n  // So we try assuming that they have given a domain name\n  if ((input.indexOf(\".\") !== -1 || input.startsWith(\"localhost\")) && !input.startsWith(\"http://\") && !input.startsWith(\"https://\")) {\n    input = \"https://\" + input;\n    // at this point, it should be a valid URL. So we test that before doing a recursive call\n    try {\n      new URL(input);\n      return normaliseURLDomainOrThrowError(input, true);\n      // eslint-disable-next-line no-empty\n    } catch (err) {}\n  }\n  throw new Error(\"Please provide a valid domain name\");\n}", "\"use strict\";\n\n/* Copyright (c) 2022, VRAI Labs and/or its affiliates. All rights reserved.\n *\n * This software is licensed under the Apache License, Version 2.0 (the\n * \"License\") as published by the Apache Software Foundation.\n *\n * You may not use this file except in compliance with the License. You may\n * obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\n * License for the specific language governing permissions and limitations\n * under the License.\n */\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar NormalisedURLPath = /** @class */function () {\n  function NormalisedURLPath(url) {\n    var _this = this;\n    this.startsWith = function (other) {\n      return _this.value.startsWith(other.value);\n    };\n    this.appendPath = function (other) {\n      return new NormalisedURLPath(_this.value + other.value);\n    };\n    this.getAsStringDangerous = function () {\n      // Otherwise, return value.\n      return _this.value;\n    };\n    this.value = normaliseURLPathOrThrowError(url);\n  }\n  return NormalisedURLPath;\n}();\nexports.default = NormalisedURLPath;\nfunction normaliseURLPathOrThrowError(input) {\n  input = input.trim();\n  try {\n    if (!input.startsWith(\"http://\") && !input.startsWith(\"https://\")) {\n      throw new Error(\"Error converting to proper URL\");\n    }\n    var urlObj = new URL(input);\n    input = urlObj.pathname;\n    if (input.charAt(input.length - 1) === \"/\") {\n      return input.substr(0, input.length - 1);\n    }\n    return input;\n    // eslint-disable-next-line no-empty\n  } catch (err) {}\n  // not a valid URL\n  // If the input contains a . it means they have given a domain name.\n  // So we try assuming that they have given a domain name + path\n  if ((domainGiven(input) || input.startsWith(\"localhost\")) && !input.startsWith(\"http://\") && !input.startsWith(\"https://\")) {\n    input = \"http://\" + input;\n    return normaliseURLPathOrThrowError(input);\n  }\n  if (input.charAt(0) !== \"/\") {\n    input = \"/\" + input;\n  }\n  // at this point, we should be able to convert it into a fake URL and recursively call this function.\n  try {\n    // test that we can convert this to prevent an infinite loop\n    new URL(\"http://example.com\" + input);\n    return normaliseURLPathOrThrowError(\"http://example.com\" + input);\n  } catch (err) {\n    throw new Error(\"Please provide a valid URL path\");\n  }\n}\nfunction domainGiven(input) {\n  // If no dot, return false.\n  if (input.indexOf(\".\") === -1 || input.startsWith(\"/\")) {\n    return false;\n  }\n  try {\n    var url = new URL(input);\n    return url.hostname.indexOf(\".\") !== -1;\n  } catch (e) {}\n  try {\n    var url = new URL(\"http://\" + input);\n    return url.hostname.indexOf(\".\") !== -1;\n  } catch (e) {}\n  return false;\n}", "\"use strict\";\n\n/* Copyright (c) 2021, VRAI Labs and/or its affiliates. All rights reserved.\n *\n * This software is licensed under the Apache License, Version 2.0 (the\n * \"License\") as published by the Apache Software Foundation.\n *\n * You may not use this file except in compliance with the License. You may\n * obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\n * License for the specific language governing permissions and limitations\n * under the License.\n */\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.isAnIpAddress = void 0;\nfunction isAnIpAddress(ipaddress) {\n  return /^(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/.test(ipaddress);\n}\nexports.isAnIpAddress = isAnIpAddress;\nvar NormalisedURLDomain = /** @class */function () {\n  function NormalisedURLDomain(url) {\n    var _this = this;\n    this.getAsStringDangerous = function () {\n      return _this.value;\n    };\n    this.value = normaliseURLDomainOrThrowError(url);\n  }\n  return NormalisedURLDomain;\n}();\nexports.default = NormalisedURLDomain;\nfunction normaliseURLDomainOrThrowError(input, ignoreProtocol) {\n  if (ignoreProtocol === void 0) {\n    ignoreProtocol = false;\n  }\n  input = input.trim();\n  try {\n    if (!input.startsWith(\"http://\") && !input.startsWith(\"https://\")) {\n      throw new Error(\"converting to proper URL\");\n    }\n    var urlObj = new URL(input);\n    if (ignoreProtocol) {\n      if (urlObj.hostname.startsWith(\"localhost\") || isAnIpAddress(urlObj.hostname)) {\n        input = \"http://\" + urlObj.host;\n      } else {\n        input = \"https://\" + urlObj.host;\n      }\n    } else {\n      input = urlObj.protocol + \"//\" + urlObj.host;\n    }\n    return input;\n    // eslint-disable-next-line no-empty\n  } catch (err) {}\n  if (input.startsWith(\"/\")) {\n    throw new Error(\"Please provide a valid domain name\");\n  }\n  // not a valid URL\n  if (input.indexOf(\".\") === 0) {\n    input = input.substr(1);\n  }\n  // If the input contains a . it means they have given a domain name.\n  // So we try assuming that they have given a domain name\n  if ((input.indexOf(\".\") !== -1 || input.startsWith(\"localhost\")) && !input.startsWith(\"http://\") && !input.startsWith(\"https://\")) {\n    input = \"https://\" + input;\n    // at this point, it should be a valid URL. So we test that before doing a recursive call\n    try {\n      new URL(input);\n      return normaliseURLDomainOrThrowError(input, true);\n      // eslint-disable-next-line no-empty\n    } catch (err) {}\n  }\n  throw new Error(\"Please provide a valid domain name\");\n}", "\"use strict\";\n\n/* Copyright (c) 2021, VRAI Labs and/or its affiliates. All rights reserved.\n *\n * This software is licensed under the Apache License, Version 2.0 (the\n * \"License\") as published by the Apache Software Foundation.\n *\n * You may not use this file except in compliance with the License. You may\n * obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\n * License for the specific language governing permissions and limitations\n * under the License.\n */\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar NormalisedURLPath = /** @class */function () {\n  function NormalisedURLPath(url) {\n    var _this = this;\n    this.startsWith = function (other) {\n      return _this.value.startsWith(other.value);\n    };\n    this.appendPath = function (other) {\n      return new NormalisedURLPath(_this.value + other.value);\n    };\n    this.getAsStringDangerous = function () {\n      return _this.value;\n    };\n    this.value = normaliseURLPathOrThrowError(url);\n  }\n  return NormalisedURLPath;\n}();\nexports.default = NormalisedURLPath;\nfunction normaliseURLPathOrThrowError(input) {\n  input = input.trim();\n  try {\n    if (!input.startsWith(\"http://\") && !input.startsWith(\"https://\")) {\n      throw new Error(\"converting to proper URL\");\n    }\n    var urlObj = new URL(input);\n    input = urlObj.pathname;\n    if (input.charAt(input.length - 1) === \"/\") {\n      return input.substr(0, input.length - 1);\n    }\n    return input;\n    // eslint-disable-next-line no-empty\n  } catch (err) {}\n  // not a valid URL\n  // If the input contains a . it means they have given a domain name.\n  // So we try assuming that they have given a domain name + path\n  if ((domainGiven(input) || input.startsWith(\"localhost\")) && !input.startsWith(\"http://\") && !input.startsWith(\"https://\")) {\n    input = \"http://\" + input;\n    return normaliseURLPathOrThrowError(input);\n  }\n  if (input.charAt(0) !== \"/\") {\n    input = \"/\" + input;\n  }\n  // at this point, we should be able to convert it into a fake URL and recursively call this function.\n  try {\n    // test that we can convert this to prevent an infinite loop\n    new URL(\"http://example.com\" + input);\n    return normaliseURLPathOrThrowError(\"http://example.com\" + input);\n  } catch (err) {\n    throw new Error(\"Please provide a valid URL path\");\n  }\n}\nfunction domainGiven(input) {\n  // If no dot, return false.\n  if (input.indexOf(\".\") === -1 || input.startsWith(\"/\")) {\n    return false;\n  }\n  try {\n    var url = new URL(input);\n    return url.hostname.indexOf(\".\") !== -1;\n  } catch (e) {}\n  try {\n    var url = new URL(\"http://\" + input);\n    return url.hostname.indexOf(\".\") !== -1;\n  } catch (e) {}\n  return false;\n}", "\"use strict\";\n\n/* Copyright (c) 2020, VRAI Labs and/or its affiliates. All rights reserved.\n *\n * This software is licensed under the Apache License, Version 2.0 (the\n * \"License\") as published by the Apache Software Foundation.\n *\n * You may not use this file except in compliance with the License. You may\n * obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\n * License for the specific language governing permissions and limitations\n * under the License.\n */\nvar __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n    return t;\n  };\n  return __assign.apply(this, arguments);\n};\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nvar __generator = this && this.__generator || function (thisArg, body) {\n  var _ = {\n      label: 0,\n      sent: function () {\n        if (t[0] & 1) throw t[1];\n        return t[1];\n      },\n      trys: [],\n      ops: []\n    },\n    f,\n    y,\n    t,\n    g;\n  return g = {\n    next: verb(0),\n    throw: verb(1),\n    return: verb(2)\n  }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function () {\n    return this;\n  }), g;\n  function verb(n) {\n    return function (v) {\n      return step([n, v]);\n    };\n  }\n  function step(op) {\n    if (f) throw new TypeError(\"Generator is already executing.\");\n    while (_) try {\n      if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n      if (y = 0, t) op = [op[0] & 2, t.value];\n      switch (op[0]) {\n        case 0:\n        case 1:\n          t = op;\n          break;\n        case 4:\n          _.label++;\n          return {\n            value: op[1],\n            done: false\n          };\n        case 5:\n          _.label++;\n          y = op[1];\n          op = [0];\n          continue;\n        case 7:\n          op = _.ops.pop();\n          _.trys.pop();\n          continue;\n        default:\n          if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {\n            _ = 0;\n            continue;\n          }\n          if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {\n            _.label = op[1];\n            break;\n          }\n          if (op[0] === 6 && _.label < t[1]) {\n            _.label = t[1];\n            t = op;\n            break;\n          }\n          if (t && _.label < t[2]) {\n            _.label = t[2];\n            _.ops.push(op);\n            break;\n          }\n          if (t[2]) _.ops.pop();\n          _.trys.pop();\n          continue;\n      }\n      op = body.call(thisArg, _);\n    } catch (e) {\n      op = [6, e];\n      y = 0;\n    } finally {\n      f = t = 0;\n    }\n    if (op[0] & 5) throw op[1];\n    return {\n      value: op[0] ? op[1] : void 0,\n      done: true\n    };\n  }\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.matchesDomainOrSubdomain = exports.getNormalisedUserContext = exports.validateAndNormaliseInputOrThrowError = exports.normaliseSessionScopeOrThrowError = exports.normaliseURLPathOrThrowError = exports.normaliseURLDomainOrThrowError = void 0;\nvar normalisedURLDomain_1 = require(\"../normalisedURLDomain\");\nvar normalisedURLPath_1 = require(\"../normalisedURLPath\");\nvar windowHandler_1 = require(\"../utils/windowHandler\");\nfunction normaliseURLDomainOrThrowError(input) {\n  var str = new normalisedURLDomain_1.default(input).getAsStringDangerous();\n  return str;\n}\nexports.normaliseURLDomainOrThrowError = normaliseURLDomainOrThrowError;\nfunction normaliseURLPathOrThrowError(input) {\n  return new normalisedURLPath_1.default(input).getAsStringDangerous();\n}\nexports.normaliseURLPathOrThrowError = normaliseURLPathOrThrowError;\nfunction normaliseSessionScopeOrThrowError(sessionScope) {\n  function helper(sessionScope) {\n    sessionScope = sessionScope.trim().toLowerCase();\n    // first we convert it to a URL so that we can use the URL class\n    if (sessionScope.startsWith(\".\")) {\n      sessionScope = sessionScope.substr(1);\n    }\n    if (!sessionScope.startsWith(\"http://\") && !sessionScope.startsWith(\"https://\")) {\n      sessionScope = \"http://\" + sessionScope;\n    }\n    try {\n      var urlObj = new URL(sessionScope);\n      sessionScope = urlObj.hostname;\n      return sessionScope;\n    } catch (err) {\n      throw new Error(\"Please provide a valid sessionScope\");\n    }\n  }\n  var noDotNormalised = helper(sessionScope);\n  if (noDotNormalised === \"localhost\" || (0, normalisedURLDomain_1.isAnIpAddress)(noDotNormalised)) {\n    return noDotNormalised;\n  }\n  if (sessionScope.startsWith(\".\")) {\n    return \".\" + noDotNormalised;\n  }\n  return noDotNormalised;\n}\nexports.normaliseSessionScopeOrThrowError = normaliseSessionScopeOrThrowError;\nfunction validateAndNormaliseInputOrThrowError(options) {\n  var _this = this;\n  var apiDomain = normaliseURLDomainOrThrowError(options.apiDomain);\n  var apiBasePath = normaliseURLPathOrThrowError(\"/auth\");\n  if (options.apiBasePath !== undefined) {\n    apiBasePath = normaliseURLPathOrThrowError(options.apiBasePath);\n  }\n  var defaultSessionScope = windowHandler_1.default.getReferenceOrThrow().windowHandler.location.getHostName();\n  // See https://github.com/supertokens/supertokens-website/issues/98\n  var sessionTokenFrontendDomain = normaliseSessionScopeOrThrowError(options !== undefined && options.sessionTokenFrontendDomain !== undefined ? options.sessionTokenFrontendDomain : defaultSessionScope);\n  var sessionExpiredStatusCode = 401;\n  if (options.sessionExpiredStatusCode !== undefined) {\n    sessionExpiredStatusCode = options.sessionExpiredStatusCode;\n  }\n  var invalidClaimStatusCode = 403;\n  if (options.invalidClaimStatusCode !== undefined) {\n    invalidClaimStatusCode = options.invalidClaimStatusCode;\n  }\n  if (sessionExpiredStatusCode === invalidClaimStatusCode) {\n    throw new Error(\"sessionExpiredStatusCode and invalidClaimStatusCode cannot be the same.\");\n  }\n  var autoAddCredentials = true;\n  if (options.autoAddCredentials !== undefined) {\n    autoAddCredentials = options.autoAddCredentials;\n  }\n  var isInIframe = false;\n  if (options.isInIframe !== undefined) {\n    isInIframe = options.isInIframe;\n  }\n  var sessionTokenBackendDomain = undefined;\n  if (options.sessionTokenBackendDomain !== undefined) {\n    sessionTokenBackendDomain = normaliseSessionScopeOrThrowError(options.sessionTokenBackendDomain);\n  }\n  var maxRetryAttemptsForSessionRefresh = 10;\n  if (options.maxRetryAttemptsForSessionRefresh !== undefined) {\n    if (options.maxRetryAttemptsForSessionRefresh < 0) {\n      throw new Error(\"maxRetryAttemptsForSessionRefresh must be greater than or equal to 0.\");\n    }\n    maxRetryAttemptsForSessionRefresh = options.maxRetryAttemptsForSessionRefresh;\n  }\n  var preAPIHook = function (context) {\n    return __awaiter(_this, void 0, void 0, function () {\n      return __generator(this, function (_a) {\n        return [2 /*return*/, {\n          url: context.url,\n          requestInit: context.requestInit\n        }];\n      });\n    });\n  };\n  if (options.preAPIHook !== undefined) {\n    preAPIHook = options.preAPIHook;\n  }\n  var postAPIHook = function () {\n    return __awaiter(_this, void 0, void 0, function () {\n      return __generator(this, function (_a) {\n        return [2 /*return*/];\n      });\n    });\n  };\n  if (options.postAPIHook !== undefined) {\n    postAPIHook = options.postAPIHook;\n  }\n  var onHandleEvent = function () {};\n  if (options.onHandleEvent !== undefined) {\n    onHandleEvent = options.onHandleEvent;\n  }\n  var override = __assign({\n    functions: function (oI) {\n      return oI;\n    }\n  }, options.override);\n  return {\n    apiDomain: apiDomain,\n    apiBasePath: apiBasePath,\n    sessionTokenFrontendDomain: sessionTokenFrontendDomain,\n    sessionExpiredStatusCode: sessionExpiredStatusCode,\n    invalidClaimStatusCode: invalidClaimStatusCode,\n    autoAddCredentials: autoAddCredentials,\n    isInIframe: isInIframe,\n    tokenTransferMethod: options.tokenTransferMethod !== undefined ? options.tokenTransferMethod : \"cookie\",\n    sessionTokenBackendDomain: sessionTokenBackendDomain,\n    maxRetryAttemptsForSessionRefresh: maxRetryAttemptsForSessionRefresh,\n    preAPIHook: preAPIHook,\n    postAPIHook: postAPIHook,\n    onHandleEvent: onHandleEvent,\n    override: override\n  };\n}\nexports.validateAndNormaliseInputOrThrowError = validateAndNormaliseInputOrThrowError;\nfunction getNormalisedUserContext(userContext) {\n  if (userContext === undefined) {\n    return {};\n  }\n  return userContext;\n}\nexports.getNormalisedUserContext = getNormalisedUserContext;\n/**\n * Checks if a given string matches any subdomain or the main domain of a specified hostname.\n *\n * @param {string} hostname - The hostname to derive subdomains from.\n * @param {string} str - The string to compare against the subdomains.\n * @returns {boolean} True if the string matches any subdomain or the main domain, otherwise false.\n */\nfunction matchesDomainOrSubdomain(hostname, str) {\n  var parts = hostname.split(\".\");\n  for (var i = 0; i < parts.length; i++) {\n    var subdomainCandidate = parts.slice(i).join(\".\");\n    if (subdomainCandidate === str || \".\".concat(subdomainCandidate) === str) {\n      return true;\n    }\n  }\n  return false;\n}\nexports.matchesDomainOrSubdomain = matchesDomainOrSubdomain;", "\"use strict\";\n\n/* Copyright (c) 2020, VRAI Labs and/or its affiliates. All rights reserved.\n *\n * This software is licensed under the Apache License, Version 2.0 (the\n * \"License\") as published by the Apache Software Foundation.\n *\n * You may not use this file except in compliance with the License. You may\n * obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\n * License for the specific language governing permissions and limitations\n * under the License.\n */\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nvar __generator = this && this.__generator || function (thisArg, body) {\n  var _ = {\n      label: 0,\n      sent: function () {\n        if (t[0] & 1) throw t[1];\n        return t[1];\n      },\n      trys: [],\n      ops: []\n    },\n    f,\n    y,\n    t,\n    g;\n  return g = {\n    next: verb(0),\n    throw: verb(1),\n    return: verb(2)\n  }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function () {\n    return this;\n  }), g;\n  function verb(n) {\n    return function (v) {\n      return step([n, v]);\n    };\n  }\n  function step(op) {\n    if (f) throw new TypeError(\"Generator is already executing.\");\n    while (_) try {\n      if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n      if (y = 0, t) op = [op[0] & 2, t.value];\n      switch (op[0]) {\n        case 0:\n        case 1:\n          t = op;\n          break;\n        case 4:\n          _.label++;\n          return {\n            value: op[1],\n            done: false\n          };\n        case 5:\n          _.label++;\n          y = op[1];\n          op = [0];\n          continue;\n        case 7:\n          op = _.ops.pop();\n          _.trys.pop();\n          continue;\n        default:\n          if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {\n            _ = 0;\n            continue;\n          }\n          if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {\n            _.label = op[1];\n            break;\n          }\n          if (op[0] === 6 && _.label < t[1]) {\n            _.label = t[1];\n            t = op;\n            break;\n          }\n          if (t && _.label < t[2]) {\n            _.label = t[2];\n            _.ops.push(op);\n            break;\n          }\n          if (t[2]) _.ops.pop();\n          _.trys.pop();\n          continue;\n      }\n      op = body.call(thisArg, _);\n    } catch (e) {\n      op = [6, e];\n      y = 0;\n    } finally {\n      f = t = 0;\n    }\n    if (op[0] & 5) throw op[1];\n    return {\n      value: op[0] ? op[1] : void 0,\n      done: true\n    };\n  }\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.ProcessState = exports.PROCESS_STATE = void 0;\nvar PROCESS_STATE;\n(function (PROCESS_STATE) {\n  //CALLING_INTERCEPTION_REQUEST : Process state for the request interceptor.\n  //CALLING_INTERCEPTION_RESOPONSE : Process state for the response interceptor.\n  PROCESS_STATE[PROCESS_STATE[\"CALLING_INTERCEPTION_REQUEST\"] = 0] = \"CALLING_INTERCEPTION_REQUEST\";\n  PROCESS_STATE[PROCESS_STATE[\"CALLING_INTERCEPTION_RESPONSE\"] = 1] = \"CALLING_INTERCEPTION_RESPONSE\";\n})(PROCESS_STATE = exports.PROCESS_STATE || (exports.PROCESS_STATE = {}));\nvar ProcessState = /** @class */function () {\n  function ProcessState() {\n    var _this = this;\n    this.history = [];\n    this.addState = function (state) {\n      try {\n        if (process !== undefined && process.env !== undefined && process.env.TEST_MODE === \"testing\") {\n          _this.history.push(state);\n        }\n      } catch (ignored) {}\n    };\n    this.getEventByLastEventByName = function (state) {\n      for (var i = _this.history.length - 1; i >= 0; i--) {\n        if (_this.history[i] == state) {\n          return _this.history[i];\n        }\n      }\n      return undefined;\n    };\n    this.reset = function () {\n      _this.history = [];\n    };\n    this.waitForEvent = function (state, timeInMS) {\n      if (timeInMS === void 0) {\n        timeInMS = 7000;\n      }\n      return __awaiter(_this, void 0, void 0, function () {\n        var startTime;\n        var _this = this;\n        return __generator(this, function (_a) {\n          startTime = Date.now();\n          return [2 /*return*/, new Promise(function (resolve) {\n            var actualThis = _this;\n            function tryAndGet() {\n              var result = actualThis.getEventByLastEventByName(state);\n              if (result === undefined) {\n                if (Date.now() - startTime > timeInMS) {\n                  resolve(undefined);\n                } else {\n                  setTimeout(tryAndGet, 1000);\n                }\n              } else {\n                resolve(result);\n              }\n            }\n            tryAndGet();\n          })];\n        });\n      });\n    };\n  }\n  ProcessState.getInstance = function () {\n    if (ProcessState.instance == undefined) {\n      ProcessState.instance = new ProcessState();\n    }\n    return ProcessState.instance;\n  };\n  return ProcessState;\n}();\nexports.ProcessState = ProcessState;", "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.supported_fdi = exports.package_version = void 0;\n/* Copyright (c) 2020, VRAI Labs and/or its affiliates. All rights reserved.\n *\n * This software is licensed under the Apache License, Version 2.0 (the\n * \"License\") as published by the Apache Software Foundation.\n *\n * You may not use this file except in compliance with the License. You may\n * obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\n * License for the specific language governing permissions and limitations\n * under the License.\n */\nexports.package_version = \"20.1.5\";\nexports.supported_fdi = [\"1.16\", \"1.17\", \"1.18\", \"1.19\", \"2.0\", \"3.0\", \"3.1\", \"4.0\"];", "\"use strict\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nvar __generator = this && this.__generator || function (thisArg, body) {\n  var _ = {\n      label: 0,\n      sent: function () {\n        if (t[0] & 1) throw t[1];\n        return t[1];\n      },\n      trys: [],\n      ops: []\n    },\n    f,\n    y,\n    t,\n    g;\n  return g = {\n    next: verb(0),\n    throw: verb(1),\n    return: verb(2)\n  }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function () {\n    return this;\n  }), g;\n  function verb(n) {\n    return function (v) {\n      return step([n, v]);\n    };\n  }\n  function step(op) {\n    if (f) throw new TypeError(\"Generator is already executing.\");\n    while (_) try {\n      if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n      if (y = 0, t) op = [op[0] & 2, t.value];\n      switch (op[0]) {\n        case 0:\n        case 1:\n          t = op;\n          break;\n        case 4:\n          _.label++;\n          return {\n            value: op[1],\n            done: false\n          };\n        case 5:\n          _.label++;\n          y = op[1];\n          op = [0];\n          continue;\n        case 7:\n          op = _.ops.pop();\n          _.trys.pop();\n          continue;\n        default:\n          if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {\n            _ = 0;\n            continue;\n          }\n          if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {\n            _.label = op[1];\n            break;\n          }\n          if (op[0] === 6 && _.label < t[1]) {\n            _.label = t[1];\n            t = op;\n            break;\n          }\n          if (t && _.label < t[2]) {\n            _.label = t[2];\n            _.ops.push(op);\n            break;\n          }\n          if (t[2]) _.ops.pop();\n          _.trys.pop();\n          continue;\n      }\n      op = body.call(thisArg, _);\n    } catch (e) {\n      op = [6, e];\n      y = 0;\n    } finally {\n      f = t = 0;\n    }\n    if (op[0] & 5) throw op[1];\n    return {\n      value: op[0] ? op[1] : void 0,\n      done: true\n    };\n  }\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.defaultCookieHandlerImplementation = void 0;\nvar windowHandler_1 = require(\"../windowHandler\");\nexports.defaultCookieHandlerImplementation = {\n  getCookie: function () {\n    return __awaiter(this, void 0, void 0, function () {\n      return __generator(this, function (_a) {\n        return [2 /*return*/, windowHandler_1.default.getReferenceOrThrow().windowHandler.getWindowUnsafe().document.cookie];\n      });\n    });\n  },\n  setCookie: function (cookieString) {\n    return __awaiter(this, void 0, void 0, function () {\n      return __generator(this, function (_a) {\n        windowHandler_1.default.getReferenceOrThrow().windowHandler.getWindowUnsafe().document.cookie = cookieString;\n        return [2 /*return*/];\n      });\n    });\n  }\n};", "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.CookieHandlerReference = void 0;\n/* Copyright (c) 2022, VRAI Labs and/or its affiliates. All rights reserved.\n *\n * This software is licensed under the Apache License, Version 2.0 (the\n * \"License\") as published by the Apache Software Foundation.\n *\n * You may not use this file except in compliance with the License. You may\n * obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\n * License for the specific language governing permissions and limitations\n * under the License.\n */\nvar defaultImplementation_1 = require(\"./defaultImplementation\");\nvar CookieHandlerReference = /** @class */function () {\n  function CookieHandlerReference(cookieHandlerInput) {\n    var cookieHandlerFunc = function (original) {\n      return original;\n    };\n    if (cookieHandlerInput !== undefined) {\n      cookieHandlerFunc = cookieHandlerInput;\n    }\n    this.cookieHandler = cookieHandlerFunc(defaultImplementation_1.defaultCookieHandlerImplementation);\n  }\n  CookieHandlerReference.init = function (cookieHandlerInput) {\n    if (CookieHandlerReference.instance !== undefined) {\n      return;\n    }\n    CookieHandlerReference.instance = new CookieHandlerReference(cookieHandlerInput);\n  };\n  CookieHandlerReference.getReferenceOrThrow = function () {\n    if (CookieHandlerReference.instance === undefined) {\n      throw new Error(\"SuperTokensCookieHandler must be initialized before calling this method.\");\n    }\n    return CookieHandlerReference.instance;\n  };\n  return CookieHandlerReference;\n}();\nexports.CookieHandlerReference = CookieHandlerReference;\nexports.default = CookieHandlerReference;", "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar ProcessLocking = /** @class */function () {\n  function ProcessLocking() {\n    var _this = this;\n    this.locked = new Map();\n    this.addToLocked = function (key, toAdd) {\n      var callbacks = _this.locked.get(key);\n      if (callbacks === undefined) {\n        if (toAdd === undefined) {\n          _this.locked.set(key, []);\n        } else {\n          _this.locked.set(key, [toAdd]);\n        }\n      } else {\n        if (toAdd !== undefined) {\n          callbacks.unshift(toAdd);\n          _this.locked.set(key, callbacks);\n        }\n      }\n    };\n    this.isLocked = function (key) {\n      return _this.locked.has(key);\n    };\n    this.lock = function (key) {\n      return new Promise(function (resolve, reject) {\n        if (_this.isLocked(key)) {\n          _this.addToLocked(key, resolve);\n        } else {\n          _this.addToLocked(key);\n          resolve();\n        }\n      });\n    };\n    this.unlock = function (key) {\n      var callbacks = _this.locked.get(key);\n      if (callbacks === undefined || callbacks.length === 0) {\n        _this.locked.delete(key);\n        return;\n      }\n      var toCall = callbacks.pop();\n      _this.locked.set(key, callbacks);\n      if (toCall !== undefined) {\n        setTimeout(toCall, 0);\n      }\n    };\n  }\n  ProcessLocking.getInstance = function () {\n    if (ProcessLocking.instance === undefined) {\n      ProcessLocking.instance = new ProcessLocking();\n    }\n    return ProcessLocking.instance;\n  };\n  return ProcessLocking;\n}();\nfunction getLock() {\n  return ProcessLocking.getInstance();\n}\nexports.default = getLock;", "\"use strict\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : new P(function (resolve) {\n        resolve(result.value);\n      }).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nvar __generator = this && this.__generator || function (thisArg, body) {\n  var _ = {\n      label: 0,\n      sent: function () {\n        if (t[0] & 1) throw t[1];\n        return t[1];\n      },\n      trys: [],\n      ops: []\n    },\n    f,\n    y,\n    t,\n    g;\n  return g = {\n    next: verb(0),\n    \"throw\": verb(1),\n    \"return\": verb(2)\n  }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function () {\n    return this;\n  }), g;\n  function verb(n) {\n    return function (v) {\n      return step([n, v]);\n    };\n  }\n  function step(op) {\n    if (f) throw new TypeError(\"Generator is already executing.\");\n    while (_) try {\n      if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n      if (y = 0, t) op = [op[0] & 2, t.value];\n      switch (op[0]) {\n        case 0:\n        case 1:\n          t = op;\n          break;\n        case 4:\n          _.label++;\n          return {\n            value: op[1],\n            done: false\n          };\n        case 5:\n          _.label++;\n          y = op[1];\n          op = [0];\n          continue;\n        case 7:\n          op = _.ops.pop();\n          _.trys.pop();\n          continue;\n        default:\n          if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {\n            _ = 0;\n            continue;\n          }\n          if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {\n            _.label = op[1];\n            break;\n          }\n          if (op[0] === 6 && _.label < t[1]) {\n            _.label = t[1];\n            t = op;\n            break;\n          }\n          if (t && _.label < t[2]) {\n            _.label = t[2];\n            _.ops.push(op);\n            break;\n          }\n          if (t[2]) _.ops.pop();\n          _.trys.pop();\n          continue;\n      }\n      op = body.call(thisArg, _);\n    } catch (e) {\n      op = [6, e];\n      y = 0;\n    } finally {\n      f = t = 0;\n    }\n    if (op[0] & 5) throw op[1];\n    return {\n      value: op[0] ? op[1] : void 0,\n      done: true\n    };\n  }\n};\nvar _this = this;\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar processLock_1 = require(\"./processLock\");\n/**\n * @author: SuperTokens (https://github.com/supertokens)\n * This library was created as a part of a larger project, SuperTokens(https://supertokens.io) - the best session management solution.\n * You can also check out our other projects on https://github.com/supertokens\n *\n * To contribute to this package visit https://github.com/supertokens/browser-tabs-lock\n * If you face any problems you can file an issue on https://github.com/supertokens/browser-tabs-lock/issues\n *\n * If you have any questions or if you just want to say hi visit https://supertokens.io/discord\n */\n/**\n * @constant\n * @type {string}\n * @default\n * @description All the locks taken by this package will have this as prefix\n*/\nvar LOCK_STORAGE_KEY = 'browser-tabs-lock-key';\nvar DEFAULT_STORAGE_HANDLER = {\n  key: function (index) {\n    return __awaiter(_this, void 0, void 0, function () {\n      return __generator(this, function (_a) {\n        throw new Error(\"Unsupported\");\n      });\n    });\n  },\n  getItem: function (key) {\n    return __awaiter(_this, void 0, void 0, function () {\n      return __generator(this, function (_a) {\n        throw new Error(\"Unsupported\");\n      });\n    });\n  },\n  clear: function () {\n    return __awaiter(_this, void 0, void 0, function () {\n      return __generator(this, function (_a) {\n        return [2 /*return*/, window.localStorage.clear()];\n      });\n    });\n  },\n  removeItem: function (key) {\n    return __awaiter(_this, void 0, void 0, function () {\n      return __generator(this, function (_a) {\n        throw new Error(\"Unsupported\");\n      });\n    });\n  },\n  setItem: function (key, value) {\n    return __awaiter(_this, void 0, void 0, function () {\n      return __generator(this, function (_a) {\n        throw new Error(\"Unsupported\");\n      });\n    });\n  },\n  keySync: function (index) {\n    return window.localStorage.key(index);\n  },\n  getItemSync: function (key) {\n    return window.localStorage.getItem(key);\n  },\n  clearSync: function () {\n    return window.localStorage.clear();\n  },\n  removeItemSync: function (key) {\n    return window.localStorage.removeItem(key);\n  },\n  setItemSync: function (key, value) {\n    return window.localStorage.setItem(key, value);\n  }\n};\n/**\n * @function delay\n * @param {number} milliseconds - How long the delay should be in terms of milliseconds\n * @returns {Promise<void>}\n */\nfunction delay(milliseconds) {\n  return new Promise(function (resolve) {\n    return setTimeout(resolve, milliseconds);\n  });\n}\n/**\n * @function generateRandomString\n * @params {number} length - How long the random string should be\n * @returns {string}\n * @description returns random string whose length is equal to the length passed as parameter\n */\nfunction generateRandomString(length) {\n  var CHARS = '0123456789ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz';\n  var randomstring = '';\n  for (var i = 0; i < length; i++) {\n    var INDEX = Math.floor(Math.random() * CHARS.length);\n    randomstring += CHARS[INDEX];\n  }\n  return randomstring;\n}\n/**\n * @function getLockId\n * @returns {string}\n * @description Generates an id which will be unique for the browser tab\n */\nfunction getLockId() {\n  return Date.now().toString() + generateRandomString(15);\n}\nvar SuperTokensLock = /** @class */function () {\n  function SuperTokensLock(storageHandler) {\n    this.acquiredIatSet = new Set();\n    this.storageHandler = undefined;\n    this.id = getLockId();\n    this.acquireLock = this.acquireLock.bind(this);\n    this.releaseLock = this.releaseLock.bind(this);\n    this.releaseLock__private__ = this.releaseLock__private__.bind(this);\n    this.waitForSomethingToChange = this.waitForSomethingToChange.bind(this);\n    this.refreshLockWhileAcquired = this.refreshLockWhileAcquired.bind(this);\n    this.storageHandler = storageHandler;\n    if (SuperTokensLock.waiters === undefined) {\n      SuperTokensLock.waiters = [];\n    }\n  }\n  /**\n   * @async\n   * @memberOf Lock\n   * @function acquireLock\n   * @param {string} lockKey - Key for which the lock is being acquired\n   * @param {number} [timeout=5000] - Maximum time for which the function will wait to acquire the lock\n   * @returns {Promise<boolean>}\n   * @description Will return true if lock is being acquired, else false.\n   *              Also the lock can be acquired for maximum 10 secs\n   */\n  SuperTokensLock.prototype.acquireLock = function (lockKey, timeout) {\n    if (timeout === void 0) {\n      timeout = 5000;\n    }\n    return __awaiter(this, void 0, void 0, function () {\n      var iat, MAX_TIME, STORAGE_KEY, STORAGE, lockObj, TIMEOUT_KEY, lockObjPostDelay, parsedLockObjPostDelay;\n      return __generator(this, function (_a) {\n        switch (_a.label) {\n          case 0:\n            iat = Date.now() + generateRandomString(4);\n            MAX_TIME = Date.now() + timeout;\n            STORAGE_KEY = LOCK_STORAGE_KEY + \"-\" + lockKey;\n            STORAGE = this.storageHandler === undefined ? DEFAULT_STORAGE_HANDLER : this.storageHandler;\n            _a.label = 1;\n          case 1:\n            if (!(Date.now() < MAX_TIME)) return [3 /*break*/, 8];\n            return [4 /*yield*/, delay(30)];\n          case 2:\n            _a.sent();\n            lockObj = STORAGE.getItemSync(STORAGE_KEY);\n            if (!(lockObj === null)) return [3 /*break*/, 5];\n            TIMEOUT_KEY = this.id + \"-\" + lockKey + \"-\" + iat;\n            // there is a problem if setItem happens at the exact same time for 2 different processes.. so we add some random delay here.\n            return [4 /*yield*/, delay(Math.floor(Math.random() * 25))];\n          case 3:\n            // there is a problem if setItem happens at the exact same time for 2 different processes.. so we add some random delay here.\n            _a.sent();\n            STORAGE.setItemSync(STORAGE_KEY, JSON.stringify({\n              id: this.id,\n              iat: iat,\n              timeoutKey: TIMEOUT_KEY,\n              timeAcquired: Date.now(),\n              timeRefreshed: Date.now()\n            }));\n            return [4 /*yield*/, delay(30)];\n          case 4:\n            _a.sent(); // this is to prevent race conditions. This time must be more than the time it takes for storage.setItem\n            lockObjPostDelay = STORAGE.getItemSync(STORAGE_KEY);\n            if (lockObjPostDelay !== null) {\n              parsedLockObjPostDelay = JSON.parse(lockObjPostDelay);\n              if (parsedLockObjPostDelay.id === this.id && parsedLockObjPostDelay.iat === iat) {\n                this.acquiredIatSet.add(iat);\n                this.refreshLockWhileAcquired(STORAGE_KEY, iat);\n                return [2 /*return*/, true];\n              }\n            }\n            return [3 /*break*/, 7];\n          case 5:\n            SuperTokensLock.lockCorrector(this.storageHandler === undefined ? DEFAULT_STORAGE_HANDLER : this.storageHandler);\n            return [4 /*yield*/, this.waitForSomethingToChange(MAX_TIME)];\n          case 6:\n            _a.sent();\n            _a.label = 7;\n          case 7:\n            iat = Date.now() + generateRandomString(4);\n            return [3 /*break*/, 1];\n          case 8:\n            return [2 /*return*/, false];\n        }\n      });\n    });\n  };\n  SuperTokensLock.prototype.refreshLockWhileAcquired = function (storageKey, iat) {\n    return __awaiter(this, void 0, void 0, function () {\n      var _this = this;\n      return __generator(this, function (_a) {\n        setTimeout(function () {\n          return __awaiter(_this, void 0, void 0, function () {\n            var STORAGE, lockObj, parsedLockObj;\n            return __generator(this, function (_a) {\n              switch (_a.label) {\n                case 0:\n                  return [4 /*yield*/, processLock_1.default().lock(iat)];\n                case 1:\n                  _a.sent();\n                  if (!this.acquiredIatSet.has(iat)) {\n                    processLock_1.default().unlock(iat);\n                    return [2 /*return*/];\n                  }\n                  STORAGE = this.storageHandler === undefined ? DEFAULT_STORAGE_HANDLER : this.storageHandler;\n                  lockObj = STORAGE.getItemSync(storageKey);\n                  if (lockObj !== null) {\n                    parsedLockObj = JSON.parse(lockObj);\n                    parsedLockObj.timeRefreshed = Date.now();\n                    STORAGE.setItemSync(storageKey, JSON.stringify(parsedLockObj));\n                    processLock_1.default().unlock(iat);\n                  } else {\n                    processLock_1.default().unlock(iat);\n                    return [2 /*return*/];\n                  }\n                  this.refreshLockWhileAcquired(storageKey, iat);\n                  return [2 /*return*/];\n              }\n            });\n          });\n        }, 1000);\n        return [2 /*return*/];\n      });\n    });\n  };\n  SuperTokensLock.prototype.waitForSomethingToChange = function (MAX_TIME) {\n    return __awaiter(this, void 0, void 0, function () {\n      return __generator(this, function (_a) {\n        switch (_a.label) {\n          case 0:\n            return [4 /*yield*/, new Promise(function (resolve) {\n              var resolvedCalled = false;\n              var startedAt = Date.now();\n              var MIN_TIME_TO_WAIT = 50; // ms\n              var removedListeners = false;\n              function stopWaiting() {\n                if (!removedListeners) {\n                  window.removeEventListener('storage', stopWaiting);\n                  SuperTokensLock.removeFromWaiting(stopWaiting);\n                  clearTimeout(timeOutId);\n                  removedListeners = true;\n                }\n                if (!resolvedCalled) {\n                  resolvedCalled = true;\n                  var timeToWait = MIN_TIME_TO_WAIT - (Date.now() - startedAt);\n                  if (timeToWait > 0) {\n                    setTimeout(resolve, timeToWait);\n                  } else {\n                    resolve(null);\n                  }\n                }\n              }\n              window.addEventListener('storage', stopWaiting);\n              SuperTokensLock.addToWaiting(stopWaiting);\n              var timeOutId = setTimeout(stopWaiting, Math.max(0, MAX_TIME - Date.now()));\n            })];\n          case 1:\n            _a.sent();\n            return [2 /*return*/];\n        }\n      });\n    });\n  };\n  SuperTokensLock.addToWaiting = function (func) {\n    this.removeFromWaiting(func);\n    if (SuperTokensLock.waiters === undefined) {\n      return;\n    }\n    SuperTokensLock.waiters.push(func);\n  };\n  SuperTokensLock.removeFromWaiting = function (func) {\n    if (SuperTokensLock.waiters === undefined) {\n      return;\n    }\n    SuperTokensLock.waiters = SuperTokensLock.waiters.filter(function (i) {\n      return i !== func;\n    });\n  };\n  SuperTokensLock.notifyWaiters = function () {\n    if (SuperTokensLock.waiters === undefined) {\n      return;\n    }\n    var waiters = SuperTokensLock.waiters.slice(); // so that if Lock.waiters is changed it's ok.\n    waiters.forEach(function (i) {\n      return i();\n    });\n  };\n  /**\n   * @function releaseLock\n   * @memberOf Lock\n   * @param {string} lockKey - Key for which lock is being released\n   * @returns {void}\n   * @description Release a lock.\n   */\n  SuperTokensLock.prototype.releaseLock = function (lockKey) {\n    return __awaiter(this, void 0, void 0, function () {\n      return __generator(this, function (_a) {\n        switch (_a.label) {\n          case 0:\n            return [4 /*yield*/, this.releaseLock__private__(lockKey)];\n          case 1:\n            return [2 /*return*/, _a.sent()];\n        }\n      });\n    });\n  };\n  /**\n   * @function releaseLock\n   * @memberOf Lock\n   * @param {string} lockKey - Key for which lock is being released\n   * @returns {void}\n   * @description Release a lock.\n   */\n  SuperTokensLock.prototype.releaseLock__private__ = function (lockKey) {\n    return __awaiter(this, void 0, void 0, function () {\n      var STORAGE, STORAGE_KEY, lockObj, parsedlockObj;\n      return __generator(this, function (_a) {\n        switch (_a.label) {\n          case 0:\n            STORAGE = this.storageHandler === undefined ? DEFAULT_STORAGE_HANDLER : this.storageHandler;\n            STORAGE_KEY = LOCK_STORAGE_KEY + \"-\" + lockKey;\n            lockObj = STORAGE.getItemSync(STORAGE_KEY);\n            if (lockObj === null) {\n              return [2 /*return*/];\n            }\n            parsedlockObj = JSON.parse(lockObj);\n            if (!(parsedlockObj.id === this.id)) return [3 /*break*/, 2];\n            return [4 /*yield*/, processLock_1.default().lock(parsedlockObj.iat)];\n          case 1:\n            _a.sent();\n            this.acquiredIatSet.delete(parsedlockObj.iat);\n            STORAGE.removeItemSync(STORAGE_KEY);\n            processLock_1.default().unlock(parsedlockObj.iat);\n            SuperTokensLock.notifyWaiters();\n            _a.label = 2;\n          case 2:\n            return [2 /*return*/];\n        }\n      });\n    });\n  };\n  /**\n   * @function lockCorrector\n   * @returns {void}\n   * @description If a lock is acquired by a tab and the tab is closed before the lock is\n   *              released, this function will release those locks\n   */\n  SuperTokensLock.lockCorrector = function (storageHandler) {\n    var MIN_ALLOWED_TIME = Date.now() - 5000;\n    var STORAGE = storageHandler;\n    var KEYS = [];\n    var currIndex = 0;\n    while (true) {\n      var key = STORAGE.keySync(currIndex);\n      if (key === null) {\n        break;\n      }\n      KEYS.push(key);\n      currIndex++;\n    }\n    var notifyWaiters = false;\n    for (var i = 0; i < KEYS.length; i++) {\n      var LOCK_KEY = KEYS[i];\n      if (LOCK_KEY.includes(LOCK_STORAGE_KEY)) {\n        var lockObj = STORAGE.getItemSync(LOCK_KEY);\n        if (lockObj !== null) {\n          var parsedlockObj = JSON.parse(lockObj);\n          if (parsedlockObj.timeRefreshed === undefined && parsedlockObj.timeAcquired < MIN_ALLOWED_TIME || parsedlockObj.timeRefreshed !== undefined && parsedlockObj.timeRefreshed < MIN_ALLOWED_TIME) {\n            STORAGE.removeItemSync(LOCK_KEY);\n            notifyWaiters = true;\n          }\n        }\n      }\n    }\n    if (notifyWaiters) {\n      SuperTokensLock.notifyWaiters();\n    }\n  };\n  SuperTokensLock.waiters = undefined;\n  return SuperTokensLock;\n}();\nexports.default = SuperTokensLock;", "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.LockFactoryReference = void 0;\nvar browser_tabs_lock_1 = require(\"browser-tabs-lock\");\nvar defaultFactory = function (storageHandler) {\n  return function () {\n    return Promise.resolve(new browser_tabs_lock_1.default(storageHandler));\n  };\n};\nvar LockFactoryReference = /** @class */function () {\n  function LockFactoryReference(lockFactory) {\n    this.lockFactory = lockFactory;\n  }\n  LockFactoryReference.init = function (lockFactory, storageHandler) {\n    // This is copied from the other XXXReference clasess\n    if (this.instance !== undefined) {\n      return;\n    }\n    this.instance = new LockFactoryReference(lockFactory !== null && lockFactory !== void 0 ? lockFactory : defaultFactory(storageHandler));\n  };\n  LockFactoryReference.getReferenceOrThrow = function () {\n    if (LockFactoryReference.instance === undefined) {\n      throw new Error(\"SuperTokensLockReference must be initialized before calling this method.\");\n    }\n    return LockFactoryReference.instance;\n  };\n  return LockFactoryReference;\n}();\nexports.LockFactoryReference = LockFactoryReference;\nexports.default = LockFactoryReference;", "\"use strict\";\n\n/* Copyright (c) 2021, VRAI Labs and/or its affiliates. All rights reserved.\n *\n * This software is licensed under the Apache License, Version 2.0 (the\n * \"License\") as published by the Apache Software Foundation.\n *\n * You may not use this file except in compliance with the License. You may\n * obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\n * License for the specific language governing permissions and limitations\n * under the License.\n */\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.logDebugMessage = exports.disableLogging = exports.enableLogging = void 0;\nvar version_1 = require(\"./version\");\nvar SUPERTOKENS_DEBUG_NAMESPACE = \"com.supertokens\";\nvar __supertokensWebsiteLogging = false;\nfunction enableLogging() {\n  __supertokensWebsiteLogging = true;\n}\nexports.enableLogging = enableLogging;\nfunction disableLogging() {\n  __supertokensWebsiteLogging = false;\n}\nexports.disableLogging = disableLogging;\nfunction logDebugMessage(message) {\n  if (__supertokensWebsiteLogging) {\n    console.log(\"\".concat(SUPERTOKENS_DEBUG_NAMESPACE, ' {t: \"').concat(new Date().toISOString(), '\", message: \"').concat(message, '\", supertokens-website-ver: \"').concat(version_1.package_version, '\"}'));\n  }\n}\nexports.logDebugMessage = logDebugMessage;", "\"use strict\";\n\n/* Copyright (c) 2024, VRAI Labs and/or its affiliates. All rights reserved.\n *\n * This software is licensed under the Apache License, Version 2.0 (the\n * \"License\") as published by the Apache Software Foundation.\n *\n * You may not use this file except in compliance with the License. You may\n * obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\n * License for the specific language governing permissions and limitations\n * under the License.\n */\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.DateProvider = void 0;\nvar windowHandler_1 = require(\"../windowHandler\");\nvar DateProvider = /** @class */function () {\n  function DateProvider() {\n    this.clockSkewInMillis = 0;\n    // Ensure a meaningful clock skew value by setting a threshold. Omitting a threshold would invariably lead to some\n    // clock skew due to server-client latency, arising from the time it takes for the token to arrive after being issued.\n    this.thresholdInSeconds = 7;\n  }\n  // The static init method is used to create a singleton instance of DateProvider,\n  // as we require access to localStorage for initializing clockSkewInMillis.\n  // Access to localStorage is available only after WindowHandlerReference is initialized.\n  // We took the following considerations into account while designing the cache implementation:\n  // 1. Cache cleared with an active session while the FE clock is wrong (e.g., Safari clears localStorage after 7 days).\n  //    - Resets clockSkewInMillis to 0, corrected in the next front token update.\n  // 2. Outdated info in the cache making the clock point into the future.\n  //    - May cause validator.shouldRefresh to always be true, corrected by the next front token update.\n  // 3. Outdated info in the cache making the clock point into the past.\n  //    - May cause validator.shouldRefresh to always be false, fixed during the next token refresh (worst case).\n  // 4. Other tabs (on different subdomains) refreshing the session with outdated info in the cache.\n  //    - Each subdomain has its own cache (localStorage), similar implications to cases 2 and 3.\n  // 5. Other tabs refreshing the session with outdated info in memory.\n  //    - May cause validator.shouldRefresh to always be true or false, fixed in the next front token update.\n  DateProvider.init = function () {\n    if (DateProvider.instance !== undefined) {\n      return;\n    }\n    DateProvider.instance = new DateProvider();\n    var localStorage = windowHandler_1.default.getReferenceOrThrow().windowHandler.localStorage;\n    var stored = localStorage.getItemSync(DateProvider.CLOCK_SKEW_KEY);\n    var clockSkewInMillis = stored !== null ? parseInt(stored, 10) : 0;\n    DateProvider.instance.setClientClockSkewInMillis(clockSkewInMillis);\n  };\n  DateProvider.getReferenceOrThrow = function () {\n    if (DateProvider.instance === undefined) {\n      throw new Error(\"DateProvider must be initialized before calling this method.\");\n    }\n    return DateProvider.instance;\n  };\n  DateProvider.prototype.getThresholdInSeconds = function () {\n    return this.thresholdInSeconds;\n  };\n  DateProvider.prototype.setThresholdInSeconds = function (thresholdInSeconds) {\n    this.thresholdInSeconds = thresholdInSeconds;\n  };\n  DateProvider.prototype.setClientClockSkewInMillis = function (clockSkewInMillis) {\n    this.clockSkewInMillis = Math.abs(clockSkewInMillis) >= this.thresholdInSeconds * 1000 ? clockSkewInMillis : 0;\n    var localStorage = windowHandler_1.default.getReferenceOrThrow().windowHandler.localStorage;\n    localStorage.setItemSync(DateProvider.CLOCK_SKEW_KEY, String(clockSkewInMillis));\n  };\n  DateProvider.prototype.getClientClockSkewInMillis = function () {\n    return this.clockSkewInMillis;\n  };\n  DateProvider.prototype.now = function () {\n    return Date.now() + this.getClientClockSkewInMillis();\n  };\n  DateProvider.CLOCK_SKEW_KEY = \"__st_clockSkewInMillis\";\n  return DateProvider;\n}();\nexports.DateProvider = DateProvider;", "\"use strict\";\n\n/* Copyright (c) 2024, VRAI Labs and/or its affiliates. All rights reserved.\n *\n * This software is licensed under the Apache License, Version 2.0 (the\n * \"License\") as published by the Apache Software Foundation.\n *\n * You may not use this file except in compliance with the License. You may\n * obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\n * License for the specific language governing permissions and limitations\n * under the License.\n */\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.DateProviderReference = void 0;\nvar defaultImplementation_1 = require(\"./defaultImplementation\");\n/**\n * A utility class for managing a reference to a DateProviderInterface, allowing customization of time-related operations.\n * This class is designed to address clock skew issues between the server and client by providing a consistent mechanism\n * for obtaining current time adjusted for clock skew.\n *\n * @class DateProviderReference\n */\nvar DateProviderReference = /** @class */function () {\n  function DateProviderReference(dateProviderInput) {\n    if (dateProviderInput !== undefined) {\n      this.dateProvider = dateProviderInput();\n    } else {\n      // Initialize the DateProvider implementation by calling the init method.\n      // This is done to ensure that the WindowHandler is initialized before we instantiate the DateProvider.\n      defaultImplementation_1.DateProvider.init();\n      this.dateProvider = defaultImplementation_1.DateProvider.getReferenceOrThrow();\n    }\n  }\n  DateProviderReference.init = function (dateProviderInput) {\n    if (DateProviderReference.instance !== undefined) {\n      return;\n    }\n    DateProviderReference.instance = new DateProviderReference(dateProviderInput);\n  };\n  DateProviderReference.getReferenceOrThrow = function () {\n    if (DateProviderReference.instance === undefined) {\n      throw new Error(\"SuperTokensDateProvider must be initialized before calling this method.\");\n    }\n    return DateProviderReference.instance;\n  };\n  return DateProviderReference;\n}();\nexports.DateProviderReference = DateProviderReference;\nexports.default = DateProviderReference;", "\"use strict\";\n\nvar __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n    return t;\n  };\n  return __assign.apply(this, arguments);\n};\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nvar __generator = this && this.__generator || function (thisArg, body) {\n  var _ = {\n      label: 0,\n      sent: function () {\n        if (t[0] & 1) throw t[1];\n        return t[1];\n      },\n      trys: [],\n      ops: []\n    },\n    f,\n    y,\n    t,\n    g;\n  return g = {\n    next: verb(0),\n    throw: verb(1),\n    return: verb(2)\n  }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function () {\n    return this;\n  }), g;\n  function verb(n) {\n    return function (v) {\n      return step([n, v]);\n    };\n  }\n  function step(op) {\n    if (f) throw new TypeError(\"Generator is already executing.\");\n    while (_) try {\n      if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n      if (y = 0, t) op = [op[0] & 2, t.value];\n      switch (op[0]) {\n        case 0:\n        case 1:\n          t = op;\n          break;\n        case 4:\n          _.label++;\n          return {\n            value: op[1],\n            done: false\n          };\n        case 5:\n          _.label++;\n          y = op[1];\n          op = [0];\n          continue;\n        case 7:\n          op = _.ops.pop();\n          _.trys.pop();\n          continue;\n        default:\n          if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {\n            _ = 0;\n            continue;\n          }\n          if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {\n            _.label = op[1];\n            break;\n          }\n          if (op[0] === 6 && _.label < t[1]) {\n            _.label = t[1];\n            t = op;\n            break;\n          }\n          if (t && _.label < t[2]) {\n            _.label = t[2];\n            _.ops.push(op);\n            break;\n          }\n          if (t[2]) _.ops.pop();\n          _.trys.pop();\n          continue;\n      }\n      op = body.call(thisArg, _);\n    } catch (e) {\n      op = [6, e];\n      y = 0;\n    } finally {\n      f = t = 0;\n    }\n    if (op[0] & 5) throw op[1];\n    return {\n      value: op[0] ? op[1] : void 0,\n      done: true\n    };\n  }\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.updateClockSkewUsingFrontToken = exports.fireSessionUpdateEventsIfNecessary = exports.setFrontToken = exports.getFrontToken = exports.setAntiCSRF = exports.saveLastAccessTokenUpdate = exports.getTokenForHeaderAuth = exports.setToken = exports.getStorageNameForToken = exports.getLocalSessionState = exports.onInvalidClaimResponse = exports.onTokenUpdate = exports.onUnauthorisedResponse = exports.FrontToken = exports.AntiCsrfToken = void 0;\n/* Copyright (c) 2020, VRAI Labs and/or its affiliates. All rights reserved.\n *\n * This software is licensed under the Apache License, Version 2.0 (the\n * \"License\") as published by the Apache Software Foundation.\n *\n * You may not use this file except in compliance with the License. You may\n * obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\n * License for the specific language governing permissions and limitations\n * under the License.\n */\nvar processState_1 = require(\"./processState\");\nvar version_1 = require(\"./version\");\nvar cookieHandler_1 = require(\"./utils/cookieHandler\");\nvar windowHandler_1 = require(\"./utils/windowHandler\");\nvar lockFactory_1 = require(\"./utils/lockFactory\");\nvar logger_1 = require(\"./logger\");\nvar dateProvider_1 = require(\"./utils/dateProvider\");\nvar AntiCsrfToken = /** @class */function () {\n  function AntiCsrfToken() {}\n  AntiCsrfToken.getToken = function (associatedAccessTokenUpdate) {\n    return __awaiter(this, void 0, void 0, function () {\n      var antiCsrf;\n      return __generator(this, function (_a) {\n        switch (_a.label) {\n          case 0:\n            (0, logger_1.logDebugMessage)(\"AntiCsrfToken.getToken: called\");\n            if (associatedAccessTokenUpdate === undefined) {\n              AntiCsrfToken.tokenInfo = undefined;\n              (0, logger_1.logDebugMessage)(\"AntiCsrfToken.getToken: returning undefined\");\n              return [2 /*return*/, undefined];\n            }\n            if (!(AntiCsrfToken.tokenInfo === undefined)) return [3 /*break*/, 2];\n            return [4 /*yield*/, getAntiCSRFToken()];\n          case 1:\n            antiCsrf = _a.sent();\n            if (antiCsrf === null) {\n              (0, logger_1.logDebugMessage)(\"AntiCsrfToken.getToken: returning undefined\");\n              return [2 /*return*/, undefined];\n            }\n            AntiCsrfToken.tokenInfo = {\n              antiCsrf: antiCsrf,\n              associatedAccessTokenUpdate: associatedAccessTokenUpdate\n            };\n            return [3 /*break*/, 4];\n          case 2:\n            if (!(AntiCsrfToken.tokenInfo.associatedAccessTokenUpdate !== associatedAccessTokenUpdate)) return [3 /*break*/, 4];\n            // csrf token has changed.\n            AntiCsrfToken.tokenInfo = undefined;\n            return [4 /*yield*/, AntiCsrfToken.getToken(associatedAccessTokenUpdate)];\n          case 3:\n            return [2 /*return*/, _a.sent()];\n          case 4:\n            (0, logger_1.logDebugMessage)(\"AntiCsrfToken.getToken: returning: \" + AntiCsrfToken.tokenInfo.antiCsrf);\n            return [2 /*return*/, AntiCsrfToken.tokenInfo.antiCsrf];\n        }\n      });\n    });\n  };\n  AntiCsrfToken.removeToken = function () {\n    return __awaiter(this, void 0, void 0, function () {\n      return __generator(this, function (_a) {\n        switch (_a.label) {\n          case 0:\n            (0, logger_1.logDebugMessage)(\"AntiCsrfToken.removeToken: called\");\n            AntiCsrfToken.tokenInfo = undefined;\n            return [4 /*yield*/, setAntiCSRF(undefined)];\n          case 1:\n            _a.sent();\n            return [2 /*return*/];\n        }\n      });\n    });\n  };\n  AntiCsrfToken.setItem = function (associatedAccessTokenUpdate, antiCsrf) {\n    return __awaiter(this, void 0, void 0, function () {\n      return __generator(this, function (_a) {\n        switch (_a.label) {\n          case 0:\n            if (associatedAccessTokenUpdate === undefined) {\n              AntiCsrfToken.tokenInfo = undefined;\n              return [2 /*return*/];\n            }\n            (0, logger_1.logDebugMessage)(\"AntiCsrfToken.setItem: called\");\n            return [4 /*yield*/, setAntiCSRF(antiCsrf)];\n          case 1:\n            _a.sent();\n            AntiCsrfToken.tokenInfo = {\n              antiCsrf: antiCsrf,\n              associatedAccessTokenUpdate: associatedAccessTokenUpdate\n            };\n            return [2 /*return*/];\n        }\n      });\n    });\n  };\n  return AntiCsrfToken;\n}();\nexports.AntiCsrfToken = AntiCsrfToken;\n// Note: We do not store this in memory because another tab may have\n// modified this value, and if so, we may not know about it in this tab\nvar FrontToken = /** @class */function () {\n  function FrontToken() {}\n  FrontToken.getTokenInfo = function () {\n    return __awaiter(this, void 0, void 0, function () {\n      var frontToken, response;\n      return __generator(this, function (_a) {\n        switch (_a.label) {\n          case 0:\n            (0, logger_1.logDebugMessage)(\"FrontToken.getTokenInfo: called\");\n            return [4 /*yield*/, getFrontToken()];\n          case 1:\n            frontToken = _a.sent();\n            if (!(frontToken === null)) return [3 /*break*/, 5];\n            return [4 /*yield*/, getLocalSessionState(false)];\n          case 2:\n            if (!(_a.sent().status === \"EXISTS\")) return [3 /*break*/, 4];\n            // this means that the id refresh token has been set, so we must\n            // wait for this to be set or removed\n            return [4 /*yield*/, new Promise(function (resolve) {\n              FrontToken.waiters.push(resolve);\n            })];\n          case 3:\n            // this means that the id refresh token has been set, so we must\n            // wait for this to be set or removed\n            _a.sent();\n            return [2 /*return*/, FrontToken.getTokenInfo()];\n          case 4:\n            return [2 /*return*/, undefined];\n          case 5:\n            response = parseFrontToken(frontToken);\n            (0, logger_1.logDebugMessage)(\"FrontToken.getTokenInfo: returning ate: \" + response.ate);\n            (0, logger_1.logDebugMessage)(\"FrontToken.getTokenInfo: returning uid: \" + response.uid);\n            (0, logger_1.logDebugMessage)(\"FrontToken.getTokenInfo: returning up: \" + response.up);\n            return [2 /*return*/, response];\n        }\n      });\n    });\n  };\n  FrontToken.removeToken = function () {\n    return __awaiter(this, void 0, void 0, function () {\n      return __generator(this, function (_a) {\n        switch (_a.label) {\n          case 0:\n            (0, logger_1.logDebugMessage)(\"FrontToken.removeToken: called\");\n            return [4 /*yield*/, setFrontToken(undefined)];\n          case 1:\n            _a.sent();\n            // We are clearing all stored tokens here, because:\n            // 1. removing FrontToken signals that the session is being cleared\n            // 2. you can only have a single active session - this means that all tokens can be cleared from all auth-modes if one is being cleared\n            // 3. some proxies remove the empty headers used to clear the other tokens (i.e.: https://github.com/supertokens/supertokens-website/issues/218)\n            return [4 /*yield*/, setToken(\"access\", \"\")];\n          case 2:\n            // We are clearing all stored tokens here, because:\n            // 1. removing FrontToken signals that the session is being cleared\n            // 2. you can only have a single active session - this means that all tokens can be cleared from all auth-modes if one is being cleared\n            // 3. some proxies remove the empty headers used to clear the other tokens (i.e.: https://github.com/supertokens/supertokens-website/issues/218)\n            _a.sent();\n            return [4 /*yield*/, setToken(\"refresh\", \"\")];\n          case 3:\n            _a.sent();\n            return [4 /*yield*/, AntiCsrfToken.removeToken()];\n          case 4:\n            _a.sent();\n            FrontToken.waiters.forEach(function (f) {\n              return f(undefined);\n            });\n            FrontToken.waiters = [];\n            return [2 /*return*/];\n        }\n      });\n    });\n  };\n  FrontToken.setItem = function (frontToken) {\n    return __awaiter(this, void 0, void 0, function () {\n      return __generator(this, function (_a) {\n        switch (_a.label) {\n          case 0:\n            // We update the refresh attempt info here as well, since this means that we've updated the session in some way\n            // This could be both by a refresh call or if the access token was updated in a custom endpoint\n            // By saving every time the access token has been updated, we cause an early retry if\n            // another request has failed with a 401 with the previous access token and the token still exists.\n            // Check the start and end of onUnauthorisedResponse\n            // As a side-effect we reload the anti-csrf token to check if it was changed by another tab.\n            return [4 /*yield*/, saveLastAccessTokenUpdate()];\n          case 1:\n            // We update the refresh attempt info here as well, since this means that we've updated the session in some way\n            // This could be both by a refresh call or if the access token was updated in a custom endpoint\n            // By saving every time the access token has been updated, we cause an early retry if\n            // another request has failed with a 401 with the previous access token and the token still exists.\n            // Check the start and end of onUnauthorisedResponse\n            // As a side-effect we reload the anti-csrf token to check if it was changed by another tab.\n            _a.sent();\n            if (frontToken === \"remove\") {\n              return [2 /*return*/, FrontToken.removeToken()];\n            }\n            (0, logger_1.logDebugMessage)(\"FrontToken.setItem: called\");\n            return [4 /*yield*/, setFrontToken(frontToken)];\n          case 2:\n            _a.sent();\n            FrontToken.waiters.forEach(function (f) {\n              return f(undefined);\n            });\n            FrontToken.waiters = [];\n            return [2 /*return*/];\n        }\n      });\n    });\n  };\n  FrontToken.doesTokenExists = function () {\n    return __awaiter(this, void 0, void 0, function () {\n      var frontToken;\n      return __generator(this, function (_a) {\n        switch (_a.label) {\n          case 0:\n            return [4 /*yield*/, getFrontTokenFromCookie()];\n          case 1:\n            frontToken = _a.sent();\n            return [2 /*return*/, frontToken !== null];\n        }\n      });\n    });\n  };\n  // these are waiters for when the idRefreshToken has been set, but this token has\n  // not yet been set. Once this token is set or removed, the waiters are resolved.\n  FrontToken.waiters = [];\n  return FrontToken;\n}();\nexports.FrontToken = FrontToken;\n/**\n * @class AuthHttpRequest\n * @description wrapper for common http methods.\n */\nvar AuthHttpRequest = /** @class */function () {\n  function AuthHttpRequest() {}\n  AuthHttpRequest.init = function (config, recipeImpl) {\n    (0, logger_1.logDebugMessage)(\"init: called\");\n    (0, logger_1.logDebugMessage)(\"init: Input apiBasePath: \" + config.apiBasePath);\n    (0, logger_1.logDebugMessage)(\"init: Input apiDomain: \" + config.apiDomain);\n    (0, logger_1.logDebugMessage)(\"init: Input autoAddCredentials: \" + config.autoAddCredentials);\n    (0, logger_1.logDebugMessage)(\"init: Input sessionTokenBackendDomain: \" + config.sessionTokenBackendDomain);\n    (0, logger_1.logDebugMessage)(\"init: Input isInIframe: \" + config.isInIframe);\n    (0, logger_1.logDebugMessage)(\"init: Input sessionExpiredStatusCode: \" + config.sessionExpiredStatusCode);\n    (0, logger_1.logDebugMessage)(\"init: Input sessionTokenFrontendDomain: \" + config.sessionTokenFrontendDomain);\n    (0, logger_1.logDebugMessage)(\"init: Input tokenTransferMethod: \" + config.tokenTransferMethod);\n    var fetchedWindow = windowHandler_1.default.getReferenceOrThrow().windowHandler.getWindowUnsafe();\n    AuthHttpRequest.env = fetchedWindow === undefined || fetchedWindow.fetch === undefined ? global : fetchedWindow;\n    AuthHttpRequest.refreshTokenUrl = config.apiDomain + config.apiBasePath + \"/session/refresh\";\n    AuthHttpRequest.signOutUrl = config.apiDomain + config.apiBasePath + \"/signout\";\n    AuthHttpRequest.rid = \"session\";\n    AuthHttpRequest.config = config;\n    if (AuthHttpRequest.env.__supertokensOriginalFetch === undefined) {\n      (0, logger_1.logDebugMessage)(\"init: __supertokensOriginalFetch is undefined\");\n      // this block contains code that is run just once per page load..\n      // all items in this block are attached to the global env so that\n      // even if the init function is called more than once (maybe across JS scripts),\n      // things will not get created multiple times.\n      AuthHttpRequest.env.__supertokensOriginalFetch = AuthHttpRequest.env.fetch.bind(AuthHttpRequest.env);\n      AuthHttpRequest.env.__supertokensSessionRecipe = recipeImpl;\n      AuthHttpRequest.env.fetch = AuthHttpRequest.env.__supertokensSessionRecipe.addFetchInterceptorsAndReturnModifiedFetch({\n        originalFetch: AuthHttpRequest.env.__supertokensOriginalFetch,\n        userContext: {}\n      });\n      AuthHttpRequest.env.__supertokensSessionRecipe.addXMLHttpRequestInterceptor({\n        userContext: {}\n      });\n    }\n    AuthHttpRequest.recipeImpl = AuthHttpRequest.env.__supertokensSessionRecipe;\n    AuthHttpRequest.initCalled = true;\n  };\n  var _a;\n  _a = AuthHttpRequest;\n  AuthHttpRequest.initCalled = false;\n  AuthHttpRequest.doRequest = function (httpCall, config, url) {\n    return __awaiter(void 0, void 0, void 0, function () {\n      var doNotDoInterception, finalURL, origHeaders, accessToken, refreshToken, sessionRefreshAttempts, returnObj, preRequestLSS, clonedHeaders, configWithAntiCsrf, antiCsrfToken, transferMethod, response, errorMessage, retry;\n      return __generator(_a, function (_b) {\n        switch (_b.label) {\n          case 0:\n            if (!AuthHttpRequest.initCalled) {\n              throw Error(\"init function not called\");\n            }\n            (0, logger_1.logDebugMessage)(\"doRequest: start of fetch interception\");\n            doNotDoInterception = false;\n            try {\n              finalURL = void 0;\n              if (typeof url === \"string\") {\n                finalURL = url;\n              } else if (typeof url === \"object\") {\n                if (typeof url.url === \"string\") {\n                  finalURL = url.url;\n                } else if (typeof url.href === \"string\") {\n                  finalURL = url.href;\n                }\n              }\n              doNotDoInterception = !AuthHttpRequest.recipeImpl.shouldDoInterceptionBasedOnUrl(finalURL, AuthHttpRequest.config.apiDomain, AuthHttpRequest.config.sessionTokenBackendDomain);\n            } catch (err) {\n              if (err.message === \"Please provide a valid domain name\") {\n                (0, logger_1.logDebugMessage)(\"doRequest: Trying shouldDoInterceptionBasedOnUrl with location.origin\");\n                // .origin gives the port as well..\n                doNotDoInterception = !AuthHttpRequest.recipeImpl.shouldDoInterceptionBasedOnUrl(windowHandler_1.default.getReferenceOrThrow().windowHandler.location.getOrigin(), AuthHttpRequest.config.apiDomain, AuthHttpRequest.config.sessionTokenBackendDomain);\n              } else {\n                throw err;\n              }\n            }\n            (0, logger_1.logDebugMessage)(\"doRequest: Value of doNotDoInterception: \" + doNotDoInterception);\n            if (!doNotDoInterception) return [3 /*break*/, 2];\n            (0, logger_1.logDebugMessage)(\"doRequest: Returning without interception\");\n            return [4 /*yield*/, httpCall(config)];\n          case 1:\n            return [2 /*return*/, _b.sent()];\n          case 2:\n            origHeaders = new Headers(config !== undefined && config.headers !== undefined ? config.headers : url.headers);\n            if (!origHeaders.has(\"Authorization\")) return [3 /*break*/, 5];\n            return [4 /*yield*/, getTokenForHeaderAuth(\"access\")];\n          case 3:\n            accessToken = _b.sent();\n            return [4 /*yield*/, getTokenForHeaderAuth(\"refresh\")];\n          case 4:\n            refreshToken = _b.sent();\n            if (accessToken !== undefined && refreshToken !== undefined && origHeaders.get(\"Authorization\") === \"Bearer \".concat(accessToken)) {\n              // We are ignoring the Authorization header set by the user in this case, because it would cause issues\n              // If we do not ignore this, then this header would be used even if the request is being retried after a refresh, even though it contains an outdated access token.\n              // This causes an infinite refresh loop.\n              (0, logger_1.logDebugMessage)(\"doRequest: Removing Authorization from user provided headers because it contains our access token\");\n              origHeaders.delete(\"Authorization\");\n            }\n            _b.label = 5;\n          case 5:\n            (0, logger_1.logDebugMessage)(\"doRequest: Interception started\");\n            processState_1.ProcessState.getInstance().addState(processState_1.PROCESS_STATE.CALLING_INTERCEPTION_REQUEST);\n            sessionRefreshAttempts = 0;\n            returnObj = undefined;\n            _b.label = 6;\n          case 6:\n            if (!true) return [3 /*break*/, 18];\n            return [4 /*yield*/, getLocalSessionState(true)];\n          case 7:\n            preRequestLSS = _b.sent();\n            clonedHeaders = new Headers(origHeaders);\n            configWithAntiCsrf = __assign(__assign({}, config), {\n              headers: clonedHeaders\n            });\n            if (!(preRequestLSS.status === \"EXISTS\")) return [3 /*break*/, 9];\n            return [4 /*yield*/, AntiCsrfToken.getToken(preRequestLSS.lastAccessTokenUpdate)];\n          case 8:\n            antiCsrfToken = _b.sent();\n            if (antiCsrfToken !== undefined) {\n              (0, logger_1.logDebugMessage)(\"doRequest: Adding anti-csrf token to request\");\n              clonedHeaders.set(\"anti-csrf\", antiCsrfToken);\n            }\n            _b.label = 9;\n          case 9:\n            if (AuthHttpRequest.config.autoAddCredentials) {\n              (0, logger_1.logDebugMessage)(\"doRequest: Adding credentials include\");\n              if (configWithAntiCsrf === undefined) {\n                configWithAntiCsrf = {\n                  credentials: \"include\"\n                };\n              } else if (configWithAntiCsrf.credentials === undefined) {\n                configWithAntiCsrf = __assign(__assign({}, configWithAntiCsrf), {\n                  credentials: \"include\"\n                });\n              }\n            }\n            // adding rid for anti-csrf protection: Anti-csrf via custom header\n            if (!clonedHeaders.has(\"rid\")) {\n              (0, logger_1.logDebugMessage)(\"doRequest: Adding rid header: anti-csrf\");\n              clonedHeaders.set(\"rid\", \"anti-csrf\");\n            } else {\n              (0, logger_1.logDebugMessage)(\"doRequest: rid header was already there in request\");\n            }\n            transferMethod = AuthHttpRequest.config.tokenTransferMethod;\n            (0, logger_1.logDebugMessage)(\"doRequest: Adding st-auth-mode header: \" + transferMethod);\n            clonedHeaders.set(\"st-auth-mode\", transferMethod);\n            return [4 /*yield*/, setAuthorizationHeaderIfRequired(clonedHeaders)];\n          case 10:\n            _b.sent();\n            (0, logger_1.logDebugMessage)(\"doRequest: Making user's http call\");\n            return [4 /*yield*/, httpCall(configWithAntiCsrf)];\n          case 11:\n            response = _b.sent();\n            (0, logger_1.logDebugMessage)(\"doRequest: User's http call ended\");\n            return [4 /*yield*/, saveTokensFromHeaders(response)];\n          case 12:\n            _b.sent();\n            fireSessionUpdateEventsIfNecessary(preRequestLSS.status === \"EXISTS\", response.status, response.headers.get(\"front-token\"));\n            if (!(response.status === AuthHttpRequest.config.sessionExpiredStatusCode)) return [3 /*break*/, 14];\n            (0, logger_1.logDebugMessage)(\"doRequest: Status code is: \" + response.status);\n            /**\n             * An API may return a 401 error response even with a valid session, causing a session refresh loop in the interceptor.\n             * To prevent this infinite loop, we break out of the loop after retrying the original request a specified number of times.\n             * The maximum number of retry attempts is defined by maxRetryAttemptsForSessionRefresh config variable.\n             */\n            if (sessionRefreshAttempts >= AuthHttpRequest.config.maxRetryAttemptsForSessionRefresh) {\n              (0, logger_1.logDebugMessage)(\"doRequest: Maximum session refresh attempts reached. sessionRefreshAttempts: \".concat(sessionRefreshAttempts, \", maxRetryAttemptsForSessionRefresh: \").concat(AuthHttpRequest.config.maxRetryAttemptsForSessionRefresh));\n              errorMessage = \"Received a 401 response from \".concat(url, \". Attempted to refresh the session and retry the request with the updated session tokens \").concat(AuthHttpRequest.config.maxRetryAttemptsForSessionRefresh, \" times, but each attempt resulted in a 401 error. The maximum session refresh limit has been reached. Please investigate your API. To increase the session refresh attempts, update maxRetryAttemptsForSessionRefresh in the config.\");\n              console.error(errorMessage);\n              throw new Error(errorMessage);\n            }\n            return [4 /*yield*/, onUnauthorisedResponse(preRequestLSS)];\n          case 13:\n            retry = _b.sent();\n            sessionRefreshAttempts++;\n            (0, logger_1.logDebugMessage)(\"doRequest: sessionRefreshAttempts: \" + sessionRefreshAttempts);\n            if (retry.result !== \"RETRY\") {\n              (0, logger_1.logDebugMessage)(\"doRequest: Not retrying original request\");\n              if (retry.error !== undefined) {\n                if (retry.error instanceof Response) {\n                  returnObj = retry.error;\n                } else {\n                  throw retry.error;\n                }\n              } else {\n                returnObj = response;\n              }\n              return [3 /*break*/, 18];\n            }\n            (0, logger_1.logDebugMessage)(\"doRequest: Retrying original request\");\n            return [3 /*break*/, 17];\n          case 14:\n            if (!(response.status === AuthHttpRequest.config.invalidClaimStatusCode)) return [3 /*break*/, 16];\n            return [4 /*yield*/, onInvalidClaimResponse(response)];\n          case 15:\n            _b.sent();\n            _b.label = 16;\n          case 16:\n            return [2 /*return*/, response];\n          case 17:\n            return [3 /*break*/, 6];\n          case 18:\n            // if it comes here, means we breaked. which happens only if we have logged out.\n            return [2 /*return*/, returnObj];\n        }\n      });\n    });\n  };\n  AuthHttpRequest.attemptRefreshingSession = function () {\n    return __awaiter(void 0, void 0, void 0, function () {\n      var preRequestLSS, refresh;\n      return __generator(_a, function (_b) {\n        switch (_b.label) {\n          case 0:\n            if (!AuthHttpRequest.initCalled) {\n              throw Error(\"init function not called\");\n            }\n            return [4 /*yield*/, getLocalSessionState(false)];\n          case 1:\n            preRequestLSS = _b.sent();\n            return [4 /*yield*/, onUnauthorisedResponse(preRequestLSS)];\n          case 2:\n            refresh = _b.sent();\n            if (refresh.result === \"API_ERROR\") {\n              throw refresh.error;\n            }\n            return [2 /*return*/, refresh.result === \"RETRY\"];\n        }\n      });\n    });\n  };\n  return AuthHttpRequest;\n}();\nexports.default = AuthHttpRequest;\nvar LAST_ACCESS_TOKEN_UPDATE = \"st-last-access-token-update\";\nvar REFRESH_TOKEN_NAME = \"st-refresh-token\";\nvar ACCESS_TOKEN_NAME = \"st-access-token\";\nvar ANTI_CSRF_NAME = \"sAntiCsrf\";\nvar FRONT_TOKEN_NAME = \"sFrontToken\";\n/**\n * @description attempts to call the refresh token API each time we are sure the session has expired, or it throws an error or,\n * or the ID_COOKIE_NAME has changed value -> which may mean that we have a new set of tokens.\n */\nfunction onUnauthorisedResponse(preRequestLSS) {\n  return __awaiter(this, void 0, void 0, function () {\n    var lock, postLockLSS, postLockSessionExists, preRequestSessionExists, sessionStatusChanged, accessTokenTimestampChanged, headers, antiCsrfToken, transferMethod, preAPIResult, response, isUnauthorised, errorMessage, error_1, postRequestLSS;\n    return __generator(this, function (_b) {\n      switch (_b.label) {\n        case 0:\n          return [4 /*yield*/, lockFactory_1.default.getReferenceOrThrow().lockFactory()];\n        case 1:\n          lock = _b.sent();\n          _b.label = 2;\n        case 2:\n          if (!true) return [3 /*break*/, 23];\n          (0, logger_1.logDebugMessage)(\"onUnauthorisedResponse: trying to acquire lock\");\n          return [4 /*yield*/, lock.acquireLock(\"REFRESH_TOKEN_USE\", 1000)];\n        case 3:\n          if (!_b.sent()) return [3 /*break*/, 21];\n          (0, logger_1.logDebugMessage)(\"onUnauthorisedResponse: lock acquired\");\n          _b.label = 4;\n        case 4:\n          _b.trys.push([4, 17, 19, 21]);\n          return [4 /*yield*/, getLocalSessionState(false)];\n        case 5:\n          postLockLSS = _b.sent();\n          if (postLockLSS.status === \"NOT_EXISTS\") {\n            (0, logger_1.logDebugMessage)(\"onUnauthorisedResponse: Not refreshing because local session state is NOT_EXISTS\");\n            // if it comes here, it means a request was made thinking\n            // that the session exists, but it doesn't actually exist.\n            AuthHttpRequest.config.onHandleEvent({\n              action: \"UNAUTHORISED\",\n              sessionExpiredOrRevoked: false,\n              userContext: {}\n            });\n            return [2 /*return*/, {\n              result: \"SESSION_EXPIRED\"\n            }];\n          }\n          postLockSessionExists = postLockLSS.status === \"EXISTS\";\n          preRequestSessionExists = preRequestLSS.status === \"EXISTS\";\n          sessionStatusChanged = postLockLSS.status !== preRequestLSS.status;\n          accessTokenTimestampChanged = \"lastAccessTokenUpdate\" in postLockLSS && \"lastAccessTokenUpdate\" in preRequestLSS && postLockLSS.lastAccessTokenUpdate !== preRequestLSS.lastAccessTokenUpdate;\n          // If the session status has changed, we should return early and retry the request\n          // only if postLockLSS.status is \"EXISTS\".\n          if (sessionStatusChanged && postLockSessionExists) {\n            (0, logger_1.logDebugMessage)(\"onUnauthorisedResponse: Retrying early because session status has changed and postLockLSS.status is EXISTS\");\n            return [2 /*return*/, {\n              result: \"RETRY\"\n            }];\n          }\n          // If the session exists in both postLockLSS and preRequestLSS, we should return early\n          // and retry the request only if the access token timestamp has changed.\n          // This indicates that another process has already called this API and succeeded,\n          // so we don't need to call it again.\n          if (postLockSessionExists && preRequestSessionExists && accessTokenTimestampChanged) {\n            (0, logger_1.logDebugMessage)(\"onUnauthorisedResponse: Retrying early because pre and post lastAccessTokenUpdate don't match\");\n            return [2 /*return*/, {\n              result: \"RETRY\"\n            }];\n          }\n          headers = new Headers();\n          if (!(preRequestLSS.status === \"EXISTS\")) return [3 /*break*/, 7];\n          return [4 /*yield*/, AntiCsrfToken.getToken(preRequestLSS.lastAccessTokenUpdate)];\n        case 6:\n          antiCsrfToken = _b.sent();\n          if (antiCsrfToken !== undefined) {\n            (0, logger_1.logDebugMessage)(\"onUnauthorisedResponse: Adding anti-csrf token to refresh API call\");\n            headers.set(\"anti-csrf\", antiCsrfToken);\n          }\n          _b.label = 7;\n        case 7:\n          (0, logger_1.logDebugMessage)(\"onUnauthorisedResponse: Adding rid and fdi-versions to refresh call header\");\n          headers.set(\"rid\", AuthHttpRequest.rid);\n          headers.set(\"fdi-version\", version_1.supported_fdi.join(\",\"));\n          transferMethod = AuthHttpRequest.config.tokenTransferMethod;\n          (0, logger_1.logDebugMessage)(\"onUnauthorisedResponse: Adding st-auth-mode header: \" + transferMethod);\n          headers.set(\"st-auth-mode\", transferMethod);\n          return [4 /*yield*/, setAuthorizationHeaderIfRequired(headers, true)];\n        case 8:\n          _b.sent();\n          (0, logger_1.logDebugMessage)(\"onUnauthorisedResponse: Calling refresh pre API hook\");\n          return [4 /*yield*/, AuthHttpRequest.config.preAPIHook({\n            action: \"REFRESH_SESSION\",\n            requestInit: {\n              method: \"post\",\n              credentials: \"include\",\n              headers: headers\n            },\n            url: AuthHttpRequest.refreshTokenUrl,\n            userContext: {}\n          })];\n        case 9:\n          preAPIResult = _b.sent();\n          (0, logger_1.logDebugMessage)(\"onUnauthorisedResponse: Making refresh call\");\n          return [4 /*yield*/, AuthHttpRequest.env.__supertokensOriginalFetch(preAPIResult.url, preAPIResult.requestInit)];\n        case 10:\n          response = _b.sent();\n          (0, logger_1.logDebugMessage)(\"onUnauthorisedResponse: Refresh call ended\");\n          return [4 /*yield*/, saveTokensFromHeaders(response)];\n        case 11:\n          _b.sent();\n          (0, logger_1.logDebugMessage)(\"onUnauthorisedResponse: Refresh status code is: \" + response.status);\n          isUnauthorised = response.status === AuthHttpRequest.config.sessionExpiredStatusCode;\n          if (!(response.headers.get(\"front-token\") === null)) return [3 /*break*/, 14];\n          if (!isUnauthorised) return [3 /*break*/, 13];\n          // There is a case where the FE thinks the session is valid, but backend doesn't get the tokens.\n          // In this event, session expired error will be thrown and the frontend should remove this token\n          return [4 /*yield*/, FrontToken.setItem(\"remove\")];\n        case 12:\n          // There is a case where the FE thinks the session is valid, but backend doesn't get the tokens.\n          // In this event, session expired error will be thrown and the frontend should remove this token\n          _b.sent();\n          return [3 /*break*/, 14];\n        case 13:\n          if (response.status === 200) {\n            errorMessage = \"The 'front-token' header is missing from a successful refresh-session response. The most likely causes are proxy settings (e.g.: 'front-token' missing from 'access-control-expose-headers' or a proxy stripping this header). Please investigate your API.\";\n            console.error(errorMessage);\n            throw new Error(errorMessage);\n          }\n          _b.label = 14;\n        case 14:\n          fireSessionUpdateEventsIfNecessary(preRequestLSS.status === \"EXISTS\", response.status, isUnauthorised && response.headers.get(\"front-token\") === null ? \"remove\" : response.headers.get(\"front-token\"));\n          if (response.status >= 300) {\n            throw response;\n          }\n          return [4 /*yield*/, AuthHttpRequest.config.postAPIHook({\n            action: \"REFRESH_SESSION\",\n            fetchResponse: response.clone(),\n            requestInit: preAPIResult.requestInit,\n            url: preAPIResult.url,\n            userContext: {}\n          })];\n        case 15:\n          _b.sent();\n          return [4 /*yield*/, getLocalSessionState(false)];\n        case 16:\n          if (_b.sent().status === \"NOT_EXISTS\") {\n            (0, logger_1.logDebugMessage)(\"onUnauthorisedResponse: local session doesn't exist, so returning session expired\");\n            // The execution should never come here.. but just in case.\n            // removed by server during refresh. So we logout\n            // we do not send \"UNAUTHORISED\" event here because\n            // this is a result of the refresh API returning a session expiry, which\n            // means that the frontend did not know for sure that the session existed\n            // in the first place.\n            return [2 /*return*/, {\n              result: \"SESSION_EXPIRED\"\n            }];\n          }\n          AuthHttpRequest.config.onHandleEvent({\n            action: \"REFRESH_SESSION\",\n            userContext: {}\n          });\n          (0, logger_1.logDebugMessage)(\"onUnauthorisedResponse: Sending RETRY signal\");\n          return [2 /*return*/, {\n            result: \"RETRY\"\n          }];\n        case 17:\n          error_1 = _b.sent();\n          return [4 /*yield*/, getLocalSessionState(false)];\n        case 18:\n          if (_b.sent().status === \"NOT_EXISTS\") {\n            (0, logger_1.logDebugMessage)(\"onUnauthorisedResponse: local session doesn't exist, so returning session expired\");\n            // removed by server.\n            // we do not send \"UNAUTHORISED\" event here because\n            // this is a result of the refresh API returning a session expiry, which\n            // means that the frontend did not know for sure that the session existed\n            // in the first place.\n            return [2 /*return*/, {\n              result: \"SESSION_EXPIRED\",\n              error: error_1\n            }];\n          }\n          (0, logger_1.logDebugMessage)(\"onUnauthorisedResponse: sending API_ERROR\");\n          return [2 /*return*/, {\n            result: \"API_ERROR\",\n            error: error_1\n          }];\n        case 19:\n          return [4 /*yield*/, lock.releaseLock(\"REFRESH_TOKEN_USE\")];\n        case 20:\n          _b.sent();\n          (0, logger_1.logDebugMessage)(\"onUnauthorisedResponse: Released lock\");\n          return [7 /*endfinally*/];\n        case 21:\n          return [4 /*yield*/, getLocalSessionState(false)];\n        case 22:\n          postRequestLSS = _b.sent();\n          if (postRequestLSS.status === \"NOT_EXISTS\") {\n            (0, logger_1.logDebugMessage)(\"onUnauthorisedResponse: lock acquired failed and local session doesn't exist, so sending SESSION_EXPIRED\");\n            // removed by server. So we logout\n            return [2 /*return*/, {\n              result: \"SESSION_EXPIRED\"\n            }];\n          } else {\n            if (postRequestLSS.status !== preRequestLSS.status || postRequestLSS.status === \"EXISTS\" && preRequestLSS.status === \"EXISTS\" && postRequestLSS.lastAccessTokenUpdate !== preRequestLSS.lastAccessTokenUpdate) {\n              (0, logger_1.logDebugMessage)(\"onUnauthorisedResponse: lock acquired failed and retrying early because pre and post lastAccessTokenUpdate don't match\");\n              return [2 /*return*/, {\n                result: \"RETRY\"\n              }];\n            }\n            // here we try to call the API again since we probably failed to acquire lock and nothing has changed.\n          }\n          return [3 /*break*/, 2];\n        case 23:\n          return [2 /*return*/];\n      }\n    });\n  });\n}\nexports.onUnauthorisedResponse = onUnauthorisedResponse;\nfunction onTokenUpdate() {\n  (0, logger_1.logDebugMessage)(\"onTokenUpdate: firing ACCESS_TOKEN_PAYLOAD_UPDATED event\");\n  AuthHttpRequest.config.onHandleEvent({\n    action: \"ACCESS_TOKEN_PAYLOAD_UPDATED\",\n    userContext: {}\n  });\n}\nexports.onTokenUpdate = onTokenUpdate;\nfunction onInvalidClaimResponse(response) {\n  return __awaiter(this, void 0, void 0, function () {\n    var claimValidationErrors, _b;\n    return __generator(this, function (_c) {\n      switch (_c.label) {\n        case 0:\n          _c.trys.push([0, 2,, 3]);\n          return [4 /*yield*/, AuthHttpRequest.recipeImpl.getInvalidClaimsFromResponse({\n            response: response,\n            userContext: {}\n          })];\n        case 1:\n          claimValidationErrors = _c.sent();\n          // This shouldn't be undefined normally, but since we can't be certain about the shape of the response object so we check it like this.\n          // It could still be something else, but chance of that happening by accident is really low.\n          if (claimValidationErrors) {\n            AuthHttpRequest.config.onHandleEvent({\n              action: \"API_INVALID_CLAIM\",\n              claimValidationErrors: claimValidationErrors,\n              userContext: {}\n            });\n          }\n          return [3 /*break*/, 3];\n        case 2:\n          _b = _c.sent();\n          return [3 /*break*/, 3];\n        case 3:\n          return [2 /*return*/];\n      }\n    });\n  });\n}\nexports.onInvalidClaimResponse = onInvalidClaimResponse;\n// if tryRefresh is true & this token doesn't exist, we try and refresh the session\n// else we return undefined.\nfunction getLocalSessionState(tryRefresh) {\n  return __awaiter(this, void 0, void 0, function () {\n    var lastAccessTokenUpdate, frontTokenExists, response, res, lastAccessTokenUpdate_1, frontTokenExists_1, errorMessage;\n    return __generator(this, function (_b) {\n      switch (_b.label) {\n        case 0:\n          (0, logger_1.logDebugMessage)(\"getLocalSessionState: called\");\n          return [4 /*yield*/, getFromCookies(LAST_ACCESS_TOKEN_UPDATE)];\n        case 1:\n          lastAccessTokenUpdate = _b.sent();\n          return [4 /*yield*/, FrontToken.doesTokenExists()];\n        case 2:\n          frontTokenExists = _b.sent();\n          if (!(frontTokenExists && lastAccessTokenUpdate !== undefined)) return [3 /*break*/, 3];\n          (0, logger_1.logDebugMessage)(\"getLocalSessionState: returning EXISTS since both frontToken and lastAccessTokenUpdate exists\");\n          return [2 /*return*/, {\n            status: \"EXISTS\",\n            lastAccessTokenUpdate: lastAccessTokenUpdate\n          }];\n        case 3:\n          if (!lastAccessTokenUpdate) return [3 /*break*/, 4];\n          (0, logger_1.logDebugMessage)(\"getLocalSessionState: returning NOT_EXISTS since frontToken was cleared but lastAccessTokenUpdate exists\");\n          return [2 /*return*/, {\n            status: \"NOT_EXISTS\"\n          }];\n        case 4:\n          response = {\n            status: \"MAY_EXIST\"\n          };\n          if (!tryRefresh) return [3 /*break*/, 8];\n          (0, logger_1.logDebugMessage)(\"getLocalSessionState: trying to refresh\");\n          return [4 /*yield*/, onUnauthorisedResponse(response)];\n        case 5:\n          res = _b.sent();\n          if (res.result !== \"RETRY\") {\n            (0, logger_1.logDebugMessage)(\"getLocalSessionState: return NOT_EXISTS in case error from backend\" + res.result);\n            // in case the backend is not working, we treat it as the session not existing...\n            return [2 /*return*/, {\n              status: \"NOT_EXISTS\"\n            }];\n          }\n          return [4 /*yield*/, getFromCookies(LAST_ACCESS_TOKEN_UPDATE)];\n        case 6:\n          lastAccessTokenUpdate_1 = _b.sent();\n          return [4 /*yield*/, FrontToken.doesTokenExists()];\n        case 7:\n          frontTokenExists_1 = _b.sent();\n          // If we fail to retrieve the local session state after a successful refresh,\n          // it indicates an issue with writing to cookies. Without the FrontToken,\n          // session refresh may work but other SDK functionalities won't work as expected.\n          // Therefore, we throw an error here instead of retrying.\n          if (!frontTokenExists_1 || lastAccessTokenUpdate_1 === undefined) {\n            errorMessage = \"Failed to retrieve local session state from cookies after a successful session refresh. This indicates a configuration error or that the browser is preventing cookie writes.\";\n            console.error(errorMessage);\n            throw new Error(errorMessage);\n          }\n          (0, logger_1.logDebugMessage)(\"getLocalSessionState: returning EXISTS since both frontToken and lastAccessTokenUpdate exists post refresh\");\n          return [2 /*return*/, {\n            status: \"EXISTS\",\n            lastAccessTokenUpdate: lastAccessTokenUpdate_1\n          }];\n        case 8:\n          (0, logger_1.logDebugMessage)(\"getLocalSessionState: returning: \" + response.status);\n          return [2 /*return*/, response];\n      }\n    });\n  });\n}\nexports.getLocalSessionState = getLocalSessionState;\nfunction getStorageNameForToken(tokenType) {\n  switch (tokenType) {\n    case \"access\":\n      return ACCESS_TOKEN_NAME;\n    case \"refresh\":\n      return REFRESH_TOKEN_NAME;\n  }\n}\nexports.getStorageNameForToken = getStorageNameForToken;\nfunction setToken(tokenType, value) {\n  var name = getStorageNameForToken(tokenType);\n  if (value !== \"\") {\n    (0, logger_1.logDebugMessage)(\"setToken: saved \".concat(tokenType, \" token into cookies\"));\n    // We save the tokens with a 100-year expiration time\n    // We have to use the client side system clock here, because the cookie expiration will be counted based on that\n    return storeInCookies(name, value, Date.now() + 3153600000);\n  } else {\n    (0, logger_1.logDebugMessage)(\"setToken: cleared \".concat(tokenType, \" token from cookies\"));\n    return storeInCookies(name, value, 0);\n  }\n}\nexports.setToken = setToken;\nfunction storeInCookies(name, value, expiry) {\n  var expires = \"Fri, 31 Dec 9999 23:59:59 GMT\";\n  if (expiry !== Number.MAX_SAFE_INTEGER) {\n    // We should respect the storage expirations set by the backend, even though tokens will also be checked elsewhere.\n    // We check them locally in case of front-token, and on the backend enforces the validity period for access and refresh tokens.\n    expires = new Date(expiry).toUTCString();\n  }\n  var domain = AuthHttpRequest.config.sessionTokenFrontendDomain;\n  if (domain === \"localhost\" || domain === windowHandler_1.default.getReferenceOrThrow().windowHandler.location.getHostName()) {\n    // since some browsers ignore cookies with domain set to localhost\n    // see https://github.com/supertokens/supertokens-website/issues/25\n    return cookieHandler_1.default.getReferenceOrThrow().cookieHandler.setCookie(\"\".concat(name, \"=\").concat(value, \";expires=\").concat(expires, \";path=/;samesite=\").concat(AuthHttpRequest.config.isInIframe ? \"none;secure\" : \"lax\"));\n  } else {\n    return cookieHandler_1.default.getReferenceOrThrow().cookieHandler.setCookie(\"\".concat(name, \"=\").concat(value, \";expires=\").concat(expires, \";domain=\").concat(domain, \";path=/;samesite=\").concat(AuthHttpRequest.config.isInIframe ? \"none;secure\" : \"lax\"));\n  }\n}\nfunction getTokenForHeaderAuth(tokenType) {\n  return __awaiter(this, void 0, void 0, function () {\n    var name;\n    return __generator(this, function (_b) {\n      name = getStorageNameForToken(tokenType);\n      return [2 /*return*/, getFromCookies(name)];\n    });\n  });\n}\nexports.getTokenForHeaderAuth = getTokenForHeaderAuth;\nfunction getFromCookies(name) {\n  return __awaiter(this, void 0, void 0, function () {\n    var value, _b, parts, last;\n    return __generator(this, function (_c) {\n      switch (_c.label) {\n        case 0:\n          _b = \"; \";\n          return [4 /*yield*/, cookieHandler_1.default.getReferenceOrThrow().cookieHandler.getCookie()];\n        case 1:\n          value = _b + _c.sent();\n          parts = value.split(\"; \" + name + \"=\");\n          if (parts.length >= 2) {\n            last = parts.pop();\n            if (last !== undefined) {\n              return [2 /*return*/, last.split(\";\").shift()];\n            }\n          }\n          return [2 /*return*/, undefined];\n      }\n    });\n  });\n}\nfunction setAuthorizationHeaderIfRequired(clonedHeaders, addRefreshToken) {\n  if (addRefreshToken === void 0) {\n    addRefreshToken = false;\n  }\n  return __awaiter(this, void 0, void 0, function () {\n    var accessToken, refreshToken;\n    return __generator(this, function (_b) {\n      switch (_b.label) {\n        case 0:\n          (0, logger_1.logDebugMessage)(\"setTokenHeaders: adding existing tokens as header\");\n          return [4 /*yield*/, getTokenForHeaderAuth(\"access\")];\n        case 1:\n          accessToken = _b.sent();\n          return [4 /*yield*/, getTokenForHeaderAuth(\"refresh\")];\n        case 2:\n          refreshToken = _b.sent();\n          // We don't always need the refresh token because that's only required by the refresh call\n          // Still, we only add the access token to Authorization header if both are present, because we are planning to add an option to expose the\n          // access token to the frontend while using cookie based auth - so that users can get the access token without using header based auth\n          // We can add the refresh token even if only that one is present, to make manual testing easier - you can then\n          // force a refresh by just deleting the access token.\n          if ((addRefreshToken || accessToken !== undefined) && refreshToken !== undefined) {\n            // the Headers class normalizes header names so we don't have to worry about casing\n            if (clonedHeaders.has(\"Authorization\")) {\n              (0, logger_1.logDebugMessage)(\"setAuthorizationHeaderIfRequired: Authorization header defined by the user, not adding\");\n            } else {\n              (0, logger_1.logDebugMessage)(\"setAuthorizationHeaderIfRequired: added authorization header\");\n              clonedHeaders.set(\"Authorization\", \"Bearer \".concat(addRefreshToken ? refreshToken : accessToken));\n            }\n          } else {\n            (0, logger_1.logDebugMessage)(\"setAuthorizationHeaderIfRequired: token for header based auth not found\");\n          }\n          return [2 /*return*/];\n      }\n    });\n  });\n}\nfunction saveTokensFromHeaders(response) {\n  return __awaiter(this, void 0, void 0, function () {\n    var refreshToken, accessToken, frontToken, antiCsrfToken, tok;\n    return __generator(this, function (_b) {\n      switch (_b.label) {\n        case 0:\n          (0, logger_1.logDebugMessage)(\"saveTokensFromHeaders: Saving updated tokens from the response headers\");\n          refreshToken = response.headers.get(\"st-refresh-token\");\n          if (!(refreshToken !== null)) return [3 /*break*/, 2];\n          (0, logger_1.logDebugMessage)(\"saveTokensFromHeaders: saving new refresh token\");\n          return [4 /*yield*/, setToken(\"refresh\", refreshToken)];\n        case 1:\n          _b.sent();\n          _b.label = 2;\n        case 2:\n          accessToken = response.headers.get(\"st-access-token\");\n          if (!(accessToken !== null)) return [3 /*break*/, 4];\n          (0, logger_1.logDebugMessage)(\"saveTokensFromHeaders: saving new access token\");\n          return [4 /*yield*/, setToken(\"access\", accessToken)];\n        case 3:\n          _b.sent();\n          _b.label = 4;\n        case 4:\n          frontToken = response.headers.get(\"front-token\");\n          if (!(frontToken !== null)) return [3 /*break*/, 6];\n          (0, logger_1.logDebugMessage)(\"saveTokensFromHeaders: Setting sFrontToken: \" + frontToken);\n          return [4 /*yield*/, FrontToken.setItem(frontToken)];\n        case 5:\n          _b.sent();\n          (0, exports.updateClockSkewUsingFrontToken)({\n            frontToken: frontToken,\n            responseHeaders: response.headers\n          });\n          _b.label = 6;\n        case 6:\n          antiCsrfToken = response.headers.get(\"anti-csrf\");\n          if (!(antiCsrfToken !== null)) return [3 /*break*/, 9];\n          return [4 /*yield*/, getLocalSessionState(false)];\n        case 7:\n          tok = _b.sent();\n          if (!(tok.status === \"EXISTS\")) return [3 /*break*/, 9];\n          (0, logger_1.logDebugMessage)(\"saveTokensFromHeaders: Setting anti-csrf token\");\n          return [4 /*yield*/, AntiCsrfToken.setItem(tok.lastAccessTokenUpdate, antiCsrfToken)];\n        case 8:\n          _b.sent();\n          _b.label = 9;\n        case 9:\n          return [2 /*return*/];\n      }\n    });\n  });\n}\nvar successfullySavedToCookies = undefined;\nfunction saveLastAccessTokenUpdate() {\n  return __awaiter(this, void 0, void 0, function () {\n    var now;\n    return __generator(this, function (_b) {\n      switch (_b.label) {\n        case 0:\n          (0, logger_1.logDebugMessage)(\"saveLastAccessTokenUpdate: called\");\n          now = Date.now().toString();\n          (0, logger_1.logDebugMessage)(\"saveLastAccessTokenUpdate: setting \" + now);\n          return [4 /*yield*/, storeInCookies(LAST_ACCESS_TOKEN_UPDATE, now, Number.MAX_SAFE_INTEGER)];\n        case 1:\n          _b.sent();\n          if (!(successfullySavedToCookies === undefined)) return [3 /*break*/, 3];\n          return [4 /*yield*/, getFromCookies(LAST_ACCESS_TOKEN_UPDATE)];\n        case 2:\n          successfullySavedToCookies = _b.sent() === now;\n          _b.label = 3;\n        case 3:\n          if (successfullySavedToCookies === false) {\n            console.warn(\"Saving to cookies was not successful, this indicates a configuration error or the browser preventing us from writing the cookies.\");\n          }\n          // We clear the sIRTFrontend cookie\n          // We are handling this as a special case here because we want to limit the scope of legacy code\n          return [4 /*yield*/, storeInCookies(\"sIRTFrontend\", \"\", 0)];\n        case 4:\n          // We clear the sIRTFrontend cookie\n          // We are handling this as a special case here because we want to limit the scope of legacy code\n          _b.sent();\n          return [2 /*return*/];\n      }\n    });\n  });\n}\nexports.saveLastAccessTokenUpdate = saveLastAccessTokenUpdate;\nfunction getAntiCSRFToken() {\n  return __awaiter(this, void 0, void 0, function () {\n    function getAntiCSRFromCookie() {\n      return __awaiter(this, void 0, void 0, function () {\n        var value, _b, parts, last, temp;\n        return __generator(this, function (_c) {\n          switch (_c.label) {\n            case 0:\n              _b = \"; \";\n              return [4 /*yield*/, cookieHandler_1.default.getReferenceOrThrow().cookieHandler.getCookie()];\n            case 1:\n              value = _b + _c.sent();\n              parts = value.split(\"; \" + ANTI_CSRF_NAME + \"=\");\n              if (parts.length >= 2) {\n                last = parts.pop();\n                if (last !== undefined) {\n                  temp = last.split(\";\").shift();\n                  if (temp === undefined) {\n                    return [2 /*return*/, null];\n                  }\n                  return [2 /*return*/, temp];\n                }\n              }\n              return [2 /*return*/, null];\n          }\n        });\n      });\n    }\n    var fromCookie;\n    return __generator(this, function (_b) {\n      switch (_b.label) {\n        case 0:\n          (0, logger_1.logDebugMessage)(\"getAntiCSRFToken: called\");\n          return [4 /*yield*/, getLocalSessionState(true)];\n        case 1:\n          // we do not call doesSessionExist here cause the user might override that\n          // function here and then it may break the logic of our original implementation.\n          if (!(_b.sent().status === \"EXISTS\")) {\n            (0, logger_1.logDebugMessage)(\"getAntiCSRFToken: Returning because local session state != EXISTS\");\n            return [2 /*return*/, null];\n          }\n          return [4 /*yield*/, getAntiCSRFromCookie()];\n        case 2:\n          fromCookie = _b.sent();\n          (0, logger_1.logDebugMessage)(\"getAntiCSRFToken: returning: \" + fromCookie);\n          return [2 /*return*/, fromCookie];\n      }\n    });\n  });\n}\n// give antiCSRFToken as undefined to remove it.\nfunction setAntiCSRF(antiCSRFToken) {\n  return __awaiter(this, void 0, void 0, function () {\n    return __generator(this, function (_b) {\n      switch (_b.label) {\n        case 0:\n          (0, logger_1.logDebugMessage)(\"setAntiCSRF: called: \" + antiCSRFToken);\n          if (!(antiCSRFToken !== undefined)) return [3 /*break*/, 2];\n          return [4 /*yield*/, storeInCookies(ANTI_CSRF_NAME, antiCSRFToken, Number.MAX_SAFE_INTEGER)];\n        case 1:\n          _b.sent();\n          return [3 /*break*/, 4];\n        case 2:\n          return [4 /*yield*/, storeInCookies(ANTI_CSRF_NAME, \"\", 0)];\n        case 3:\n          _b.sent();\n          _b.label = 4;\n        case 4:\n          return [2 /*return*/];\n      }\n    });\n  });\n}\nexports.setAntiCSRF = setAntiCSRF;\nfunction getFrontTokenFromCookie() {\n  return __awaiter(this, void 0, void 0, function () {\n    var val;\n    return __generator(this, function (_b) {\n      switch (_b.label) {\n        case 0:\n          (0, logger_1.logDebugMessage)(\"getFrontTokenFromCookie: called\");\n          return [4 /*yield*/, getFromCookies(FRONT_TOKEN_NAME)];\n        case 1:\n          val = _b.sent();\n          return [2 /*return*/, val === undefined ? null : val];\n      }\n    });\n  });\n}\nfunction parseFrontToken(frontToken) {\n  return JSON.parse(decodeURIComponent(escape(atob(frontToken))));\n}\nfunction getFrontToken() {\n  return __awaiter(this, void 0, void 0, function () {\n    var fromCookie;\n    return __generator(this, function (_b) {\n      switch (_b.label) {\n        case 0:\n          (0, logger_1.logDebugMessage)(\"getFrontToken: called\");\n          return [4 /*yield*/, getLocalSessionState(true)];\n        case 1:\n          // we do not call doesSessionExist here because that directly calls this function.\n          if (!(_b.sent().status === \"EXISTS\")) {\n            (0, logger_1.logDebugMessage)(\"getFrontToken: Returning because sIRTFrontend != EXISTS\");\n            return [2 /*return*/, null];\n          }\n          return [4 /*yield*/, getFrontTokenFromCookie()];\n        case 2:\n          fromCookie = _b.sent();\n          (0, logger_1.logDebugMessage)(\"getFrontToken: returning: \" + fromCookie);\n          return [2 /*return*/, fromCookie];\n      }\n    });\n  });\n}\nexports.getFrontToken = getFrontToken;\nfunction setFrontToken(frontToken) {\n  return __awaiter(this, void 0, void 0, function () {\n    var oldToken, oldPayload, newPayload;\n    return __generator(this, function (_b) {\n      switch (_b.label) {\n        case 0:\n          (0, logger_1.logDebugMessage)(\"setFrontToken: called\");\n          return [4 /*yield*/, getFrontTokenFromCookie()];\n        case 1:\n          oldToken = _b.sent();\n          if (oldToken !== null && frontToken !== undefined) {\n            oldPayload = parseFrontToken(oldToken).up;\n            newPayload = parseFrontToken(frontToken).up;\n            if (JSON.stringify(oldPayload) !== JSON.stringify(newPayload)) {\n              onTokenUpdate();\n            }\n          }\n          if (!(frontToken === undefined)) return [3 /*break*/, 3];\n          // clear the cookie\n          return [4 /*yield*/, storeInCookies(FRONT_TOKEN_NAME, \"\", 0)];\n        case 2:\n          // clear the cookie\n          _b.sent();\n          return [3 /*break*/, 5];\n        case 3:\n          return [4 /*yield*/, storeInCookies(FRONT_TOKEN_NAME, frontToken, Number.MAX_SAFE_INTEGER)];\n        case 4:\n          _b.sent();\n          _b.label = 5;\n        case 5:\n          return [2 /*return*/];\n      }\n    });\n  });\n}\nexports.setFrontToken = setFrontToken;\nfunction fireSessionUpdateEventsIfNecessary(wasLoggedIn, status, frontTokenHeaderFromResponse) {\n  // In case we've received a 401 that didn't clear the session (e.g.: we've sent no session token, or we should try refreshing)\n  // then onUnauthorised will handle firing the UNAUTHORISED event if necessary\n  // In some rare cases (where we receive a 401 that also clears the session) this will fire the event twice.\n  // This may be considered a bug, but it is the existing behaviour before the rework\n  if (frontTokenHeaderFromResponse === undefined || frontTokenHeaderFromResponse === null) {\n    // The access token (and the session) hasn't been updated.\n    (0, logger_1.logDebugMessage)(\"fireSessionUpdateEventsIfNecessary returning early because the front token was not updated\");\n    return;\n  }\n  // if the current endpoint clears the session it'll set the front-token to remove\n  // any other update means it's created or updated.\n  var frontTokenExistsAfter = frontTokenHeaderFromResponse !== \"remove\";\n  (0, logger_1.logDebugMessage)(\"fireSessionUpdateEventsIfNecessary wasLoggedIn: \".concat(wasLoggedIn, \" frontTokenExistsAfter: \").concat(frontTokenExistsAfter, \" status: \").concat(status));\n  if (wasLoggedIn) {\n    // we check for wasLoggedIn cause we don't want to fire an event\n    // unnecessarily on first app load or if the user tried\n    // to query an API that returned 401 while the user was not logged in...\n    if (!frontTokenExistsAfter) {\n      if (status === AuthHttpRequest.config.sessionExpiredStatusCode) {\n        (0, logger_1.logDebugMessage)(\"onUnauthorisedResponse: firing UNAUTHORISED event\");\n        AuthHttpRequest.config.onHandleEvent({\n          action: \"UNAUTHORISED\",\n          sessionExpiredOrRevoked: true,\n          userContext: {}\n        });\n      } else {\n        (0, logger_1.logDebugMessage)(\"onUnauthorisedResponse: firing SIGN_OUT event\");\n        AuthHttpRequest.config.onHandleEvent({\n          action: \"SIGN_OUT\",\n          userContext: {}\n        });\n      }\n    }\n  } else if (frontTokenExistsAfter) {\n    (0, logger_1.logDebugMessage)(\"onUnauthorisedResponse: firing SESSION_CREATED event\");\n    AuthHttpRequest.config.onHandleEvent({\n      action: \"SESSION_CREATED\",\n      userContext: {}\n    });\n  }\n}\nexports.fireSessionUpdateEventsIfNecessary = fireSessionUpdateEventsIfNecessary;\n/**\n * Updates the clock skew based on the provided frontToken and responseHeaders.\n */\nvar updateClockSkewUsingFrontToken = function (_b) {\n  var frontToken = _b.frontToken,\n    responseHeaders = _b.responseHeaders;\n  (0, logger_1.logDebugMessage)(\"updateClockSkewUsingFrontToken: frontToken: \" + frontToken);\n  if (frontToken === null || frontToken === undefined || frontToken === \"remove\") {\n    (0, logger_1.logDebugMessage)(\"updateClockSkewUsingFrontToken: the access token payload wasn't updated or is being removed, skipping clock skew update\");\n    return;\n  }\n  var frontTokenPayload = parseFrontToken(frontToken);\n  var clockSkewInMillis = AuthHttpRequest.recipeImpl.calculateClockSkewInMillis({\n    accessTokenPayload: frontTokenPayload.up,\n    responseHeaders: responseHeaders\n  });\n  dateProvider_1.default.getReferenceOrThrow().dateProvider.setClientClockSkewInMillis(clockSkewInMillis);\n  (0, logger_1.logDebugMessage)(\"updateClockSkewUsingFrontToken: Client clock synchronized successfully\");\n};\nexports.updateClockSkewUsingFrontToken = updateClockSkewUsingFrontToken;", "\"use strict\";\n\n/* Copyright (c) 2020, VRAI Labs and/or its affiliates. All rights reserved.\n *\n * This software is licensed under the Apache License, Version 2.0 (the\n * \"License\") as published by the Apache Software Foundation.\n *\n * You may not use this file except in compliance with the License. You may\n * obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\n * License for the specific language governing permissions and limitations\n * under the License.\n */\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.SessionClaimValidatorStore = void 0;\nvar SessionClaimValidatorStore = /** @class */function () {\n  function SessionClaimValidatorStore() {}\n  SessionClaimValidatorStore.claimValidatorsAddedByOtherRecipes = [];\n  SessionClaimValidatorStore.addClaimValidatorFromOtherRecipe = function (builder) {\n    SessionClaimValidatorStore.claimValidatorsAddedByOtherRecipes.push(builder);\n  };\n  SessionClaimValidatorStore.getClaimValidatorsAddedByOtherRecipes = function () {\n    return SessionClaimValidatorStore.claimValidatorsAddedByOtherRecipes;\n  };\n  return SessionClaimValidatorStore;\n}();\nexports.SessionClaimValidatorStore = SessionClaimValidatorStore;\nexports.default = SessionClaimValidatorStore;", "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getGlobalClaimValidators = void 0;\nvar _1 = require(\".\");\nvar fetch_1 = require(\"../fetch\");\nvar sessionClaimValidatorStore_1 = require(\"./sessionClaimValidatorStore\");\nfunction getGlobalClaimValidators(overrideGlobalClaimValidators, userContext) {\n  var normalisedUserContext = (0, _1.getNormalisedUserContext)(userContext);\n  var claimValidatorsAddedByOtherRecipes = sessionClaimValidatorStore_1.default.getClaimValidatorsAddedByOtherRecipes();\n  var globalClaimValidators = fetch_1.default.recipeImpl.getGlobalClaimValidators({\n    claimValidatorsAddedByOtherRecipes: claimValidatorsAddedByOtherRecipes,\n    userContext: normalisedUserContext\n  });\n  var claimValidators = overrideGlobalClaimValidators !== undefined ? overrideGlobalClaimValidators(globalClaimValidators, normalisedUserContext) : globalClaimValidators;\n  return claimValidators;\n}\nexports.getGlobalClaimValidators = getGlobalClaimValidators;", "/* Copyright (c) 2020, VRAI Labs and/or its affiliates. All rights reserved.\n *\n * This software is licensed under the Apache License, Version 2.0 (the\n * \"License\") as published by the Apache Software Foundation.\n * \n * You may not use this file except in compliance with the License. You may\n * obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n * \n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\n * License for the specific language governing permissions and limitations\n * under the License. \n*/\n\"use strict\";\n\nfunction __export(m) {\n  for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n}\nexports.__esModule = true;\n__export(require(\"../../lib/build/utils/globalClaimValidators\"));", "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.normaliseUser = exports.normaliseUserResponse = exports.getGlobalClaimValidators = exports.getHashFromLocation = exports.getNormalisedUserContext = exports.checkForSSRErrorAndAppendIfNeeded = exports.getAllQueryParams = exports.getQueryParams = exports.isTest = exports.normaliseInputAppInfoOrThrowError = exports.appendQueryParamsToURL = void 0;\n/* Copyright (c) 2022, VRAI Labs and/or its affiliates. All rights reserved.\n *\n * This software is licensed under the Apache License, Version 2.0 (the\n * \"License\") as published by the Apache Software Foundation.\n *\n * You may not use this file except in compliance with the License. You may\n * obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\n * License for the specific language governing permissions and limitations\n * under the License.\n */\nvar windowHandler_1 = require(\"./windowHandler\");\nvar constants_1 = require(\"./constants\");\nvar normalisedURLDomain_1 = require(\"./normalisedURLDomain\");\nvar normalisedURLPath_1 = require(\"./normalisedURLPath\");\nvar globalClaimValidators_1 = require(\"supertokens-website/utils/globalClaimValidators\");\nfunction appendQueryParamsToURL(stringUrl, queryParams) {\n  if (queryParams === undefined) {\n    return stringUrl;\n  }\n  try {\n    var url_1 = new URL(stringUrl);\n    Object.entries(queryParams).forEach(function (_a) {\n      var key = _a[0],\n        value = _a[1];\n      url_1.searchParams.set(key, value);\n    });\n    return url_1.href;\n  } catch (e) {\n    var fakeDomain = stringUrl.startsWith(\"/\") ? \"http:localhost\" : \"http://localhost/\";\n    var url_2 = new URL(\"\".concat(fakeDomain).concat(stringUrl));\n    Object.entries(queryParams).forEach(function (_a) {\n      var key = _a[0],\n        value = _a[1];\n      url_2.searchParams.set(key, value);\n    });\n    return \"\".concat(url_2.pathname).concat(url_2.search);\n  }\n}\nexports.appendQueryParamsToURL = appendQueryParamsToURL;\nfunction getNormalisedURLPathOrDefault(defaultPath, path) {\n  if (path !== undefined) {\n    return new normalisedURLPath_1.default(path);\n  } else {\n    return new normalisedURLPath_1.default(defaultPath);\n  }\n}\nfunction normaliseInputAppInfoOrThrowError(appInfo) {\n  if (appInfo === undefined) {\n    throw new Error(\"Please provide the appInfo object when calling supertokens.init\");\n  }\n  if (appInfo.apiDomain === undefined) {\n    throw new Error(\"Please provide your apiDomain inside the appInfo object when calling supertokens.init\");\n  }\n  if (appInfo.appName === undefined) {\n    throw new Error(\"Please provide your appName inside the appInfo object when calling supertokens.init\");\n  }\n  var apiGatewayPath = new normalisedURLPath_1.default(\"\");\n  if (appInfo.apiGatewayPath !== undefined) {\n    apiGatewayPath = new normalisedURLPath_1.default(appInfo.apiGatewayPath);\n  }\n  return {\n    appName: appInfo.appName,\n    apiDomain: new normalisedURLDomain_1.default(appInfo.apiDomain),\n    apiBasePath: apiGatewayPath.appendPath(getNormalisedURLPathOrDefault(constants_1.DEFAULT_API_BASE_PATH, appInfo.apiBasePath))\n  };\n}\nexports.normaliseInputAppInfoOrThrowError = normaliseInputAppInfoOrThrowError;\nfunction isTest() {\n  try {\n    return process.env.TEST_MODE === \"testing\";\n  } catch (err) {\n    // can get Uncaught ReferenceError: process is not defined error\n    return false;\n  }\n}\nexports.isTest = isTest;\nfunction getQueryParams(param) {\n  var urlParams = new URLSearchParams(windowHandler_1.WindowHandlerReference.getReferenceOrThrow().windowHandler.location.getSearch());\n  var queryParam = urlParams.get(param);\n  if (queryParam === null) {\n    return undefined;\n  }\n  return queryParam;\n}\nexports.getQueryParams = getQueryParams;\nfunction getAllQueryParams() {\n  return new URLSearchParams(windowHandler_1.WindowHandlerReference.getReferenceOrThrow().windowHandler.location.getSearch());\n}\nexports.getAllQueryParams = getAllQueryParams;\nfunction checkForSSRErrorAndAppendIfNeeded(error) {\n  // tslint:disable-next-line\n  if (typeof window === \"undefined\") {\n    error = error + constants_1.SSR_ERROR;\n  }\n  return error;\n}\nexports.checkForSSRErrorAndAppendIfNeeded = checkForSSRErrorAndAppendIfNeeded;\nfunction getNormalisedUserContext(userContext) {\n  return userContext === undefined ? {} : userContext;\n}\nexports.getNormalisedUserContext = getNormalisedUserContext;\nfunction getHashFromLocation() {\n  // By default it is returned with the \"#\" at the beginning, we cut that off here.\n  return windowHandler_1.WindowHandlerReference.getReferenceOrThrow().windowHandler.location.getHash().substring(1);\n}\nexports.getHashFromLocation = getHashFromLocation;\nfunction getGlobalClaimValidators(_a) {\n  var overrideGlobalClaimValidators = _a.overrideGlobalClaimValidators,\n    userContext = _a.userContext;\n  return (0, globalClaimValidators_1.getGlobalClaimValidators)(overrideGlobalClaimValidators, userContext);\n}\nexports.getGlobalClaimValidators = getGlobalClaimValidators;\nfunction normaliseUserResponse(recipeId, response) {\n  if (\"createdNewRecipeUser\" in response) {\n    return response;\n  }\n  return {\n    createdNewRecipeUser: response.createdNewUser,\n    user: normaliseUser(recipeId, response.user)\n  };\n}\nexports.normaliseUserResponse = normaliseUserResponse;\nfunction normaliseUser(recipeId, responseUser) {\n  if (\"loginMethods\" in responseUser) {\n    return responseUser;\n  }\n  var emails = responseUser.email !== undefined ? [responseUser.email] : [];\n  var phoneNumbers = responseUser.phoneNumber !== undefined ? [responseUser.phoneNumber] : [];\n  var thirdParty = responseUser.thirdParty !== undefined ? [responseUser.thirdParty] : [];\n  return {\n    id: responseUser.id,\n    emails: emails,\n    phoneNumbers: phoneNumbers,\n    thirdParty: thirdParty,\n    isPrimaryUser: false,\n    tenantIds: responseUser.tenantIds,\n    timeJoined: responseUser.timeJoined,\n    loginMethods: [{\n      recipeId: recipeId,\n      recipeUserId: responseUser.id,\n      timeJoined: responseUser.timeJoined,\n      tenantIds: responseUser.tenantIds,\n      email: responseUser.email,\n      phoneNumber: responseUser.email\n    }]\n  };\n}\nexports.normaliseUser = normaliseUser;", "\"use strict\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nvar __generator = this && this.__generator || function (thisArg, body) {\n  var _ = {\n      label: 0,\n      sent: function () {\n        if (t[0] & 1) throw t[1];\n        return t[1];\n      },\n      trys: [],\n      ops: []\n    },\n    f,\n    y,\n    t,\n    g;\n  return g = {\n    next: verb(0),\n    throw: verb(1),\n    return: verb(2)\n  }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function () {\n    return this;\n  }), g;\n  function verb(n) {\n    return function (v) {\n      return step([n, v]);\n    };\n  }\n  function step(op) {\n    if (f) throw new TypeError(\"Generator is already executing.\");\n    while (_) try {\n      if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n      if (y = 0, t) op = [op[0] & 2, t.value];\n      switch (op[0]) {\n        case 0:\n        case 1:\n          t = op;\n          break;\n        case 4:\n          _.label++;\n          return {\n            value: op[1],\n            done: false\n          };\n        case 5:\n          _.label++;\n          y = op[1];\n          op = [0];\n          continue;\n        case 7:\n          op = _.ops.pop();\n          _.trys.pop();\n          continue;\n        default:\n          if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {\n            _ = 0;\n            continue;\n          }\n          if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {\n            _.label = op[1];\n            break;\n          }\n          if (op[0] === 6 && _.label < t[1]) {\n            _.label = t[1];\n            t = op;\n            break;\n          }\n          if (t && _.label < t[2]) {\n            _.label = t[2];\n            _.ops.push(op);\n            break;\n          }\n          if (t[2]) _.ops.pop();\n          _.trys.pop();\n          continue;\n      }\n      op = body.call(thisArg, _);\n    } catch (e) {\n      op = [6, e];\n      y = 0;\n    } finally {\n      f = t = 0;\n    }\n    if (op[0] & 5) throw op[1];\n    return {\n      value: op[0] ? op[1] : void 0,\n      done: true\n    };\n  }\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.createAxiosErrorFromFetchResp = void 0;\n/**\n * From axios package\n * Update an Error with the specified config, error code, and response.\n *\n * @param {Error} error The error to update.\n * @param {Object} config The config.\n * @param {string} [code] The error code (for example, 'ECONNABORTED').\n * @param {Object} [request] The request.\n * @param {Object} [response] The response.\n * @returns {Error} The error.\n */\nfunction enhanceAxiosError(error, config, code, request, response) {\n  error.config = config;\n  if (code) {\n    error.code = code;\n  }\n  error.request = request;\n  error.response = response;\n  error.isAxiosError = true;\n  error.toJSON = function toJSON() {\n    return {\n      // Standard\n      message: this.message,\n      name: this.name,\n      // Microsoft\n      description: this.description,\n      number: this.number,\n      // Mozilla\n      fileName: this.fileName,\n      lineNumber: this.lineNumber,\n      columnNumber: this.columnNumber,\n      stack: this.stack,\n      // Axios\n      config: this.config,\n      code: this.code\n    };\n  };\n  return error;\n}\nfunction createAxiosErrorFromFetchResp(responseOrError) {\n  return __awaiter(this, void 0, void 0, function () {\n    var config, isResponse, axiosResponse, contentType, data, _a;\n    return __generator(this, function (_b) {\n      switch (_b.label) {\n        case 0:\n          config = {\n            url: responseOrError.url,\n            headers: responseOrError.headers\n          };\n          isResponse = \"status\" in responseOrError;\n          if (!isResponse) return [3 /*break*/, 12];\n          contentType = responseOrError.headers.get(\"content-type\");\n          data = void 0;\n          if (!(contentType === null)) return [3 /*break*/, 5];\n          _b.label = 1;\n        case 1:\n          _b.trys.push([1, 3,, 4]);\n          return [4 /*yield*/, responseOrError.text()];\n        case 2:\n          data = _b.sent();\n          return [3 /*break*/, 4];\n        case 3:\n          _a = _b.sent();\n          data = \"\";\n          return [3 /*break*/, 4];\n        case 4:\n          return [3 /*break*/, 11];\n        case 5:\n          if (!contentType.includes(\"application/json\")) return [3 /*break*/, 7];\n          return [4 /*yield*/, responseOrError.json()];\n        case 6:\n          data = _b.sent();\n          return [3 /*break*/, 11];\n        case 7:\n          if (!contentType.includes(\"text/\")) return [3 /*break*/, 9];\n          return [4 /*yield*/, responseOrError.text()];\n        case 8:\n          data = _b.sent();\n          return [3 /*break*/, 11];\n        case 9:\n          return [4 /*yield*/, responseOrError.blob()];\n        case 10:\n          data = _b.sent();\n          _b.label = 11;\n        case 11:\n          axiosResponse = {\n            data: data,\n            status: responseOrError.status,\n            statusText: responseOrError.statusText,\n            headers: responseOrError.headers,\n            config: config,\n            request: undefined\n          };\n          _b.label = 12;\n        case 12:\n          return [2 /*return*/, enhanceAxiosError(isResponse ? new Error(\"Request failed with status code \" + responseOrError.status) : responseOrError, config, responseOrError.code, undefined, axiosResponse)];\n      }\n    });\n  });\n}\nexports.createAxiosErrorFromFetchResp = createAxiosErrorFromFetchResp;", "\"use strict\";\n\nvar __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n    return t;\n  };\n  return __assign.apply(this, arguments);\n};\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nvar __generator = this && this.__generator || function (thisArg, body) {\n  var _ = {\n      label: 0,\n      sent: function () {\n        if (t[0] & 1) throw t[1];\n        return t[1];\n      },\n      trys: [],\n      ops: []\n    },\n    f,\n    y,\n    t,\n    g;\n  return g = {\n    next: verb(0),\n    throw: verb(1),\n    return: verb(2)\n  }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function () {\n    return this;\n  }), g;\n  function verb(n) {\n    return function (v) {\n      return step([n, v]);\n    };\n  }\n  function step(op) {\n    if (f) throw new TypeError(\"Generator is already executing.\");\n    while (_) try {\n      if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n      if (y = 0, t) op = [op[0] & 2, t.value];\n      switch (op[0]) {\n        case 0:\n        case 1:\n          t = op;\n          break;\n        case 4:\n          _.label++;\n          return {\n            value: op[1],\n            done: false\n          };\n        case 5:\n          _.label++;\n          y = op[1];\n          op = [0];\n          continue;\n        case 7:\n          op = _.ops.pop();\n          _.trys.pop();\n          continue;\n        default:\n          if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {\n            _ = 0;\n            continue;\n          }\n          if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {\n            _.label = op[1];\n            break;\n          }\n          if (op[0] === 6 && _.label < t[1]) {\n            _.label = t[1];\n            t = op;\n            break;\n          }\n          if (t && _.label < t[2]) {\n            _.label = t[2];\n            _.ops.push(op);\n            break;\n          }\n          if (t[2]) _.ops.pop();\n          _.trys.pop();\n          continue;\n      }\n      op = body.call(thisArg, _);\n    } catch (e) {\n      op = [6, e];\n      y = 0;\n    } finally {\n      f = t = 0;\n    }\n    if (op[0] & 5) throw op[1];\n    return {\n      value: op[0] ? op[1] : void 0,\n      done: true\n    };\n  }\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.responseErrorInterceptor = exports.responseInterceptor = exports.interceptorFunctionRequestFulfilled = void 0;\nvar axiosError_1 = require(\"./axiosError\");\nvar fetch_1 = require(\"./fetch\");\nvar processState_1 = require(\"./processState\");\nvar windowHandler_1 = require(\"./utils/windowHandler\");\nvar logger_1 = require(\"./logger\");\nfunction incrementSessionRefreshAttemptCount(config) {\n  if (config.__supertokensSessionRefreshAttempts === undefined) {\n    config.__supertokensSessionRefreshAttempts = 0;\n  }\n  config.__supertokensSessionRefreshAttempts++;\n}\nfunction hasExceededMaxSessionRefreshAttempts(config) {\n  if (config.__supertokensSessionRefreshAttempts === undefined) {\n    config.__supertokensSessionRefreshAttempts = 0;\n  }\n  return config.__supertokensSessionRefreshAttempts >= fetch_1.default.config.maxRetryAttemptsForSessionRefresh;\n}\nfunction getUrlFromConfig(config) {\n  var url = config.url === undefined ? \"\" : config.url;\n  var baseURL = config.baseURL;\n  if (baseURL !== undefined) {\n    if (url.charAt(0) === \"/\" && baseURL.charAt(baseURL.length - 1) === \"/\") {\n      url = baseURL + url.substr(1);\n    } else if (url.charAt(0) !== \"/\" && baseURL.charAt(baseURL.length - 1) !== \"/\") {\n      url = baseURL + \"/\" + url;\n    } else {\n      url = baseURL + url;\n    }\n  }\n  return url;\n}\nfunction interceptorFunctionRequestFulfilled(config) {\n  return __awaiter(this, void 0, void 0, function () {\n    var url, doNotDoInterception, preRequestLSS, configWithAntiCsrf, antiCsrfToken, transferMethod;\n    return __generator(this, function (_a) {\n      switch (_a.label) {\n        case 0:\n          (0, logger_1.logDebugMessage)(\"interceptorFunctionRequestFulfilled: started axios interception\");\n          url = getUrlFromConfig(config);\n          doNotDoInterception = false;\n          try {\n            doNotDoInterception = typeof url === \"string\" && !fetch_1.default.recipeImpl.shouldDoInterceptionBasedOnUrl(url, fetch_1.default.config.apiDomain, fetch_1.default.config.sessionTokenBackendDomain);\n          } catch (err) {\n            if (err.message === \"Please provide a valid domain name\") {\n              (0, logger_1.logDebugMessage)(\"interceptorFunctionRequestFulfilled: Trying shouldDoInterceptionBasedOnUrl with location.origin\");\n              // .origin gives the port as well..\n              doNotDoInterception = !fetch_1.default.recipeImpl.shouldDoInterceptionBasedOnUrl(windowHandler_1.default.getReferenceOrThrow().windowHandler.location.getOrigin(), fetch_1.default.config.apiDomain, fetch_1.default.config.sessionTokenBackendDomain);\n            } else {\n              throw err;\n            }\n          }\n          (0, logger_1.logDebugMessage)(\"interceptorFunctionRequestFulfilled: Value of doNotDoInterception: \" + doNotDoInterception);\n          if (doNotDoInterception) {\n            (0, logger_1.logDebugMessage)(\"interceptorFunctionRequestFulfilled: Returning config unchanged\");\n            // this check means that if you are using axios via inteceptor, then we only do the refresh steps if you are calling your APIs.\n            return [2 /*return*/, config];\n          }\n          (0, logger_1.logDebugMessage)(\"interceptorFunctionRequestFulfilled: Modifying config\");\n          processState_1.ProcessState.getInstance().addState(processState_1.PROCESS_STATE.CALLING_INTERCEPTION_REQUEST);\n          return [4 /*yield*/, (0, fetch_1.getLocalSessionState)(true)];\n        case 1:\n          preRequestLSS = _a.sent();\n          configWithAntiCsrf = config;\n          if (!(preRequestLSS.status === \"EXISTS\")) return [3 /*break*/, 3];\n          return [4 /*yield*/, fetch_1.AntiCsrfToken.getToken(preRequestLSS.lastAccessTokenUpdate)];\n        case 2:\n          antiCsrfToken = _a.sent();\n          if (antiCsrfToken !== undefined) {\n            (0, logger_1.logDebugMessage)(\"interceptorFunctionRequestFulfilled: Adding anti-csrf token to request\");\n            configWithAntiCsrf = __assign(__assign({}, configWithAntiCsrf), {\n              headers: configWithAntiCsrf === undefined ? {\n                \"anti-csrf\": antiCsrfToken\n              } : __assign(__assign({}, configWithAntiCsrf.headers), {\n                \"anti-csrf\": antiCsrfToken\n              })\n            });\n          }\n          _a.label = 3;\n        case 3:\n          if (fetch_1.default.config.autoAddCredentials && configWithAntiCsrf.withCredentials === undefined) {\n            (0, logger_1.logDebugMessage)(\"interceptorFunctionRequestFulfilled: Adding credentials include\");\n            configWithAntiCsrf = __assign(__assign({}, configWithAntiCsrf), {\n              withCredentials: true\n            });\n          }\n          // adding rid for anti-csrf protection: Anti-csrf via custom header\n          (0, logger_1.logDebugMessage)(\"interceptorFunctionRequestFulfilled: Adding rid header: anti-csrf (it may be overriden by the user's provided rid)\");\n          configWithAntiCsrf = __assign(__assign({}, configWithAntiCsrf), {\n            headers: configWithAntiCsrf === undefined ? {\n              rid: \"anti-csrf\"\n            } : __assign({\n              rid: \"anti-csrf\"\n            }, configWithAntiCsrf.headers)\n          });\n          transferMethod = fetch_1.default.config.tokenTransferMethod;\n          (0, logger_1.logDebugMessage)(\"interceptorFunctionRequestFulfilled: Adding st-auth-mode header: \" + transferMethod);\n          configWithAntiCsrf.headers[\"st-auth-mode\"] = transferMethod;\n          return [4 /*yield*/, removeAuthHeaderIfMatchesLocalToken(configWithAntiCsrf)];\n        case 4:\n          configWithAntiCsrf = _a.sent();\n          return [4 /*yield*/, setAuthorizationHeaderIfRequired(configWithAntiCsrf)];\n        case 5:\n          _a.sent();\n          (0, logger_1.logDebugMessage)(\"interceptorFunctionRequestFulfilled: returning modified config\");\n          return [2 /*return*/, configWithAntiCsrf];\n      }\n    });\n  });\n}\nexports.interceptorFunctionRequestFulfilled = interceptorFunctionRequestFulfilled;\nfunction responseInterceptor(axiosInstance) {\n  var _this = this;\n  return function (response) {\n    return __awaiter(_this, void 0, void 0, function () {\n      var doNotDoInterception, url, preRequestLSS, config;\n      return __generator(this, function (_a) {\n        switch (_a.label) {\n          case 0:\n            doNotDoInterception = false;\n            if (!fetch_1.default.initCalled) {\n              throw new Error(\"init function not called\");\n            }\n            (0, logger_1.logDebugMessage)(\"responseInterceptor: started\");\n            (0, logger_1.logDebugMessage)(\"responseInterceptor: already intercepted: \" + response.headers[\"x-supertokens-xhr-intercepted\"]);\n            url = getUrlFromConfig(response.config);\n            try {\n              doNotDoInterception = typeof url === \"string\" && !fetch_1.default.recipeImpl.shouldDoInterceptionBasedOnUrl(url, fetch_1.default.config.apiDomain, fetch_1.default.config.sessionTokenBackendDomain) || !!response.headers[\"x-supertokens-xhr-intercepted\"];\n            } catch (err) {\n              if (err.message === \"Please provide a valid domain name\") {\n                (0, logger_1.logDebugMessage)(\"responseInterceptor: Trying shouldDoInterceptionBasedOnUrl with location.origin\");\n                // .origin gives the port as well..\n                doNotDoInterception = !fetch_1.default.recipeImpl.shouldDoInterceptionBasedOnUrl(windowHandler_1.default.getReferenceOrThrow().windowHandler.location.getOrigin(), fetch_1.default.config.apiDomain, fetch_1.default.config.sessionTokenBackendDomain) || !!response.headers[\"x-supertokens-xhr-intercepted\"];\n              } else {\n                throw err;\n              }\n            }\n            (0, logger_1.logDebugMessage)(\"responseInterceptor: Value of doNotDoInterception: \" + doNotDoInterception);\n            if (doNotDoInterception) {\n              (0, logger_1.logDebugMessage)(\"responseInterceptor: Returning without interception\");\n              // this check means that if you are using axios via inteceptor, then we only do the refresh steps if you are calling your APIs.\n              return [2 /*return*/, response];\n            }\n            (0, logger_1.logDebugMessage)(\"responseInterceptor: Interception started\");\n            processState_1.ProcessState.getInstance().addState(processState_1.PROCESS_STATE.CALLING_INTERCEPTION_RESPONSE);\n            return [4 /*yield*/, (0, fetch_1.getLocalSessionState)(false)];\n          case 1:\n            preRequestLSS = _a.sent();\n            return [4 /*yield*/, saveTokensFromHeaders(response)];\n          case 2:\n            _a.sent();\n            (0, fetch_1.fireSessionUpdateEventsIfNecessary)(preRequestLSS.status === \"EXISTS\", response.status, response.headers[\"front-token\"]);\n            if (!(response.status === fetch_1.default.config.sessionExpiredStatusCode)) return [3 /*break*/, 3];\n            (0, logger_1.logDebugMessage)(\"responseInterceptor: Status code is: \" + response.status);\n            config = response.config;\n            return [2 /*return*/, AuthHttpRequest.doRequest(function (config) {\n              // we create an instance since we don't want to intercept this.\n              // const instance = axios.create();\n              // return instance(config);\n              return axiosInstance(config);\n            }, config, url, response, undefined, true)];\n          case 3:\n            if (!(response.status === fetch_1.default.config.invalidClaimStatusCode)) return [3 /*break*/, 5];\n            // only fire event if body is defined.\n            return [4 /*yield*/, (0, fetch_1.onInvalidClaimResponse)(response)];\n          case 4:\n            // only fire event if body is defined.\n            _a.sent();\n            _a.label = 5;\n          case 5:\n            return [2 /*return*/, response];\n        }\n      });\n    });\n  };\n}\nexports.responseInterceptor = responseInterceptor;\nfunction responseErrorInterceptor(axiosInstance) {\n  var _this = this;\n  return function (error) {\n    return __awaiter(_this, void 0, void 0, function () {\n      var config;\n      return __generator(this, function (_a) {\n        switch (_a.label) {\n          case 0:\n            (0, logger_1.logDebugMessage)(\"responseErrorInterceptor: called\");\n            (0, logger_1.logDebugMessage)(\"responseErrorInterceptor: already intercepted: \" + (error.response && error.response.headers[\"x-supertokens-xhr-intercepted\"]));\n            if (error.response === undefined || error.response.headers[\"x-supertokens-xhr-intercepted\"]) {\n              throw error;\n            }\n            if (!(error.response !== undefined && error.response.status === fetch_1.default.config.sessionExpiredStatusCode)) return [3 /*break*/, 1];\n            (0, logger_1.logDebugMessage)(\"responseErrorInterceptor: Status code is: \" + error.response.status);\n            config = error.config;\n            return [2 /*return*/, AuthHttpRequest.doRequest(function (config) {\n              // we create an instance since we don't want to intercept this.\n              // const instance = axios.create();\n              // return instance(config);\n              return axiosInstance(config);\n            }, config, getUrlFromConfig(config), undefined, error, true)];\n          case 1:\n            if (!(error.response !== undefined && error.response.status === fetch_1.default.config.invalidClaimStatusCode)) return [3 /*break*/, 3];\n            return [4 /*yield*/, (0, fetch_1.onInvalidClaimResponse)(error.response)];\n          case 2:\n            _a.sent();\n            _a.label = 3;\n          case 3:\n            throw error;\n        }\n      });\n    });\n  };\n}\nexports.responseErrorInterceptor = responseErrorInterceptor;\n/**\n * @class AuthHttpRequest\n * @description wrapper for common http methods.\n */\nvar AuthHttpRequest = /** @class */function () {\n  function AuthHttpRequest() {}\n  var _a;\n  _a = AuthHttpRequest;\n  /**\n   * @description sends the actual http request and returns a response if successful/\n   * If not successful due to session expiry reasons, it\n   * attempts to call the refresh token API and if that is successful, calls this API again.\n   * @throws Error\n   */\n  AuthHttpRequest.doRequest = function (httpCall, config, url, prevResponse, prevError, viaInterceptor) {\n    if (viaInterceptor === void 0) {\n      viaInterceptor = false;\n    }\n    return __awaiter(void 0, void 0, void 0, function () {\n      var doNotDoInterception, returnObj, preRequestLSS, configWithAntiCsrf, antiCsrfToken, transferMethod, localPrevError, localPrevResponse, response, _b, err_1, response, errorMessage, refreshResult, _c;\n      return __generator(_a, function (_d) {\n        switch (_d.label) {\n          case 0:\n            if (!fetch_1.default.initCalled) {\n              throw Error(\"init function not called\");\n            }\n            (0, logger_1.logDebugMessage)(\"doRequest: called\");\n            doNotDoInterception = false;\n            try {\n              doNotDoInterception = typeof url === \"string\" && !fetch_1.default.recipeImpl.shouldDoInterceptionBasedOnUrl(url, fetch_1.default.config.apiDomain, fetch_1.default.config.sessionTokenBackendDomain) && viaInterceptor;\n            } catch (err) {\n              if (err.message === \"Please provide a valid domain name\") {\n                (0, logger_1.logDebugMessage)(\"doRequest: Trying shouldDoInterceptionBasedOnUrl with location.origin\");\n                // .origin gives the port as well..\n                doNotDoInterception = !fetch_1.default.recipeImpl.shouldDoInterceptionBasedOnUrl(windowHandler_1.default.getReferenceOrThrow().windowHandler.location.getOrigin(), fetch_1.default.config.apiDomain, fetch_1.default.config.sessionTokenBackendDomain) && viaInterceptor;\n              } else {\n                throw err;\n              }\n            }\n            (0, logger_1.logDebugMessage)(\"doRequest: Value of doNotDoInterception: \" + doNotDoInterception);\n            if (!doNotDoInterception) return [3 /*break*/, 2];\n            (0, logger_1.logDebugMessage)(\"doRequest: Returning without interception\");\n            if (prevError !== undefined) {\n              throw prevError;\n            } else if (prevResponse !== undefined) {\n              return [2 /*return*/, prevResponse];\n            }\n            return [4 /*yield*/, httpCall(config)];\n          case 1:\n            return [2 /*return*/, _d.sent()];\n          case 2:\n            (0, logger_1.logDebugMessage)(\"doRequest: Interception started\");\n            return [4 /*yield*/, removeAuthHeaderIfMatchesLocalToken(config)];\n          case 3:\n            config = _d.sent();\n            returnObj = undefined;\n            _d.label = 4;\n          case 4:\n            if (!true) return [3 /*break*/, 28];\n            return [4 /*yield*/, (0, fetch_1.getLocalSessionState)(true)];\n          case 5:\n            preRequestLSS = _d.sent();\n            configWithAntiCsrf = config;\n            if (!(preRequestLSS.status === \"EXISTS\")) return [3 /*break*/, 7];\n            return [4 /*yield*/, fetch_1.AntiCsrfToken.getToken(preRequestLSS.lastAccessTokenUpdate)];\n          case 6:\n            antiCsrfToken = _d.sent();\n            if (antiCsrfToken !== undefined) {\n              (0, logger_1.logDebugMessage)(\"doRequest: Adding anti-csrf token to request\");\n              configWithAntiCsrf = __assign(__assign({}, configWithAntiCsrf), {\n                headers: configWithAntiCsrf === undefined ? {\n                  \"anti-csrf\": antiCsrfToken\n                } : __assign(__assign({}, configWithAntiCsrf.headers), {\n                  \"anti-csrf\": antiCsrfToken\n                })\n              });\n            }\n            _d.label = 7;\n          case 7:\n            if (fetch_1.default.config.autoAddCredentials && configWithAntiCsrf.withCredentials === undefined) {\n              (0, logger_1.logDebugMessage)(\"doRequest: Adding credentials include\");\n              configWithAntiCsrf = __assign(__assign({}, configWithAntiCsrf), {\n                withCredentials: true\n              });\n            }\n            // adding rid for anti-csrf protection: Anti-csrf via custom header\n            (0, logger_1.logDebugMessage)(\"doRequest: Adding rid header: anti-csrf (May get overriden by user's rid)\");\n            configWithAntiCsrf = __assign(__assign({}, configWithAntiCsrf), {\n              headers: configWithAntiCsrf === undefined ? {\n                rid: \"anti-csrf\"\n              } : __assign({\n                rid: \"anti-csrf\"\n              }, configWithAntiCsrf.headers)\n            });\n            transferMethod = fetch_1.default.config.tokenTransferMethod;\n            (0, logger_1.logDebugMessage)(\"doRequest: Adding st-auth-mode header: \" + transferMethod);\n            configWithAntiCsrf.headers[\"st-auth-mode\"] = transferMethod;\n            return [4 /*yield*/, setAuthorizationHeaderIfRequired(configWithAntiCsrf)];\n          case 8:\n            _d.sent();\n            _d.label = 9;\n          case 9:\n            _d.trys.push([9, 14,, 27]);\n            localPrevError = prevError;\n            localPrevResponse = prevResponse;\n            prevError = undefined;\n            prevResponse = undefined;\n            if (localPrevError !== undefined) {\n              (0, logger_1.logDebugMessage)(\"doRequest: Not making call because localPrevError is not undefined\");\n              throw localPrevError;\n            }\n            if (localPrevResponse !== undefined) {\n              (0, logger_1.logDebugMessage)(\"doRequest: Not making call because localPrevResponse is not undefined\");\n            } else {\n              (0, logger_1.logDebugMessage)(\"doRequest: Making user's http call\");\n            }\n            if (!(localPrevResponse === undefined)) return [3 /*break*/, 11];\n            return [4 /*yield*/, httpCall(configWithAntiCsrf)];\n          case 10:\n            _b = _d.sent();\n            return [3 /*break*/, 12];\n          case 11:\n            _b = localPrevResponse;\n            _d.label = 12;\n          case 12:\n            response = _b;\n            // NOTE: No need to check for unauthorized response status here for session refresh,\n            // as we only reach this point on a successful response. Axios handles error responses\n            // by throwing an error, which is handled in the catch block.\n            (0, logger_1.logDebugMessage)(\"doRequest: User's http call ended\");\n            return [4 /*yield*/, saveTokensFromHeaders(response)];\n          case 13:\n            _d.sent();\n            (0, fetch_1.fireSessionUpdateEventsIfNecessary)(preRequestLSS.status === \"EXISTS\", response.status, response.headers[\"front-token\"]);\n            return [2 /*return*/, response];\n          case 14:\n            err_1 = _d.sent();\n            response = err_1.response;\n            if (!(response !== undefined)) return [3 /*break*/, 25];\n            return [4 /*yield*/, saveTokensFromHeaders(response)];\n          case 15:\n            _d.sent();\n            (0, fetch_1.fireSessionUpdateEventsIfNecessary)(preRequestLSS.status === \"EXISTS\", response.status, response.headers[\"front-token\"]);\n            if (!(response.status === fetch_1.default.config.sessionExpiredStatusCode)) return [3 /*break*/, 21];\n            (0, logger_1.logDebugMessage)(\"doRequest: Status code is: \" + response.status);\n            /**\n             * An API may return a 401 error response even with a valid session, causing a session refresh loop in the interceptor.\n             * To prevent this infinite loop, we break out of the loop after retrying the original request a specified number of times.\n             * The maximum number of retry attempts is defined by maxRetryAttemptsForSessionRefresh config variable.\n             */\n            if (hasExceededMaxSessionRefreshAttempts(config)) {\n              (0, logger_1.logDebugMessage)(\"doRequest: Maximum session refresh attempts reached. sessionRefreshAttempts: \".concat(config.__supertokensSessionRefreshAttempts, \", maxRetryAttemptsForSessionRefresh: \").concat(fetch_1.default.config.maxRetryAttemptsForSessionRefresh));\n              errorMessage = \"Received a 401 response from \".concat(url, \". Attempted to refresh the session and retry the request with the updated session tokens \").concat(fetch_1.default.config.maxRetryAttemptsForSessionRefresh, \" times, but each attempt resulted in a 401 error. The maximum session refresh limit has been reached. Please investigate your API. To increase the session refresh attempts, update maxRetryAttemptsForSessionRefresh in the config.\");\n              console.error(errorMessage);\n              throw new Error(errorMessage);\n            }\n            return [4 /*yield*/, (0, fetch_1.onUnauthorisedResponse)(preRequestLSS)];\n          case 16:\n            refreshResult = _d.sent();\n            incrementSessionRefreshAttemptCount(config);\n            (0, logger_1.logDebugMessage)(\"doRequest: sessionRefreshAttempts: \" + config.__supertokensSessionRefreshAttempts);\n            if (!(refreshResult.result !== \"RETRY\")) return [3 /*break*/, 20];\n            (0, logger_1.logDebugMessage)(\"doRequest: Not retrying original request\");\n            if (!(refreshResult.error !== undefined)) return [3 /*break*/, 18];\n            return [4 /*yield*/, (0, axiosError_1.createAxiosErrorFromFetchResp)(refreshResult.error)];\n          case 17:\n            _c = _d.sent();\n            return [3 /*break*/, 19];\n          case 18:\n            _c = err_1;\n            _d.label = 19;\n          case 19:\n            // Returning refreshResult.error as an Axios Error if we attempted a refresh\n            // Returning the original error if we did not attempt refreshing\n            returnObj = _c;\n            return [3 /*break*/, 28];\n          case 20:\n            (0, logger_1.logDebugMessage)(\"doRequest: Retrying original request\");\n            return [3 /*break*/, 24];\n          case 21:\n            if (!(response.status === fetch_1.default.config.invalidClaimStatusCode)) return [3 /*break*/, 23];\n            return [4 /*yield*/, (0, fetch_1.onInvalidClaimResponse)(response)];\n          case 22:\n            _d.sent();\n            _d.label = 23;\n          case 23:\n            throw err_1;\n          case 24:\n            return [3 /*break*/, 26];\n          case 25:\n            throw err_1;\n          case 26:\n            return [3 /*break*/, 27];\n          case 27:\n            return [3 /*break*/, 4];\n          case 28:\n            // if it comes here, means we called break. which happens only if we have logged out.\n            // which means it's a 401, so we throw\n            throw returnObj;\n        }\n      });\n    });\n  };\n  return AuthHttpRequest;\n}();\nexports.default = AuthHttpRequest;\nfunction setAuthorizationHeaderIfRequired(requestConfig) {\n  return __awaiter(this, void 0, void 0, function () {\n    var accessToken, refreshToken;\n    return __generator(this, function (_b) {\n      switch (_b.label) {\n        case 0:\n          if (requestConfig.headers === undefined) {\n            // This is makes TS happy\n            requestConfig.headers = {};\n          }\n          (0, logger_1.logDebugMessage)(\"setAuthorizationHeaderIfRequired: adding existing tokens as header\");\n          return [4 /*yield*/, (0, fetch_1.getTokenForHeaderAuth)(\"access\")];\n        case 1:\n          accessToken = _b.sent();\n          return [4 /*yield*/, (0, fetch_1.getTokenForHeaderAuth)(\"refresh\")];\n        case 2:\n          refreshToken = _b.sent();\n          // We don't add the refresh token because that's only required by the refresh call which is done with fetch\n          // Still, we only add the Authorization header if both are present, because we are planning to add an option to expose the\n          // access token to the frontend while using cookie based auth - so that users can get the access token to use\n          if (accessToken !== undefined && refreshToken !== undefined) {\n            if (requestConfig.headers[\"Authorization\"] !== undefined || requestConfig.headers[\"authorization\"] !== undefined) {\n              (0, logger_1.logDebugMessage)(\"setAuthorizationHeaderIfRequired: Authorization header defined by the user, not adding\");\n            } else {\n              (0, logger_1.logDebugMessage)(\"setAuthorizationHeaderIfRequired: added authorization header\");\n              requestConfig.headers = __assign(__assign({}, requestConfig.headers), {\n                Authorization: \"Bearer \".concat(accessToken)\n              });\n              requestConfig.__supertokensAddedAuthHeader = true;\n            }\n          } else {\n            (0, logger_1.logDebugMessage)(\"setAuthorizationHeaderIfRequired: token for header based auth not found\");\n          }\n          return [2 /*return*/];\n      }\n    });\n  });\n}\nfunction saveTokensFromHeaders(response) {\n  return __awaiter(this, void 0, void 0, function () {\n    var refreshToken, accessToken, frontToken, responseHeaders_1, antiCsrfToken, tok;\n    return __generator(this, function (_b) {\n      switch (_b.label) {\n        case 0:\n          (0, logger_1.logDebugMessage)(\"saveTokensFromHeaders: Saving updated tokens from the response\");\n          refreshToken = response.headers[\"st-refresh-token\"];\n          if (!(refreshToken !== undefined)) return [3 /*break*/, 2];\n          (0, logger_1.logDebugMessage)(\"saveTokensFromHeaders: saving new refresh token\");\n          return [4 /*yield*/, (0, fetch_1.setToken)(\"refresh\", refreshToken)];\n        case 1:\n          _b.sent();\n          _b.label = 2;\n        case 2:\n          accessToken = response.headers[\"st-access-token\"];\n          if (!(accessToken !== undefined)) return [3 /*break*/, 4];\n          (0, logger_1.logDebugMessage)(\"saveTokensFromHeaders: saving new access token\");\n          return [4 /*yield*/, (0, fetch_1.setToken)(\"access\", accessToken)];\n        case 3:\n          _b.sent();\n          _b.label = 4;\n        case 4:\n          frontToken = response.headers[\"front-token\"];\n          if (!(frontToken !== undefined)) return [3 /*break*/, 6];\n          (0, logger_1.logDebugMessage)(\"doRequest: Setting sFrontToken: \" + frontToken);\n          return [4 /*yield*/, fetch_1.FrontToken.setItem(frontToken)];\n        case 5:\n          _b.sent();\n          responseHeaders_1 = new Headers();\n          Object.entries(response.headers).forEach(function (_b) {\n            var key = _b[0],\n              value = _b[1];\n            Array.isArray(value) ? value.forEach(function (item) {\n              return responseHeaders_1.append(key, item);\n            }) : responseHeaders_1.append(key, value);\n          });\n          (0, fetch_1.updateClockSkewUsingFrontToken)({\n            frontToken: frontToken,\n            responseHeaders: responseHeaders_1\n          });\n          _b.label = 6;\n        case 6:\n          antiCsrfToken = response.headers[\"anti-csrf\"];\n          if (!(antiCsrfToken !== undefined)) return [3 /*break*/, 9];\n          return [4 /*yield*/, (0, fetch_1.getLocalSessionState)(false)];\n        case 7:\n          tok = _b.sent();\n          if (!(tok.status === \"EXISTS\")) return [3 /*break*/, 9];\n          (0, logger_1.logDebugMessage)(\"doRequest: Setting anti-csrf token\");\n          return [4 /*yield*/, fetch_1.AntiCsrfToken.setItem(tok.lastAccessTokenUpdate, antiCsrfToken)];\n        case 8:\n          _b.sent();\n          _b.label = 9;\n        case 9:\n          return [2 /*return*/];\n      }\n    });\n  });\n}\nfunction removeAuthHeaderIfMatchesLocalToken(config) {\n  return __awaiter(this, void 0, void 0, function () {\n    var accessToken, refreshToken, authHeader, res;\n    return __generator(this, function (_b) {\n      switch (_b.label) {\n        case 0:\n          return [4 /*yield*/, (0, fetch_1.getTokenForHeaderAuth)(\"access\")];\n        case 1:\n          accessToken = _b.sent();\n          return [4 /*yield*/, (0, fetch_1.getTokenForHeaderAuth)(\"refresh\")];\n        case 2:\n          refreshToken = _b.sent();\n          authHeader = config.headers.Authorization || config.headers.authorization;\n          if (accessToken !== undefined && refreshToken !== undefined) {\n            if (authHeader === \"Bearer \".concat(accessToken) || \"__supertokensAddedAuthHeader\" in config) {\n              // We are ignoring the Authorization header set by the user in this case, because it would cause issues\n              // If we do not ignore this, then this header would be used even if the request is being retried after a refresh, even though it contains an outdated access token.\n              // This causes an infinite refresh loop.\n              (0, logger_1.logDebugMessage)(\"removeAuthHeaderIfMatchesLocalToken: Removing Authorization from user provided headers because it contains our access token\");\n              res = __assign(__assign({}, config), {\n                headers: __assign({}, config.headers)\n              });\n              delete res.headers.authorization;\n              delete res.headers.Authorization;\n              return [2 /*return*/, res];\n            }\n          }\n          return [2 /*return*/, config];\n      }\n    });\n  });\n}", "\"use strict\";\n\n/* Copyright (c) 2022, VRAI Labs and/or its affiliates. All rights reserved.\n *\n * This software is licensed under the Apache License, Version 2.0 (the\n * \"License\") as published by the Apache Software Foundation.\n *\n * You may not use this file except in compliance with the License. You may\n * obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\n * License for the specific language governing permissions and limitations\n * under the License.\n */\nvar __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n    };\n    return extendStatics(d, b);\n  };\n  return function (d, b) {\n    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n    extendStatics(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.STGeneralError = void 0;\n/**\n * This error usually indicates that the API exposed by the backend SDKs responded\n * with `{status: \"GENERAL_ERROR\"}`. This should be used to show errors to the user\n * in your frontend application.\n */\nvar STGeneralError = /** @class */function (_super) {\n  __extends(STGeneralError, _super);\n  function STGeneralError(message) {\n    var _this = _super.call(this, message) || this;\n    _this.isSuperTokensGeneralError = true;\n    return _this;\n  }\n  STGeneralError.isThisError = function (err) {\n    return err.isSuperTokensGeneralError === true;\n  };\n  return STGeneralError;\n}(Error);\nexports.STGeneralError = STGeneralError;", "\"use strict\";\n\n/* Copyright (c) 2020, VRAI Labs and/or its affiliates. All rights reserved.\n *\n * This software is licensed under the Apache License, Version 2.0 (the\n * \"License\") as published by the Apache Software Foundation.\n *\n * You may not use this file except in compliance with the License. You may\n * obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\n * License for the specific language governing permissions and limitations\n * under the License.\n */\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nvar __generator = this && this.__generator || function (thisArg, body) {\n  var _ = {\n      label: 0,\n      sent: function () {\n        if (t[0] & 1) throw t[1];\n        return t[1];\n      },\n      trys: [],\n      ops: []\n    },\n    f,\n    y,\n    t,\n    g;\n  return g = {\n    next: verb(0),\n    throw: verb(1),\n    return: verb(2)\n  }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function () {\n    return this;\n  }), g;\n  function verb(n) {\n    return function (v) {\n      return step([n, v]);\n    };\n  }\n  function step(op) {\n    if (f) throw new TypeError(\"Generator is already executing.\");\n    while (_) try {\n      if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n      if (y = 0, t) op = [op[0] & 2, t.value];\n      switch (op[0]) {\n        case 0:\n        case 1:\n          t = op;\n          break;\n        case 4:\n          _.label++;\n          return {\n            value: op[1],\n            done: false\n          };\n        case 5:\n          _.label++;\n          y = op[1];\n          op = [0];\n          continue;\n        case 7:\n          op = _.ops.pop();\n          _.trys.pop();\n          continue;\n        default:\n          if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {\n            _ = 0;\n            continue;\n          }\n          if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {\n            _.label = op[1];\n            break;\n          }\n          if (op[0] === 6 && _.label < t[1]) {\n            _.label = t[1];\n            t = op;\n            break;\n          }\n          if (t && _.label < t[2]) {\n            _.label = t[2];\n            _.ops.push(op);\n            break;\n          }\n          if (t[2]) _.ops.pop();\n          _.trys.pop();\n          continue;\n      }\n      op = body.call(thisArg, _);\n    } catch (e) {\n      op = [6, e];\n      y = 0;\n    } finally {\n      f = t = 0;\n    }\n    if (op[0] & 5) throw op[1];\n    return {\n      value: op[0] ? op[1] : void 0,\n      done: true\n    };\n  }\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.addInterceptorsToXMLHttpRequest = void 0;\nvar fetch_1 = require(\"./fetch\");\nvar logger_1 = require(\"./logger\");\nvar windowHandler_1 = require(\"./utils/windowHandler\");\nvar processState_1 = require(\"./processState\");\nvar XHR_EVENTS = [\"readystatechange\", \"abort\", \"error\", \"load\", \"loadend\", \"loadstart\", \"progress\", \"timeout\"];\nfunction addInterceptorsToXMLHttpRequest() {\n  var firstEventLoopDone = new Promise(function (res) {\n    return setTimeout(res, 0);\n  });\n  var oldXMLHttpRequest = XMLHttpRequest;\n  (0, logger_1.logDebugMessage)(\"addInterceptorsToXMLHttpRequest called\");\n  // create XMLHttpRequest proxy object\n  // define constructor for my proxy object\n  XMLHttpRequest = function () {\n    var actual = new oldXMLHttpRequest();\n    var self = this;\n    var listOfFunctionCallsInProxy = [];\n    var requestHeaders = [];\n    var customGetterValues = {};\n    var customResponseHeaders;\n    var eventHandlers = new Map();\n    var delayedQueue = firstEventLoopDone;\n    function delayIfNecessary(cb) {\n      delayedQueue = delayedQueue.finally(function () {\n        var _a;\n        return (_a = cb()) === null || _a === void 0 ? void 0 : _a.catch(function (err) {\n          // Call the onerror handler to ensure XHR throws this error.\n          var ev = new ProgressEvent(\"error\");\n          ev.error = err;\n          if (self.onerror !== undefined && self.onerror !== null) {\n            self.onerror(ev);\n          }\n          redispatchEvent(\"error\", ev);\n        });\n      });\n    }\n    // We define these during open\n    // let method: string = \"\";\n    var url = \"\";\n    var doNotDoInterception = false;\n    var preRequestLSS = undefined;\n    var body;\n    var sessionRefreshAttempts = 0;\n    // we do not provide onerror cause that is fired only on\n    // network level failures and nothing else. If a status code is > 400,\n    // then onload and onreadystatechange are called.\n    // Setting up props (event handlers) that we use in event handlers\n    // These require processing the response (and possibly retrying) before they are forwarded to the user\n    self.onload = null;\n    self.onreadystatechange = null;\n    self.onloadend = null;\n    // TODO: add support for other event listener options\n    // https://developer.mozilla.org/en-US/docs/Web/API/EventTarget/addEventListener#parameters\n    self.addEventListener = function (type, listener, _options) {\n      var handlers = eventHandlers.get(type);\n      if (handlers === undefined) {\n        handlers = new Set();\n        eventHandlers.set(type, handlers);\n      }\n      handlers.add(listener);\n    };\n    self.removeEventListener = function (type, listener) {\n      var handlers = eventHandlers.get(type);\n      if (handlers === undefined) {\n        handlers = new Set();\n        eventHandlers.set(type, handlers);\n      }\n      handlers.delete(listener);\n    };\n    function redispatchEvent(name, ev) {\n      var handlers = eventHandlers.get(name);\n      (0, logger_1.logDebugMessage)(\"XHRInterceptor dispatching \".concat(ev.type, \" to \").concat(handlers ? handlers.size : 0, \" listeners\"));\n      if (handlers) {\n        Array.from(handlers).forEach(function (handler) {\n          return handler.apply(self, [ev]);\n        });\n      }\n    }\n    function handleRetryPostRefreshing() {\n      return __awaiter(this, void 0, void 0, function () {\n        var errorMessage, refreshResult, retryXhr;\n        return __generator(this, function (_a) {\n          switch (_a.label) {\n            case 0:\n              if (preRequestLSS === undefined) {\n                throw new Error(\"Should never come here..\");\n              }\n              (0, logger_1.logDebugMessage)(\"XHRInterceptor.handleRetryPostRefreshing: preRequestLSS \" + preRequestLSS.status);\n              /**\n               * An API may return a 401 error response even with a valid session, causing a session refresh loop in the interceptor.\n               * To prevent this infinite loop, we break out of the loop after retrying the original request a specified number of times.\n               * The maximum number of retry attempts is defined by maxRetryAttemptsForSessionRefresh config variable.\n               */\n              if (sessionRefreshAttempts >= fetch_1.default.config.maxRetryAttemptsForSessionRefresh) {\n                (0, logger_1.logDebugMessage)(\"XHRInterceptor.handleRetryPostRefreshing: Maximum session refresh attempts reached. sessionRefreshAttempts: \".concat(sessionRefreshAttempts, \", maxRetryAttemptsForSessionRefresh: \").concat(fetch_1.default.config.maxRetryAttemptsForSessionRefresh));\n                // We set these values to prevent XHR from returning any response in this case. This simulates a network error in XHR.\n                customGetterValues[\"status\"] = 0;\n                customGetterValues[\"statusText\"] = \"\";\n                customGetterValues[\"responseType\"] = \"\";\n                errorMessage = \"Received a 401 response from \".concat(url, \". Attempted to refresh the session and retry the request with the updated session tokens \").concat(fetch_1.default.config.maxRetryAttemptsForSessionRefresh, \" times, but each attempt resulted in a 401 error. The maximum session refresh limit has been reached. Please investigate your API. To increase the session refresh attempts, update maxRetryAttemptsForSessionRefresh in the config.\");\n                console.error(errorMessage);\n                throw new Error(errorMessage);\n              }\n              return [4 /*yield*/, (0, fetch_1.onUnauthorisedResponse)(preRequestLSS)];\n            case 1:\n              refreshResult = _a.sent();\n              sessionRefreshAttempts++;\n              (0, logger_1.logDebugMessage)(\"XHRInterceptor.handleRetryPostRefreshing: sessionRefreshAttempts: \" + sessionRefreshAttempts);\n              if (refreshResult.result !== \"RETRY\") {\n                (0, logger_1.logDebugMessage)(\"XHRInterceptor.handleRetryPostRefreshing: Not retrying original request \" + !!refreshResult.error);\n                if (refreshResult.error !== undefined) {\n                  // this will cause the responseText of the self to be updated\n                  // to the error message and make the status code the same as\n                  // what the error's status code is.\n                  throw refreshResult.error;\n                }\n                // it can come here if refreshResult.result is SESSION_EXPIRED.\n                // in that case, the status of self is already 401. So we let it\n                // pass through.\n                return [2 /*return*/, true];\n              }\n              (0, logger_1.logDebugMessage)(\"XHRInterceptor.handleRetryPostRefreshing: Retrying original request\");\n              retryXhr = new oldXMLHttpRequest();\n              setUpXHR(self, retryXhr, true);\n              // this also calls the send function with the appropriate body\n              listOfFunctionCallsInProxy.forEach(function (i) {\n                i(retryXhr);\n              });\n              sendXHR(retryXhr, body);\n              return [2 /*return*/, false];\n          }\n        });\n      });\n    }\n    function handleResponse(xhr) {\n      return __awaiter(this, void 0, void 0, function () {\n        var status_1, headers, err_1, resp, ev;\n        return __generator(this, function (_a) {\n          switch (_a.label) {\n            case 0:\n              if (doNotDoInterception) {\n                (0, logger_1.logDebugMessage)(\"XHRInterceptor.handleResponse: Returning without interception\");\n                return [2 /*return*/, true];\n              }\n              _a.label = 1;\n            case 1:\n              _a.trys.push([1, 7,, 11]);\n              (0, logger_1.logDebugMessage)(\"XHRInterceptor.handleResponse: Interception started\");\n              processState_1.ProcessState.getInstance().addState(processState_1.PROCESS_STATE.CALLING_INTERCEPTION_RESPONSE);\n              status_1 = xhr.status;\n              headers = getResponseHeadersFromXHR(xhr);\n              return [4 /*yield*/, saveTokensFromHeaders(headers)];\n            case 2:\n              _a.sent();\n              (0, fetch_1.fireSessionUpdateEventsIfNecessary)(preRequestLSS.status === \"EXISTS\", status_1, headers.get(\"front-token\"));\n              if (!(status_1 === fetch_1.default.config.sessionExpiredStatusCode)) return [3 /*break*/, 4];\n              (0, logger_1.logDebugMessage)(\"responseInterceptor: Status code is: \" + status_1);\n              return [4 /*yield*/, handleRetryPostRefreshing()];\n            case 3:\n              return [2 /*return*/, _a.sent()];\n            case 4:\n              if (!(status_1 === fetch_1.default.config.invalidClaimStatusCode)) return [3 /*break*/, 6];\n              return [4 /*yield*/, (0, fetch_1.onInvalidClaimResponse)({\n                data: xhr.responseText\n              })];\n            case 5:\n              _a.sent();\n              _a.label = 6;\n            case 6:\n              return [2 /*return*/, true];\n            case 7:\n              err_1 = _a.sent();\n              (0, logger_1.logDebugMessage)(\"XHRInterceptor.handleResponse: caught error\");\n              if (!(err_1.status !== undefined)) return [3 /*break*/, 9];\n              return [4 /*yield*/, getXMLHttpStatusAndResponseTextFromFetchResponse(err_1)];\n            case 8:\n              resp = _a.sent();\n              customGetterValues[\"status\"] = resp.status;\n              customGetterValues[\"statusText\"] = resp.statusText;\n              customGetterValues[\"responseType\"] = resp.responseType;\n              customResponseHeaders = resp.headers;\n              if (resp.responseType === \"json\") {\n                try {\n                  customGetterValues[\"response\"] = JSON.parse(resp.responseText);\n                } catch (_b) {\n                  customGetterValues[\"response\"] = resp.responseText;\n                }\n              } else {\n                customGetterValues[\"response\"] = resp.responseText;\n              }\n              customGetterValues[\"responseText\"] = resp.responseText;\n              return [3 /*break*/, 10];\n            case 9:\n              ev = new ProgressEvent(\"error\");\n              ev.error = err_1;\n              if (self.onerror !== undefined && self.onerror !== null) {\n                self.onerror(ev);\n              }\n              redispatchEvent(\"error\", ev);\n              _a.label = 10;\n            case 10:\n              return [2 /*return*/, true];\n            case 11:\n              return [2 /*return*/];\n          }\n        });\n      });\n    }\n    self.open = function (_, u) {\n      (0, logger_1.logDebugMessage)(\"XHRInterceptor.open called\");\n      var args = arguments;\n      // method = m;\n      url = u;\n      try {\n        doNotDoInterception = typeof url === \"string\" && !fetch_1.default.recipeImpl.shouldDoInterceptionBasedOnUrl(url, fetch_1.default.config.apiDomain, fetch_1.default.config.sessionTokenBackendDomain) || typeof url !== \"string\" && !fetch_1.default.recipeImpl.shouldDoInterceptionBasedOnUrl(url.toString(), fetch_1.default.config.apiDomain, fetch_1.default.config.sessionTokenBackendDomain);\n      } catch (err) {\n        if (err.message === \"Please provide a valid domain name\") {\n          (0, logger_1.logDebugMessage)(\"XHRInterceptor.open: Trying shouldDoInterceptionBasedOnUrl with location.origin\");\n          // .origin gives the port as well..\n          doNotDoInterception = !fetch_1.default.recipeImpl.shouldDoInterceptionBasedOnUrl(windowHandler_1.default.getReferenceOrThrow().windowHandler.location.getOrigin(), fetch_1.default.config.apiDomain, fetch_1.default.config.sessionTokenBackendDomain);\n        } else {\n          throw err;\n        }\n      }\n      delayIfNecessary(function () {\n        listOfFunctionCallsInProxy.push(function (xhr) {\n          xhr.open.apply(xhr, args);\n        });\n        // here we use the apply syntax cause there are other optional args that\n        // can be passed by the user.\n        actual.open.apply(actual, args);\n      });\n    };\n    self.send = function (inputBody) {\n      body = inputBody;\n      sendXHR(actual, body);\n    };\n    self.setRequestHeader = function (name, value) {\n      var _this = this;\n      (0, logger_1.logDebugMessage)(\"XHRInterceptor.setRequestHeader: Called with \".concat(name));\n      if (doNotDoInterception) {\n        delayIfNecessary(function () {\n          return actual.setRequestHeader(name, value);\n        });\n        return;\n      }\n      // We need to do this, because if there is another interceptor wrapping this (e.g.: the axios interceptor)\n      // then the anti-csrf token they add would be concatenated to the anti-csrf token added by this interceptor\n      if (name === \"anti-csrf\") {\n        return;\n      }\n      delayIfNecessary(function () {\n        return __awaiter(_this, void 0, void 0, function () {\n          var accessToken, refreshToken;\n          return __generator(this, function (_a) {\n            switch (_a.label) {\n              case 0:\n                if (!(name.toLowerCase() === \"authorization\")) return [3 /*break*/, 3];\n                (0, logger_1.logDebugMessage)(\"XHRInterceptor.setRequestHeader: checking if user provided auth header matches local token\");\n                return [4 /*yield*/, (0, fetch_1.getTokenForHeaderAuth)(\"access\")];\n              case 1:\n                accessToken = _a.sent();\n                return [4 /*yield*/, (0, fetch_1.getTokenForHeaderAuth)(\"refresh\")];\n              case 2:\n                refreshToken = _a.sent();\n                if (accessToken !== undefined && refreshToken !== undefined && value === \"Bearer \".concat(accessToken)) {\n                  // We are ignoring the Authorization header set by the user in this case, because it would cause issues\n                  // If we do not ignore this, then this header would be used even if the request is being retried after a refresh, even though it contains an outdated access token.\n                  // This causes an infinite refresh loop.\n                  (0, logger_1.logDebugMessage)(\"XHRInterceptor.setRequestHeader: skipping Authorization from user provided headers because it contains our access token\");\n                  return [2 /*return*/];\n                }\n                _a.label = 3;\n              case 3:\n                listOfFunctionCallsInProxy.push(function (xhr) {\n                  xhr.setRequestHeader(name, value);\n                });\n                // The original version \"combines\" headers according to MDN.\n                requestHeaders.push({\n                  name: name,\n                  value: value\n                });\n                actual.setRequestHeader(name, value);\n                return [2 /*return*/];\n            }\n          });\n        });\n      });\n    };\n    var copiedProps = undefined;\n    setUpXHR(self, actual, false);\n    function setUpXHR(self, xhr, isRetry) {\n      var responseProcessed;\n      var delayedEvents = [\"load\", \"loadend\", \"readystatechange\"];\n      (0, logger_1.logDebugMessage)(\"XHRInterceptor.setUpXHR called\");\n      var _loop_1 = function (name_1) {\n        (0, logger_1.logDebugMessage)(\"XHRInterceptor added listener for event \".concat(name_1));\n        xhr.addEventListener(name_1, function (ev) {\n          (0, logger_1.logDebugMessage)(\"XHRInterceptor got event \".concat(name_1));\n          if (!delayedEvents.includes(name_1)) {\n            redispatchEvent(name_1, ev);\n          }\n        });\n      };\n      for (var _i = 0, XHR_EVENTS_1 = XHR_EVENTS; _i < XHR_EVENTS_1.length; _i++) {\n        var name_1 = XHR_EVENTS_1[_i];\n        _loop_1(name_1);\n      }\n      xhr.onload = function (ev) {\n        if (responseProcessed === undefined) {\n          responseProcessed = handleResponse(xhr);\n        }\n        responseProcessed.then(function (callself) {\n          if (!callself) {\n            return;\n          }\n          if (self.onload) {\n            self.onload(ev);\n          }\n          redispatchEvent(\"load\", ev);\n        });\n      };\n      xhr.onreadystatechange = function (ev) {\n        // In local files, status is 0 upon success in Mozilla Firefox\n        if (xhr.readyState === oldXMLHttpRequest.DONE) {\n          if (responseProcessed === undefined) {\n            responseProcessed = handleResponse(xhr);\n          }\n          responseProcessed.then(function (callself) {\n            if (!callself) {\n              return;\n            }\n            if (self.onreadystatechange) self.onreadystatechange(ev);\n            redispatchEvent(\"readystatechange\", ev);\n          });\n        } else {\n          if (self.onreadystatechange) {\n            self.onreadystatechange(ev);\n          }\n          redispatchEvent(\"readystatechange\", ev);\n        }\n      };\n      xhr.onloadend = function (ev) {\n        if (responseProcessed === undefined) {\n          responseProcessed = handleResponse(xhr);\n        }\n        responseProcessed.then(function (callself) {\n          if (!callself) {\n            return;\n          }\n          if (self.onloadend) {\n            self.onloadend(ev);\n          }\n          redispatchEvent(\"loadend\", ev);\n        });\n      };\n      self.getAllResponseHeaders = function () {\n        var headersString;\n        if (customResponseHeaders) {\n          headersString = \"\";\n          customResponseHeaders.forEach(function (v, k) {\n            return headersString += \"\".concat(k, \": \").concat(v, \"\\r\\n\");\n          });\n        } else {\n          headersString = xhr.getAllResponseHeaders();\n        }\n        // We use this \"fake-header\" to signal other interceptors (axios) that this is done\n        // in case both is applied\n        return headersString + \"x-supertokens-xhr-intercepted: true\\r\\n\";\n      };\n      self.getResponseHeader = function (name) {\n        if (name === \"x-supertokens-xhr-intercepted\") {\n          return \"true\";\n        }\n        if (customResponseHeaders) {\n          return customResponseHeaders.get(name);\n        }\n        return xhr.getResponseHeader(name);\n      };\n      if (copiedProps === undefined) {\n        copiedProps = [];\n        // iterate all properties in actual to proxy them according to their type\n        // For functions, we call actual and return the result\n        // For non-functions, we make getters/setters\n        // If the property already exists on self, then don't proxy it\n        for (var prop in xhr) {\n          // skip properties we already have - this will skip both the above defined properties\n          // that we don't want to proxy and skip properties on the prototype belonging to Object\n          if (!(prop in self)) {\n            // We save these props into an array - in case we need to set up a retry XHR\n            copiedProps.push(prop);\n          }\n        }\n      }\n      var _loop_2 = function (prop) {\n        if (typeof xhr[prop] === \"function\") {\n          // define our own property that calls the same method on the actual\n          Object.defineProperty(self, prop, {\n            configurable: true,\n            value: function () {\n              var args = arguments;\n              if (!isRetry) {\n                listOfFunctionCallsInProxy.push(function (xhr) {\n                  xhr[prop].apply(xhr, args);\n                });\n              }\n              return xhr[prop].apply(xhr, args);\n            }\n          });\n        } else {\n          // define our own property that just gets or sets the same prop on the actual\n          Object.defineProperty(self, prop, {\n            configurable: true,\n            get: function () {\n              if (customGetterValues[prop] !== undefined) {\n                return customGetterValues[prop];\n              }\n              return xhr[prop];\n            },\n            set: function (val) {\n              if (!isRetry) {\n                listOfFunctionCallsInProxy.push(function (xhr) {\n                  xhr[prop] = val;\n                });\n              }\n              (0, logger_1.logDebugMessage)(\"XHRInterceptor.set[\".concat(prop, \"] = \").concat(val));\n              xhr[prop] = val;\n            }\n          });\n        }\n      };\n      for (var _a = 0, copiedProps_1 = copiedProps; _a < copiedProps_1.length; _a++) {\n        var prop = copiedProps_1[_a];\n        _loop_2(prop);\n      }\n    }\n    function sendXHR(xhr, body) {\n      var _this = this;\n      (0, logger_1.logDebugMessage)(\"XHRInterceptor.send: called\");\n      (0, logger_1.logDebugMessage)(\"XHRInterceptor.send: Value of doNotDoInterception: \" + doNotDoInterception);\n      if (doNotDoInterception) {\n        (0, logger_1.logDebugMessage)(\"XHRInterceptor.send: Returning without interception\");\n        delayIfNecessary(function () {\n          return xhr.send(body);\n        });\n        return;\n      }\n      (0, logger_1.logDebugMessage)(\"XHRInterceptor.send: Interception started\");\n      processState_1.ProcessState.getInstance().addState(processState_1.PROCESS_STATE.CALLING_INTERCEPTION_REQUEST);\n      delayIfNecessary(function () {\n        return __awaiter(_this, void 0, void 0, function () {\n          var antiCsrfToken, transferMethod;\n          return __generator(this, function (_a) {\n            switch (_a.label) {\n              case 0:\n                return [4 /*yield*/, (0, fetch_1.getLocalSessionState)(true)];\n              case 1:\n                preRequestLSS = _a.sent();\n                if (!(preRequestLSS.status === \"EXISTS\")) return [3 /*break*/, 3];\n                return [4 /*yield*/, fetch_1.AntiCsrfToken.getToken(preRequestLSS.lastAccessTokenUpdate)];\n              case 2:\n                antiCsrfToken = _a.sent();\n                if (antiCsrfToken !== undefined) {\n                  (0, logger_1.logDebugMessage)(\"XHRInterceptor.send: Adding anti-csrf token to request\");\n                  xhr.setRequestHeader(\"anti-csrf\", antiCsrfToken);\n                }\n                _a.label = 3;\n              case 3:\n                if (fetch_1.default.config.autoAddCredentials) {\n                  (0, logger_1.logDebugMessage)(\"XHRInterceptor.send: Adding credentials include\");\n                  self.withCredentials = true;\n                }\n                if (!requestHeaders.some(function (i) {\n                  return i.name === \"rid\";\n                })) {\n                  (0, logger_1.logDebugMessage)(\"XHRInterceptor.send: Adding rid header: anti-csrf\");\n                  xhr.setRequestHeader(\"rid\", \"anti-csrf\");\n                } else {\n                  (0, logger_1.logDebugMessage)(\"XHRInterceptor.send: rid header was already there in request\");\n                }\n                transferMethod = fetch_1.default.config.tokenTransferMethod;\n                if (!requestHeaders.some(function (i) {\n                  return i.name === \"st-auth-mode\";\n                })) {\n                  (0, logger_1.logDebugMessage)(\"XHRInterceptor.send: Adding st-auth-mode header: \" + transferMethod);\n                  xhr.setRequestHeader(\"st-auth-mode\", transferMethod);\n                } else {\n                  (0, logger_1.logDebugMessage)(\"XHRInterceptor.send: st-auth-mode header was already there in request\");\n                }\n                return [4 /*yield*/, setAuthorizationHeaderIfRequired(xhr, requestHeaders)];\n              case 4:\n                _a.sent();\n                (0, logger_1.logDebugMessage)(\"XHRInterceptor.send: Making user's http call\");\n                return [2 /*return*/, xhr.send(body)];\n            }\n          });\n        });\n      });\n    }\n  };\n  // This can be used by other interceptors (axios) to detect if this interceptor has been added or not\n  XMLHttpRequest.__interceptedBySuperTokens = true;\n  XMLHttpRequest.__original = oldXMLHttpRequest;\n}\nexports.addInterceptorsToXMLHttpRequest = addInterceptorsToXMLHttpRequest;\nfunction getXMLHttpStatusAndResponseTextFromFetchResponse(response) {\n  return __awaiter(this, void 0, void 0, function () {\n    var contentType, data, responseType, _a, _b, _c;\n    return __generator(this, function (_d) {\n      switch (_d.label) {\n        case 0:\n          contentType = response.headers.get(\"content-type\");\n          data = \"\";\n          responseType = \"text\";\n          if (!(contentType === null)) return [3 /*break*/, 5];\n          _d.label = 1;\n        case 1:\n          _d.trys.push([1, 3,, 4]);\n          return [4 /*yield*/, response.text()];\n        case 2:\n          data = _d.sent();\n          return [3 /*break*/, 4];\n        case 3:\n          _a = _d.sent();\n          data = \"\";\n          return [3 /*break*/, 4];\n        case 4:\n          return [3 /*break*/, 9];\n        case 5:\n          if (!contentType.includes(\"application/json\")) return [3 /*break*/, 7];\n          responseType = \"json\";\n          _c = (_b = JSON).stringify;\n          return [4 /*yield*/, response.json()];\n        case 6:\n          data = _c.apply(_b, [_d.sent()]);\n          return [3 /*break*/, 9];\n        case 7:\n          if (!contentType.includes(\"text/\")) return [3 /*break*/, 9];\n          return [4 /*yield*/, response.text()];\n        case 8:\n          data = _d.sent();\n          _d.label = 9;\n        case 9:\n          return [2 /*return*/, {\n            status: response.status,\n            responseText: data,\n            statusText: response.statusText,\n            responseType: responseType,\n            headers: response.headers\n          }];\n      }\n    });\n  });\n}\nfunction setAuthorizationHeaderIfRequired(xhr, requestHeaders) {\n  return __awaiter(this, void 0, void 0, function () {\n    var accessToken, refreshToken;\n    return __generator(this, function (_a) {\n      switch (_a.label) {\n        case 0:\n          (0, logger_1.logDebugMessage)(\"setAuthorizationHeaderIfRequired: adding existing tokens as header\");\n          return [4 /*yield*/, (0, fetch_1.getTokenForHeaderAuth)(\"access\")];\n        case 1:\n          accessToken = _a.sent();\n          return [4 /*yield*/, (0, fetch_1.getTokenForHeaderAuth)(\"refresh\")];\n        case 2:\n          refreshToken = _a.sent();\n          // We don't add the refresh token because that's only required by the refresh call which is done with fetch\n          // Still, we only add the Authorization header if both are present, because we are planning to add an option to expose the\n          // access token to the frontend while using cookie based auth - so that users can get the access token to use\n          if (accessToken !== undefined && refreshToken !== undefined) {\n            if (requestHeaders.some(function (_a) {\n              var name = _a.name;\n              return name.toLowerCase() === \"authorization\";\n            })) {\n              (0, logger_1.logDebugMessage)(\"setAuthorizationHeaderIfRequired: Authorization header defined by the user, not adding\");\n            } else {\n              if (accessToken !== undefined) {\n                (0, logger_1.logDebugMessage)(\"setAuthorizationHeaderIfRequired: added authorization header\");\n                xhr.setRequestHeader(\"Authorization\", \"Bearer \".concat(accessToken));\n              }\n              // We don't add the refresh token because that's only required by the refresh call which is done with fetch\n            }\n          } else {\n            (0, logger_1.logDebugMessage)(\"setAuthorizationHeaderIfRequired: token for header based auth not found\");\n          }\n          return [2 /*return*/];\n      }\n    });\n  });\n}\nfunction saveTokensFromHeaders(headers) {\n  return __awaiter(this, void 0, void 0, function () {\n    var refreshToken, accessToken, frontToken, antiCsrfToken, tok;\n    return __generator(this, function (_a) {\n      switch (_a.label) {\n        case 0:\n          (0, logger_1.logDebugMessage)(\"saveTokensFromHeaders: Saving updated tokens from the response\");\n          refreshToken = headers.get(\"st-refresh-token\");\n          if (!(refreshToken !== null)) return [3 /*break*/, 2];\n          (0, logger_1.logDebugMessage)(\"saveTokensFromHeaders: saving new refresh token\");\n          return [4 /*yield*/, (0, fetch_1.setToken)(\"refresh\", refreshToken)];\n        case 1:\n          _a.sent();\n          _a.label = 2;\n        case 2:\n          accessToken = headers.get(\"st-access-token\");\n          if (!(accessToken !== null)) return [3 /*break*/, 4];\n          (0, logger_1.logDebugMessage)(\"saveTokensFromHeaders: saving new access token\");\n          return [4 /*yield*/, (0, fetch_1.setToken)(\"access\", accessToken)];\n        case 3:\n          _a.sent();\n          _a.label = 4;\n        case 4:\n          frontToken = headers.get(\"front-token\");\n          if (!(frontToken !== null)) return [3 /*break*/, 6];\n          (0, logger_1.logDebugMessage)(\"saveTokensFromHeaders: Setting sFrontToken: \" + frontToken);\n          return [4 /*yield*/, fetch_1.FrontToken.setItem(frontToken)];\n        case 5:\n          _a.sent();\n          (0, fetch_1.updateClockSkewUsingFrontToken)({\n            frontToken: frontToken,\n            responseHeaders: headers\n          });\n          _a.label = 6;\n        case 6:\n          antiCsrfToken = headers.get(\"anti-csrf\");\n          if (!(antiCsrfToken !== null)) return [3 /*break*/, 9];\n          return [4 /*yield*/, (0, fetch_1.getLocalSessionState)(false)];\n        case 7:\n          tok = _a.sent();\n          if (!(tok.status === \"EXISTS\")) return [3 /*break*/, 9];\n          (0, logger_1.logDebugMessage)(\"saveTokensFromHeaders: Setting anti-csrf token\");\n          return [4 /*yield*/, fetch_1.AntiCsrfToken.setItem(tok.lastAccessTokenUpdate, antiCsrfToken)];\n        case 8:\n          _a.sent();\n          _a.label = 9;\n        case 9:\n          return [2 /*return*/];\n      }\n    });\n  });\n}\nfunction getResponseHeadersFromXHR(xhr) {\n  return new Headers(xhr.getAllResponseHeaders().split(\"\\r\\n\").map(function (line) {\n    var sep = line.indexOf(\": \");\n    if (sep === -1) {\n      return [\"\", \"\"];\n    }\n    return [line.slice(0, sep), line.slice(sep + 2)];\n  }).filter(function (e) {\n    return e[0].length !== 0;\n  }));\n}", "\"use strict\";\n\nvar __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n    return t;\n  };\n  return __assign.apply(this, arguments);\n};\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nvar __generator = this && this.__generator || function (thisArg, body) {\n  var _ = {\n      label: 0,\n      sent: function () {\n        if (t[0] & 1) throw t[1];\n        return t[1];\n      },\n      trys: [],\n      ops: []\n    },\n    f,\n    y,\n    t,\n    g;\n  return g = {\n    next: verb(0),\n    throw: verb(1),\n    return: verb(2)\n  }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function () {\n    return this;\n  }), g;\n  function verb(n) {\n    return function (v) {\n      return step([n, v]);\n    };\n  }\n  function step(op) {\n    if (f) throw new TypeError(\"Generator is already executing.\");\n    while (_) try {\n      if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n      if (y = 0, t) op = [op[0] & 2, t.value];\n      switch (op[0]) {\n        case 0:\n        case 1:\n          t = op;\n          break;\n        case 4:\n          _.label++;\n          return {\n            value: op[1],\n            done: false\n          };\n        case 5:\n          _.label++;\n          y = op[1];\n          op = [0];\n          continue;\n        case 7:\n          op = _.ops.pop();\n          _.trys.pop();\n          continue;\n        default:\n          if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {\n            _ = 0;\n            continue;\n          }\n          if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {\n            _.label = op[1];\n            break;\n          }\n          if (op[0] === 6 && _.label < t[1]) {\n            _.label = t[1];\n            t = op;\n            break;\n          }\n          if (t && _.label < t[2]) {\n            _.label = t[2];\n            _.ops.push(op);\n            break;\n          }\n          if (t[2]) _.ops.pop();\n          _.trys.pop();\n          continue;\n      }\n      op = body.call(thisArg, _);\n    } catch (e) {\n      op = [6, e];\n      y = 0;\n    } finally {\n      f = t = 0;\n    }\n    if (op[0] & 5) throw op[1];\n    return {\n      value: op[0] ? op[1] : void 0,\n      done: true\n    };\n  }\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar fetch_1 = require(\"./fetch\");\nvar axios_1 = require(\"./axios\");\nvar version_1 = require(\"./version\");\nvar logger_1 = require(\"./logger\");\nvar error_1 = require(\"./error\");\nvar xmlhttprequest_1 = require(\"./xmlhttprequest\");\nvar utils_1 = require(\"./utils\");\nvar dateProvider_1 = require(\"./utils/dateProvider\");\nvar lockFactory_1 = require(\"./utils/lockFactory\");\nvar MAX_REFRESH_LOCK_TRY_COUNT = 100;\nvar CLAIM_REFRESH_LOCK_NAME = \"CLAIM_REFRESH_LOCK\";\nfunction RecipeImplementation(recipeImplInput) {\n  return {\n    addXMLHttpRequestInterceptor: function (_) {\n      (0, logger_1.logDebugMessage)(\"addXMLHttpRequestInterceptorAndReturnModified: called\");\n      (0, xmlhttprequest_1.addInterceptorsToXMLHttpRequest)();\n    },\n    addFetchInterceptorsAndReturnModifiedFetch: function (input) {\n      (0, logger_1.logDebugMessage)(\"addFetchInterceptorsAndReturnModifiedFetch: called\");\n      return function (url, config) {\n        return __awaiter(this, void 0, void 0, function () {\n          return __generator(this, function (_a) {\n            switch (_a.label) {\n              case 0:\n                return [4 /*yield*/, fetch_1.default.doRequest(function (config) {\n                  return input.originalFetch(typeof url === \"object\" && \"clone\" in url ? url.clone() : url, __assign({}, config));\n                }, config, url)];\n              case 1:\n                return [2 /*return*/, _a.sent()];\n            }\n          });\n        });\n      };\n    },\n    addAxiosInterceptors: function (input) {\n      (0, logger_1.logDebugMessage)(\"addAxiosInterceptors: called\");\n      if (XMLHttpRequest.__interceptedBySuperTokens) {\n        console.warn(\"Not adding axios interceptor since XMLHttpRequest is already added. This is just a warning.\");\n        console.warn(\"Our axios and XMLHttpRequest interceptors cannot be used at the same time.\");\n        console.warn(\"Since XMLHttpRequest is added automatically and supports axios by default, you can just remove addAxiosInterceptors from your code.\");\n        console.warn(\"If you want to continue using our axios interceptor, you can override addXMLHttpRequestInterceptor with an empty function.\");\n        (0, logger_1.logDebugMessage)(\"addAxiosInterceptors: not adding, because XHR interceptors are already in place\");\n        return;\n      }\n      // we first check if this axiosInstance already has our interceptors.\n      var requestInterceptors = input.axiosInstance.interceptors.request;\n      for (var i = 0; i < requestInterceptors.handlers.length; i++) {\n        if (requestInterceptors.handlers[i].fulfilled === axios_1.interceptorFunctionRequestFulfilled) {\n          (0, logger_1.logDebugMessage)(\"addAxiosInterceptors: not adding because already added on this instance\");\n          return;\n        }\n      }\n      // Add a request interceptor\n      input.axiosInstance.interceptors.request.use(axios_1.interceptorFunctionRequestFulfilled, function (error) {\n        return __awaiter(this, void 0, void 0, function () {\n          return __generator(this, function (_a) {\n            throw error;\n          });\n        });\n      });\n      // Add a response interceptor\n      input.axiosInstance.interceptors.response.use((0, axios_1.responseInterceptor)(input.axiosInstance), (0, axios_1.responseErrorInterceptor)(input.axiosInstance));\n    },\n    getUserId: function (_) {\n      return __awaiter(this, void 0, void 0, function () {\n        var tokenInfo;\n        return __generator(this, function (_a) {\n          switch (_a.label) {\n            case 0:\n              (0, logger_1.logDebugMessage)(\"getUserId: called\");\n              return [4 /*yield*/, fetch_1.FrontToken.getTokenInfo()];\n            case 1:\n              tokenInfo = _a.sent();\n              if (tokenInfo === undefined) {\n                throw new Error(\"No session exists\");\n              }\n              (0, logger_1.logDebugMessage)(\"getUserId: returning: \" + tokenInfo.uid);\n              return [2 /*return*/, tokenInfo.uid];\n          }\n        });\n      });\n    },\n    getAccessTokenPayloadSecurely: function (input) {\n      return __awaiter(this, void 0, void 0, function () {\n        var tokenInfo, retry;\n        return __generator(this, function (_a) {\n          switch (_a.label) {\n            case 0:\n              (0, logger_1.logDebugMessage)(\"getAccessTokenPayloadSecurely: called\");\n              return [4 /*yield*/, fetch_1.FrontToken.getTokenInfo()];\n            case 1:\n              tokenInfo = _a.sent();\n              if (tokenInfo === undefined) {\n                throw new Error(\"No session exists\");\n              }\n              if (!(tokenInfo.ate < dateProvider_1.default.getReferenceOrThrow().dateProvider.now())) return [3 /*break*/, 5];\n              (0, logger_1.logDebugMessage)(\"getAccessTokenPayloadSecurely: access token expired. Refreshing session\");\n              return [4 /*yield*/, fetch_1.default.attemptRefreshingSession()];\n            case 2:\n              retry = _a.sent();\n              if (!retry) return [3 /*break*/, 4];\n              return [4 /*yield*/, this.getAccessTokenPayloadSecurely({\n                userContext: input.userContext\n              })];\n            case 3:\n              return [2 /*return*/, _a.sent()];\n            case 4:\n              throw new Error(\"Could not refresh session\");\n            case 5:\n              (0, logger_1.logDebugMessage)(\"getAccessTokenPayloadSecurely: returning: \" + JSON.stringify(tokenInfo.up));\n              return [2 /*return*/, tokenInfo.up];\n          }\n        });\n      });\n    },\n    doesSessionExist: function (_) {\n      return __awaiter(this, void 0, void 0, function () {\n        var tokenInfo, preRequestLSS, refresh;\n        return __generator(this, function (_a) {\n          switch (_a.label) {\n            case 0:\n              (0, logger_1.logDebugMessage)(\"doesSessionExist: called\");\n              return [4 /*yield*/, fetch_1.FrontToken.getTokenInfo()];\n            case 1:\n              tokenInfo = _a.sent();\n              // The above includes getLocalSessionState(true), which would call refresh if the FE cookies were cleared for some reason\n              if (tokenInfo === undefined) {\n                (0, logger_1.logDebugMessage)(\"doesSessionExist: access token does not exist locally\");\n                return [2 /*return*/, false];\n              }\n              if (!(tokenInfo.ate < dateProvider_1.default.getReferenceOrThrow().dateProvider.now())) return [3 /*break*/, 4];\n              (0, logger_1.logDebugMessage)(\"doesSessionExist: access token expired. Refreshing session\");\n              return [4 /*yield*/, (0, fetch_1.getLocalSessionState)(false)];\n            case 2:\n              preRequestLSS = _a.sent();\n              return [4 /*yield*/, (0, fetch_1.onUnauthorisedResponse)(preRequestLSS)];\n            case 3:\n              refresh = _a.sent();\n              return [2 /*return*/, refresh.result === \"RETRY\"];\n            case 4:\n              return [2 /*return*/, true];\n          }\n        });\n      });\n    },\n    signOut: function (input) {\n      return __awaiter(this, void 0, void 0, function () {\n        var preAPIResult, resp, responseJson, message;\n        return __generator(this, function (_a) {\n          switch (_a.label) {\n            case 0:\n              (0, logger_1.logDebugMessage)(\"signOut: called\");\n              return [4 /*yield*/, this.doesSessionExist(input)];\n            case 1:\n              if (!_a.sent()) {\n                (0, logger_1.logDebugMessage)(\"signOut: exiting early because session does not exist\");\n                (0, logger_1.logDebugMessage)(\"signOut: firing SIGN_OUT event\");\n                recipeImplInput.onHandleEvent({\n                  action: \"SIGN_OUT\",\n                  userContext: input.userContext\n                });\n                return [2 /*return*/];\n              }\n              (0, logger_1.logDebugMessage)(\"signOut: Calling refresh pre API hook\");\n              return [4 /*yield*/, recipeImplInput.preAPIHook({\n                action: \"SIGN_OUT\",\n                requestInit: {\n                  method: \"post\",\n                  headers: {\n                    \"fdi-version\": version_1.supported_fdi.join(\",\"),\n                    rid: fetch_1.default.rid\n                  }\n                },\n                url: fetch_1.default.signOutUrl,\n                userContext: input.userContext\n              })];\n            case 2:\n              preAPIResult = _a.sent();\n              (0, logger_1.logDebugMessage)(\"signOut: Calling API\");\n              return [4 /*yield*/, fetch(preAPIResult.url, preAPIResult.requestInit)];\n            case 3:\n              resp = _a.sent();\n              (0, logger_1.logDebugMessage)(\"signOut: API ended\");\n              (0, logger_1.logDebugMessage)(\"signOut: API responded with status code: \" + resp.status);\n              if (resp.status === recipeImplInput.sessionExpiredStatusCode) {\n                // refresh must have already sent session expiry event\n                return [2 /*return*/];\n              }\n              if (resp.status >= 300) {\n                throw resp;\n              }\n              return [4 /*yield*/, recipeImplInput.postAPIHook({\n                action: \"SIGN_OUT\",\n                requestInit: preAPIResult.requestInit,\n                url: preAPIResult.url,\n                fetchResponse: resp.clone(),\n                userContext: input.userContext\n              })];\n            case 4:\n              _a.sent();\n              return [4 /*yield*/, resp.clone().json()];\n            case 5:\n              responseJson = _a.sent();\n              if (responseJson.status === \"GENERAL_ERROR\") {\n                (0, logger_1.logDebugMessage)(\"doRequest: Throwing general error\");\n                message = responseJson.message === undefined ? \"No Error Message Provided\" : responseJson.message;\n                throw new error_1.STGeneralError(message);\n              }\n              return [2 /*return*/];\n          }\n        });\n      });\n    },\n    getInvalidClaimsFromResponse: function (input) {\n      return __awaiter(this, void 0, void 0, function () {\n        var body;\n        return __generator(this, function (_a) {\n          switch (_a.label) {\n            case 0:\n              if (!(\"body\" in input.response)) return [3 /*break*/, 2];\n              return [4 /*yield*/, input.response.clone().json()];\n            case 1:\n              body = _a.sent();\n              return [3 /*break*/, 3];\n            case 2:\n              if (typeof input.response.data === \"string\") {\n                body = JSON.parse(input.response.data);\n              } else {\n                body = input.response.data;\n              }\n              _a.label = 3;\n            case 3:\n              return [2 /*return*/, body.claimValidationErrors];\n          }\n        });\n      });\n    },\n    getGlobalClaimValidators: function (input) {\n      return input.claimValidatorsAddedByOtherRecipes;\n    },\n    validateClaims: function (input) {\n      return __awaiter(this, void 0, void 0, function () {\n        var accessTokenPayload, tryCount, lockFactory, claimRefreshLock, _i, _a, validator, err_1, errors, _b, _c, validator, validationRes;\n        return __generator(this, function (_d) {\n          switch (_d.label) {\n            case 0:\n              tryCount = 0;\n              _d.label = 1;\n            case 1:\n              if (!(++tryCount < MAX_REFRESH_LOCK_TRY_COUNT)) return [3 /*break*/, 20];\n              return [4 /*yield*/, lockFactory_1.default.getReferenceOrThrow().lockFactory()];\n            case 2:\n              lockFactory = _d.sent();\n              (0, logger_1.logDebugMessage)(\"validateClaims: trying to acquire claim refresh lock\");\n              return [4 /*yield*/, lockFactory.acquireLock(CLAIM_REFRESH_LOCK_NAME)];\n            case 3:\n              claimRefreshLock = _d.sent();\n              if (!claimRefreshLock) return [3 /*break*/, 18];\n              _d.label = 4;\n            case 4:\n              _d.trys.push([4,, 15, 17]);\n              return [4 /*yield*/, this.getAccessTokenPayloadSecurely({\n                userContext: input.userContext\n              })];\n            case 5:\n              accessTokenPayload = _d.sent();\n              (0, logger_1.logDebugMessage)(\"validateClaims: claim refresh lock acquired\");\n              _i = 0, _a = input.claimValidators;\n              _d.label = 6;\n            case 6:\n              if (!(_i < _a.length)) return [3 /*break*/, 14];\n              validator = _a[_i];\n              return [4 /*yield*/, validator.shouldRefresh(accessTokenPayload, input.userContext)];\n            case 7:\n              if (!_d.sent()) return [3 /*break*/, 13];\n              _d.label = 8;\n            case 8:\n              _d.trys.push([8, 10,, 11]);\n              return [4 /*yield*/, validator.refresh(input.userContext)];\n            case 9:\n              _d.sent();\n              return [3 /*break*/, 11];\n            case 10:\n              err_1 = _d.sent();\n              console.error(\"Encountered an error while refreshing validator \".concat(validator.id), err_1);\n              return [3 /*break*/, 11];\n            case 11:\n              return [4 /*yield*/, this.getAccessTokenPayloadSecurely({\n                userContext: input.userContext\n              })];\n            case 12:\n              accessTokenPayload = _d.sent();\n              _d.label = 13;\n            case 13:\n              _i++;\n              return [3 /*break*/, 6];\n            case 14:\n              return [3 /*break*/, 17];\n            case 15:\n              (0, logger_1.logDebugMessage)(\"validateClaims: releasing claim refresh lock\");\n              return [4 /*yield*/, lockFactory.releaseLock(CLAIM_REFRESH_LOCK_NAME)];\n            case 16:\n              _d.sent();\n              return [7 /*endfinally*/];\n            case 17:\n              return [3 /*break*/, 20];\n            case 18:\n              (0, logger_1.logDebugMessage)(\"validateClaims: Retrying refresh lock \".concat(tryCount, \"/\").concat(MAX_REFRESH_LOCK_TRY_COUNT));\n              _d.label = 19;\n            case 19:\n              return [3 /*break*/, 1];\n            case 20:\n              if (!(tryCount === MAX_REFRESH_LOCK_TRY_COUNT)) return [3 /*break*/, 22];\n              (0, logger_1.logDebugMessage)(\"validateClaims: ran out of retries while trying to acquire claim refresh lock\");\n              return [4 /*yield*/, this.getAccessTokenPayloadSecurely({\n                userContext: input.userContext\n              })];\n            case 21:\n              // We can just load the access token payload (that doesn't happen above if we never got inside the lock)\n              accessTokenPayload = _d.sent();\n              _d.label = 22;\n            case 22:\n              errors = [];\n              _b = 0, _c = input.claimValidators;\n              _d.label = 23;\n            case 23:\n              if (!(_b < _c.length)) return [3 /*break*/, 26];\n              validator = _c[_b];\n              return [4 /*yield*/, validator.validate(accessTokenPayload, input.userContext)];\n            case 24:\n              validationRes = _d.sent();\n              if (!validationRes.isValid) {\n                errors.push({\n                  id: validator.id,\n                  reason: validationRes.reason\n                });\n              }\n              _d.label = 25;\n            case 25:\n              _b++;\n              return [3 /*break*/, 23];\n            case 26:\n              return [2 /*return*/, errors];\n          }\n        });\n      });\n    },\n    shouldDoInterceptionBasedOnUrl: function (toCheckUrl, apiDomain, sessionTokenBackendDomain) {\n      (0, logger_1.logDebugMessage)(\"shouldDoInterceptionBasedOnUrl: toCheckUrl: \" + toCheckUrl + \" apiDomain: \" + apiDomain + \" sessionTokenBackendDomain: \" + sessionTokenBackendDomain);\n      // The safest/best way to add this is the hash as the browser strips it before sending\n      // but we don't have a reason to limit checking to that part.\n      if (toCheckUrl.includes(\"superTokensDoNotDoInterception\")) {\n        return false;\n      }\n      toCheckUrl = (0, utils_1.normaliseURLDomainOrThrowError)(toCheckUrl);\n      var urlObj = new URL(toCheckUrl);\n      var domain = urlObj.hostname;\n      var apiDomainAndInputDomainMatch = false;\n      if (apiDomain !== \"\") {\n        // we have the \"\" check cause in tests, we pass \"\" in lots of cases.\n        apiDomain = (0, utils_1.normaliseURLDomainOrThrowError)(apiDomain);\n        var apiUrlObj = new URL(apiDomain);\n        apiDomainAndInputDomainMatch = domain === apiUrlObj.hostname;\n      }\n      if (sessionTokenBackendDomain === undefined || apiDomainAndInputDomainMatch) {\n        // even if sessionTokenBackendDomain !== undefined, if there is an exact match\n        // of api domain, ignoring the port, we return true\n        return apiDomainAndInputDomainMatch;\n      } else {\n        var normalisedsessionDomain = (0, utils_1.normaliseSessionScopeOrThrowError)(sessionTokenBackendDomain);\n        return (0, utils_1.matchesDomainOrSubdomain)(domain, normalisedsessionDomain);\n      }\n    },\n    calculateClockSkewInMillis: function (_a) {\n      var accessTokenPayload = _a.accessTokenPayload;\n      (0, logger_1.logDebugMessage)(\"calculateClockSkewInMillis: called\");\n      var tokenIssuedAt = accessTokenPayload === null || accessTokenPayload === void 0 ? void 0 : accessTokenPayload.iat;\n      if (tokenIssuedAt === undefined || typeof tokenIssuedAt !== \"number\") {\n        (0, logger_1.logDebugMessage)(\"calculateClockSkewInMillis: payload iat is undefined or not a number. This may happen due to an unsupported backend sdk. Returning 0\");\n        return 0;\n      }\n      var estimatedServerTimeNow = tokenIssuedAt * 1000;\n      var clockSkewInMillis = estimatedServerTimeNow - Date.now();\n      (0, logger_1.logDebugMessage)(\"calculateClockSkewInMillis: returning \" + clockSkewInMillis);\n      return clockSkewInMillis;\n    }\n  };\n}\nexports.default = RecipeImplementation;", "\"use strict\";\n\nvar __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n    return t;\n  };\n  return __assign.apply(this, arguments);\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getProxyObject = void 0;\nfunction getProxyObject(orig) {\n  var ret = __assign(__assign({}, orig), {\n    _call: function (_, __) {\n      throw new Error(\"This function should only be called through the recipe object\");\n    }\n  });\n  var keys = Object.keys(ret);\n  var _loop_1 = function (k) {\n    if (k !== \"_call\") {\n      ret[k] = function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          args[_i] = arguments[_i];\n        }\n        return this._call(k, args);\n      };\n    }\n  };\n  for (var _i = 0, keys_1 = keys; _i < keys_1.length; _i++) {\n    var k = keys_1[_i];\n    _loop_1(k);\n  }\n  return ret;\n}\nexports.getProxyObject = getProxyObject;", "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.OverrideableBuilder = void 0;\nvar getProxyObject_1 = require(\"./getProxyObject\");\nvar OverrideableBuilder = /** @class */function () {\n  function OverrideableBuilder(originalImplementation) {\n    this.layers = [originalImplementation];\n    this.proxies = [];\n  }\n  OverrideableBuilder.prototype.override = function (overrideFunc) {\n    var proxy = (0, getProxyObject_1.getProxyObject)(this.layers[0]);\n    var layer = overrideFunc(proxy, this);\n    for (var _i = 0, _a = Object.keys(this.layers[0]); _i < _a.length; _i++) {\n      var key = _a[_i];\n      if (layer[key] === proxy[key] || key === \"_call\") {\n        delete layer[key];\n      } else if (layer[key] === undefined) {\n        layer[key] = null;\n      }\n    }\n    this.layers.push(layer);\n    this.proxies.push(proxy);\n    return this;\n  };\n  OverrideableBuilder.prototype.build = function () {\n    var _this = this;\n    if (this.result) {\n      return this.result;\n    }\n    this.result = {};\n    for (var _i = 0, _a = this.layers; _i < _a.length; _i++) {\n      var layer = _a[_i];\n      for (var _b = 0, _c = Object.keys(layer); _b < _c.length; _b++) {\n        var key = _c[_b];\n        var override = layer[key];\n        if (override !== undefined) {\n          if (override === null) {\n            this.result[key] = undefined;\n          } else if (typeof override === \"function\") {\n            this.result[key] = override.bind(this.result);\n          } else {\n            this.result[key] = override;\n          }\n        }\n      }\n    }\n    var _loop_1 = function (proxyInd) {\n      var proxy = this_1.proxies[proxyInd];\n      proxy._call = function (fname, args) {\n        for (var i = proxyInd; i >= 0; --i) {\n          var func = _this.layers[i][fname];\n          if (func !== undefined && func !== null) {\n            return func.bind(_this.result).apply(void 0, args);\n          }\n        }\n      };\n    };\n    var this_1 = this;\n    for (var proxyInd = 0; proxyInd < this.proxies.length; ++proxyInd) {\n      _loop_1(proxyInd);\n    }\n    return this.result;\n  };\n  return OverrideableBuilder;\n}();\nexports.OverrideableBuilder = OverrideableBuilder;\nexports.default = OverrideableBuilder;", "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.PrimitiveClaim = void 0;\nvar dateProvider_1 = require(\"../utils/dateProvider\");\nvar PrimitiveClaim = /** @class */function () {\n  function PrimitiveClaim(config) {\n    var _this = this;\n    this.validators = {\n      hasValue: function (val, maxAgeInSeconds, id) {\n        if (maxAgeInSeconds === void 0) {\n          maxAgeInSeconds = _this.defaultMaxAgeInSeconds;\n        }\n        var DateProvider = dateProvider_1.default.getReferenceOrThrow().dateProvider;\n        return {\n          id: id !== undefined ? id : _this.id,\n          refresh: function (ctx) {\n            return _this.refresh(ctx);\n          },\n          shouldRefresh: function (payload, ctx) {\n            if (maxAgeInSeconds !== undefined && maxAgeInSeconds < DateProvider.getThresholdInSeconds()) {\n              throw new Error(\"maxAgeInSeconds must be greater than or equal to the DateProvider threshold value -> \".concat(DateProvider.getThresholdInSeconds()));\n            }\n            return _this.getValueFromPayload(payload, ctx) === undefined ||\n            // We know payload[this.id] is defined since the value is not undefined in this branch\n            maxAgeInSeconds !== undefined && payload[_this.id].t < DateProvider.now() - maxAgeInSeconds * 1000;\n          },\n          validate: function (payload, ctx) {\n            var claimVal = _this.getValueFromPayload(payload, ctx);\n            if (claimVal === undefined) {\n              return {\n                isValid: false,\n                reason: {\n                  message: \"value does not exist\",\n                  expectedValue: val,\n                  actualValue: claimVal\n                }\n              };\n            }\n            var ageInSeconds = (DateProvider.now() - _this.getLastFetchedTime(payload, ctx)) / 1000;\n            if (maxAgeInSeconds !== undefined && ageInSeconds > maxAgeInSeconds) {\n              return {\n                isValid: false,\n                reason: {\n                  message: \"expired\",\n                  ageInSeconds: ageInSeconds,\n                  maxAgeInSeconds: maxAgeInSeconds\n                }\n              };\n            }\n            if (claimVal !== val) {\n              return {\n                isValid: false,\n                reason: {\n                  message: \"wrong value\",\n                  expectedValue: val,\n                  actualValue: claimVal\n                }\n              };\n            }\n            return {\n              isValid: true\n            };\n          }\n        };\n      }\n    };\n    this.id = config.id;\n    this.refresh = config.refresh;\n    this.defaultMaxAgeInSeconds = config.defaultMaxAgeInSeconds;\n  }\n  PrimitiveClaim.prototype.getValueFromPayload = function (payload, _userContext) {\n    return payload[this.id] !== undefined ? payload[this.id].v : undefined;\n  };\n  PrimitiveClaim.prototype.getLastFetchedTime = function (payload, _userContext) {\n    return payload[this.id] !== undefined ? payload[this.id].t : undefined;\n  };\n  return PrimitiveClaim;\n}();\nexports.PrimitiveClaim = PrimitiveClaim;", "\"use strict\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nvar __generator = this && this.__generator || function (thisArg, body) {\n  var _ = {\n      label: 0,\n      sent: function () {\n        if (t[0] & 1) throw t[1];\n        return t[1];\n      },\n      trys: [],\n      ops: []\n    },\n    f,\n    y,\n    t,\n    g;\n  return g = {\n    next: verb(0),\n    throw: verb(1),\n    return: verb(2)\n  }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function () {\n    return this;\n  }), g;\n  function verb(n) {\n    return function (v) {\n      return step([n, v]);\n    };\n  }\n  function step(op) {\n    if (f) throw new TypeError(\"Generator is already executing.\");\n    while (_) try {\n      if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n      if (y = 0, t) op = [op[0] & 2, t.value];\n      switch (op[0]) {\n        case 0:\n        case 1:\n          t = op;\n          break;\n        case 4:\n          _.label++;\n          return {\n            value: op[1],\n            done: false\n          };\n        case 5:\n          _.label++;\n          y = op[1];\n          op = [0];\n          continue;\n        case 7:\n          op = _.ops.pop();\n          _.trys.pop();\n          continue;\n        default:\n          if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {\n            _ = 0;\n            continue;\n          }\n          if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {\n            _.label = op[1];\n            break;\n          }\n          if (op[0] === 6 && _.label < t[1]) {\n            _.label = t[1];\n            t = op;\n            break;\n          }\n          if (t && _.label < t[2]) {\n            _.label = t[2];\n            _.ops.push(op);\n            break;\n          }\n          if (t[2]) _.ops.pop();\n          _.trys.pop();\n          continue;\n      }\n      op = body.call(thisArg, _);\n    } catch (e) {\n      op = [6, e];\n      y = 0;\n    } finally {\n      f = t = 0;\n    }\n    if (op[0] & 5) throw op[1];\n    return {\n      value: op[0] ? op[1] : void 0,\n      done: true\n    };\n  }\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.PrimitiveArrayClaim = void 0;\nvar dateProvider_1 = require(\"../utils/dateProvider\");\nvar PrimitiveArrayClaim = /** @class */function () {\n  function PrimitiveArrayClaim(config) {\n    var _this = this;\n    this.validators = {\n      includes: function (val, maxAgeInSeconds, id) {\n        if (maxAgeInSeconds === void 0) {\n          maxAgeInSeconds = _this.defaultMaxAgeInSeconds;\n        }\n        var DateProvider = dateProvider_1.default.getReferenceOrThrow().dateProvider;\n        return {\n          id: id !== undefined ? id : _this.id,\n          refresh: function (ctx) {\n            return _this.refresh(ctx);\n          },\n          shouldRefresh: function (payload, ctx) {\n            if (maxAgeInSeconds !== undefined && maxAgeInSeconds < DateProvider.getThresholdInSeconds()) {\n              throw new Error(\"maxAgeInSeconds must be greater than or equal to the DateProvider threshold value -> \".concat(DateProvider.getThresholdInSeconds()));\n            }\n            return _this.getValueFromPayload(payload, ctx) === undefined ||\n            // We know payload[this.id] is defined since the value is not undefined in this branch\n            maxAgeInSeconds !== undefined && payload[_this.id].t < DateProvider.now() - maxAgeInSeconds * 1000;\n          },\n          validate: function (payload, ctx) {\n            return __awaiter(_this, void 0, void 0, function () {\n              var claimVal, ageInSeconds;\n              return __generator(this, function (_a) {\n                claimVal = this.getValueFromPayload(payload, ctx);\n                if (claimVal === undefined) {\n                  return [2 /*return*/, {\n                    isValid: false,\n                    reason: {\n                      message: \"value does not exist\",\n                      expectedToInclude: val,\n                      actualValue: claimVal\n                    }\n                  }];\n                }\n                ageInSeconds = (DateProvider.now() - this.getLastFetchedTime(payload, ctx)) / 1000;\n                if (maxAgeInSeconds !== undefined && ageInSeconds > maxAgeInSeconds) {\n                  return [2 /*return*/, {\n                    isValid: false,\n                    reason: {\n                      message: \"expired\",\n                      ageInSeconds: ageInSeconds,\n                      maxAgeInSeconds: maxAgeInSeconds\n                    }\n                  }];\n                }\n                if (!claimVal.includes(val)) {\n                  return [2 /*return*/, {\n                    isValid: false,\n                    reason: {\n                      message: \"wrong value\",\n                      expectedToInclude: val,\n                      actualValue: claimVal\n                    }\n                  }];\n                }\n                return [2 /*return*/, {\n                  isValid: true\n                }];\n              });\n            });\n          }\n        };\n      },\n      excludes: function (val, maxAgeInSeconds, id) {\n        if (maxAgeInSeconds === void 0) {\n          maxAgeInSeconds = _this.defaultMaxAgeInSeconds;\n        }\n        var DateProvider = dateProvider_1.default.getReferenceOrThrow().dateProvider;\n        return {\n          id: id !== undefined ? id : _this.id,\n          refresh: function (ctx) {\n            return _this.refresh(ctx);\n          },\n          shouldRefresh: function (payload, ctx) {\n            if (maxAgeInSeconds !== undefined && maxAgeInSeconds < DateProvider.getThresholdInSeconds()) {\n              throw new Error(\"maxAgeInSeconds must be greater than or equal to the DateProvider threshold value -> \".concat(DateProvider.getThresholdInSeconds()));\n            }\n            return _this.getValueFromPayload(payload, ctx) === undefined ||\n            // We know payload[this.id] is defined since the value is not undefined in this branch\n            maxAgeInSeconds !== undefined && payload[_this.id].t < DateProvider.now() - maxAgeInSeconds * 1000;\n          },\n          validate: function (payload, ctx) {\n            return __awaiter(_this, void 0, void 0, function () {\n              var claimVal, ageInSeconds;\n              return __generator(this, function (_a) {\n                claimVal = this.getValueFromPayload(payload, ctx);\n                if (claimVal === undefined) {\n                  return [2 /*return*/, {\n                    isValid: false,\n                    reason: {\n                      message: \"value does not exist\",\n                      expectedToNotInclude: val,\n                      actualValue: claimVal\n                    }\n                  }];\n                }\n                ageInSeconds = (DateProvider.now() - this.getLastFetchedTime(payload, ctx)) / 1000;\n                if (maxAgeInSeconds !== undefined && ageInSeconds > maxAgeInSeconds) {\n                  return [2 /*return*/, {\n                    isValid: false,\n                    reason: {\n                      message: \"expired\",\n                      ageInSeconds: ageInSeconds,\n                      maxAgeInSeconds: maxAgeInSeconds\n                    }\n                  }];\n                }\n                if (claimVal.includes(val)) {\n                  return [2 /*return*/, {\n                    isValid: false,\n                    reason: {\n                      message: \"wrong value\",\n                      expectedToNotInclude: val,\n                      actualValue: claimVal\n                    }\n                  }];\n                }\n                return [2 /*return*/, {\n                  isValid: true\n                }];\n              });\n            });\n          }\n        };\n      },\n      includesAll: function (val, maxAgeInSeconds, id) {\n        if (maxAgeInSeconds === void 0) {\n          maxAgeInSeconds = _this.defaultMaxAgeInSeconds;\n        }\n        var DateProvider = dateProvider_1.default.getReferenceOrThrow().dateProvider;\n        return {\n          id: id !== undefined ? id : _this.id,\n          refresh: function (ctx) {\n            return _this.refresh(ctx);\n          },\n          shouldRefresh: function (payload, ctx) {\n            if (maxAgeInSeconds !== undefined && maxAgeInSeconds < DateProvider.getThresholdInSeconds()) {\n              throw new Error(\"maxAgeInSeconds must be greater than or equal to the DateProvider threshold value -> \".concat(DateProvider.getThresholdInSeconds()));\n            }\n            return _this.getValueFromPayload(payload, ctx) === undefined ||\n            // We know payload[this.id] is defined since the value is not undefined in this branch\n            maxAgeInSeconds !== undefined && payload[_this.id].t < DateProvider.now() - maxAgeInSeconds * 1000;\n          },\n          validate: function (payload, ctx) {\n            return __awaiter(_this, void 0, void 0, function () {\n              var claimVal, ageInSeconds, claimSet, isValid;\n              return __generator(this, function (_a) {\n                claimVal = this.getValueFromPayload(payload, ctx);\n                if (claimVal === undefined) {\n                  return [2 /*return*/, {\n                    isValid: false,\n                    reason: {\n                      message: \"value does not exist\",\n                      expectedToInclude: val,\n                      actualValue: claimVal\n                    }\n                  }];\n                }\n                ageInSeconds = (DateProvider.now() - this.getLastFetchedTime(payload, ctx)) / 1000;\n                if (maxAgeInSeconds !== undefined && ageInSeconds > maxAgeInSeconds) {\n                  return [2 /*return*/, {\n                    isValid: false,\n                    reason: {\n                      message: \"expired\",\n                      ageInSeconds: ageInSeconds,\n                      maxAgeInSeconds: maxAgeInSeconds\n                    }\n                  }];\n                }\n                claimSet = new Set(claimVal);\n                isValid = val.every(function (v) {\n                  return claimSet.has(v);\n                });\n                return [2 /*return*/, isValid ? {\n                  isValid: isValid\n                } : {\n                  isValid: isValid,\n                  reason: {\n                    message: \"wrong value\",\n                    expectedToInclude: val,\n                    actualValue: claimVal\n                  }\n                }];\n              });\n            });\n          }\n        };\n      },\n      includesAny: function (val, maxAgeInSeconds, id) {\n        if (maxAgeInSeconds === void 0) {\n          maxAgeInSeconds = _this.defaultMaxAgeInSeconds;\n        }\n        var DateProvider = dateProvider_1.default.getReferenceOrThrow().dateProvider;\n        return {\n          id: id !== undefined ? id : _this.id,\n          refresh: function (ctx) {\n            return _this.refresh(ctx);\n          },\n          shouldRefresh: function (payload, ctx) {\n            if (maxAgeInSeconds !== undefined && maxAgeInSeconds < DateProvider.getThresholdInSeconds()) {\n              throw new Error(\"maxAgeInSeconds must be greater than or equal to the DateProvider threshold value -> \".concat(DateProvider.getThresholdInSeconds()));\n            }\n            return _this.getValueFromPayload(payload, ctx) === undefined ||\n            // We know payload[this.id] is defined since the value is not undefined in this branch\n            maxAgeInSeconds !== undefined && payload[_this.id].t < DateProvider.now() - maxAgeInSeconds * 1000;\n          },\n          validate: function (payload, ctx) {\n            return __awaiter(_this, void 0, void 0, function () {\n              var claimVal, ageInSeconds, claimSet, isValid;\n              return __generator(this, function (_a) {\n                claimVal = this.getValueFromPayload(payload, ctx);\n                if (claimVal === undefined) {\n                  return [2 /*return*/, {\n                    isValid: false,\n                    reason: {\n                      message: \"value does not exist\",\n                      expectedToInclude: val,\n                      actualValue: claimVal\n                    }\n                  }];\n                }\n                ageInSeconds = (DateProvider.now() - this.getLastFetchedTime(payload, ctx)) / 1000;\n                if (maxAgeInSeconds !== undefined && ageInSeconds > maxAgeInSeconds) {\n                  return [2 /*return*/, {\n                    isValid: false,\n                    reason: {\n                      message: \"expired\",\n                      ageInSeconds: ageInSeconds,\n                      maxAgeInSeconds: maxAgeInSeconds\n                    }\n                  }];\n                }\n                claimSet = new Set(claimVal);\n                isValid = val.some(function (v) {\n                  return claimSet.has(v);\n                });\n                return [2 /*return*/, isValid ? {\n                  isValid: isValid\n                } : {\n                  isValid: isValid,\n                  reason: {\n                    message: \"wrong value\",\n                    expectedToIncludeAtLeastOneOf: val,\n                    actualValue: claimVal\n                  }\n                }];\n              });\n            });\n          }\n        };\n      },\n      excludesAll: function (val, maxAgeInSeconds, id) {\n        if (maxAgeInSeconds === void 0) {\n          maxAgeInSeconds = _this.defaultMaxAgeInSeconds;\n        }\n        var DateProvider = dateProvider_1.default.getReferenceOrThrow().dateProvider;\n        return {\n          id: id !== undefined ? id : _this.id,\n          refresh: function (ctx) {\n            return _this.refresh(ctx);\n          },\n          shouldRefresh: function (payload, ctx) {\n            if (maxAgeInSeconds !== undefined && maxAgeInSeconds < DateProvider.getThresholdInSeconds()) {\n              throw new Error(\"maxAgeInSeconds must be greater than or equal to the DateProvider threshold value -> \".concat(DateProvider.getThresholdInSeconds()));\n            }\n            return _this.getValueFromPayload(payload, ctx) === undefined ||\n            // We know payload[this.id] is defined since the value is not undefined in this branch\n            maxAgeInSeconds !== undefined && payload[_this.id].t < DateProvider.now() - maxAgeInSeconds * 1000;\n          },\n          validate: function (payload, ctx) {\n            return __awaiter(_this, void 0, void 0, function () {\n              var claimVal, ageInSeconds, claimSet, isValid;\n              return __generator(this, function (_a) {\n                claimVal = this.getValueFromPayload(payload, ctx);\n                if (claimVal === undefined) {\n                  return [2 /*return*/, {\n                    isValid: false,\n                    reason: {\n                      message: \"value does not exist\",\n                      expectedToNotInclude: val,\n                      actualValue: claimVal\n                    }\n                  }];\n                }\n                ageInSeconds = (DateProvider.now() - this.getLastFetchedTime(payload, ctx)) / 1000;\n                if (maxAgeInSeconds !== undefined && ageInSeconds > maxAgeInSeconds) {\n                  return [2 /*return*/, {\n                    isValid: false,\n                    reason: {\n                      message: \"expired\",\n                      ageInSeconds: ageInSeconds,\n                      maxAgeInSeconds: maxAgeInSeconds\n                    }\n                  }];\n                }\n                claimSet = new Set(claimVal);\n                isValid = val.every(function (v) {\n                  return !claimSet.has(v);\n                });\n                return [2 /*return*/, isValid ? {\n                  isValid: isValid\n                } : {\n                  isValid: isValid,\n                  reason: {\n                    message: \"wrong value\",\n                    expectedToNotInclude: val,\n                    actualValue: claimVal\n                  }\n                }];\n              });\n            });\n          }\n        };\n      }\n    };\n    this.id = config.id;\n    this.refresh = config.refresh;\n    this.defaultMaxAgeInSeconds = config.defaultMaxAgeInSeconds;\n  }\n  PrimitiveArrayClaim.prototype.getValueFromPayload = function (payload, _userContext) {\n    return payload[this.id] !== undefined ? payload[this.id].v : undefined;\n  };\n  PrimitiveArrayClaim.prototype.getLastFetchedTime = function (payload, _userContext) {\n    return payload[this.id] !== undefined ? payload[this.id].t : undefined;\n  };\n  return PrimitiveArrayClaim;\n}();\nexports.PrimitiveArrayClaim = PrimitiveArrayClaim;", "\"use strict\";\n\nvar __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n    };\n    return extendStatics(d, b);\n  };\n  return function (d, b) {\n    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n    extendStatics(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nvar __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n    return t;\n  };\n  return __assign.apply(this, arguments);\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.BooleanClaim = void 0;\nvar primitiveClaim_1 = require(\"./primitiveClaim\");\nvar BooleanClaim = /** @class */function (_super) {\n  __extends(BooleanClaim, _super);\n  function BooleanClaim(config) {\n    var _this = _super.call(this, config) || this;\n    _this.validators = __assign(__assign({}, _this.validators), {\n      isTrue: function (maxAge) {\n        return _this.validators.hasValue(true, maxAge);\n      },\n      isFalse: function (maxAge) {\n        return _this.validators.hasValue(false, maxAge);\n      }\n    });\n    return _this;\n  }\n  return BooleanClaim;\n}(primitiveClaim_1.PrimitiveClaim);\nexports.BooleanClaim = BooleanClaim;", "\"use strict\";\n\n/* Copyright (c) 2020, VRAI Labs and/or its affiliates. All rights reserved.\n *\n * This software is licensed under the Apache License, Version 2.0 (the\n * \"License\") as published by the Apache Software Foundation.\n *\n * You may not use this file except in compliance with the License. You may\n * obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\n * License for the specific language governing permissions and limitations\n * under the License.\n */\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nvar __generator = this && this.__generator || function (thisArg, body) {\n  var _ = {\n      label: 0,\n      sent: function () {\n        if (t[0] & 1) throw t[1];\n        return t[1];\n      },\n      trys: [],\n      ops: []\n    },\n    f,\n    y,\n    t,\n    g;\n  return g = {\n    next: verb(0),\n    throw: verb(1),\n    return: verb(2)\n  }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function () {\n    return this;\n  }), g;\n  function verb(n) {\n    return function (v) {\n      return step([n, v]);\n    };\n  }\n  function step(op) {\n    if (f) throw new TypeError(\"Generator is already executing.\");\n    while (_) try {\n      if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n      if (y = 0, t) op = [op[0] & 2, t.value];\n      switch (op[0]) {\n        case 0:\n        case 1:\n          t = op;\n          break;\n        case 4:\n          _.label++;\n          return {\n            value: op[1],\n            done: false\n          };\n        case 5:\n          _.label++;\n          y = op[1];\n          op = [0];\n          continue;\n        case 7:\n          op = _.ops.pop();\n          _.trys.pop();\n          continue;\n        default:\n          if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {\n            _ = 0;\n            continue;\n          }\n          if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {\n            _.label = op[1];\n            break;\n          }\n          if (op[0] === 6 && _.label < t[1]) {\n            _.label = t[1];\n            t = op;\n            break;\n          }\n          if (t && _.label < t[2]) {\n            _.label = t[2];\n            _.ops.push(op);\n            break;\n          }\n          if (t[2]) _.ops.pop();\n          _.trys.pop();\n          continue;\n      }\n      op = body.call(thisArg, _);\n    } catch (e) {\n      op = [6, e];\n      y = 0;\n    } finally {\n      f = t = 0;\n    }\n    if (op[0] & 5) throw op[1];\n    return {\n      value: op[0] ? op[1] : void 0,\n      done: true\n    };\n  }\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.BooleanClaim = exports.PrimitiveArrayClaim = exports.PrimitiveClaim = exports.getInvalidClaimsFromResponse = exports.getClaimValue = exports.validateClaims = exports.signOut = exports.addAxiosInterceptors = exports.doesSessionExist = exports.attemptRefreshingSession = exports.getAccessToken = exports.getAccessTokenPayloadSecurely = exports.getUserId = exports.init = void 0;\nvar fetch_1 = require(\"./fetch\");\nvar recipeImplementation_1 = require(\"./recipeImplementation\");\nvar supertokens_js_override_1 = require(\"supertokens-js-override\");\nvar utils_1 = require(\"./utils\");\nvar cookieHandler_1 = require(\"./utils/cookieHandler\");\nvar windowHandler_1 = require(\"./utils/windowHandler\");\nvar lockFactory_1 = require(\"./utils/lockFactory\");\nvar sessionClaimValidatorStore_1 = require(\"./utils/sessionClaimValidatorStore\");\nvar logger_1 = require(\"./logger\");\nvar dateProvider_1 = require(\"./utils/dateProvider\");\nvar AuthHttpRequest = /** @class */function () {\n  function AuthHttpRequest() {}\n  AuthHttpRequest.init = function (options) {\n    cookieHandler_1.default.init(options.cookieHandler);\n    windowHandler_1.default.init(options.windowHandler);\n    dateProvider_1.default.init(options.dateProvider);\n    lockFactory_1.default.init(options.lockFactory, windowHandler_1.default.getReferenceOrThrow().windowHandler.localStorage);\n    var config = (0, utils_1.validateAndNormaliseInputOrThrowError)(options);\n    if (options.enableDebugLogs !== undefined && options.enableDebugLogs) {\n      (0, logger_1.enableLogging)();\n    }\n    var recipeImpl = new supertokens_js_override_1.default((0, recipeImplementation_1.default)({\n      onHandleEvent: config.onHandleEvent,\n      preAPIHook: config.preAPIHook,\n      postAPIHook: config.postAPIHook,\n      sessionExpiredStatusCode: config.sessionExpiredStatusCode\n    })).override(config.override.functions).build();\n    fetch_1.default.init(config, recipeImpl);\n    AuthHttpRequest.axiosInterceptorQueue.forEach(function (f) {\n      f();\n    });\n    AuthHttpRequest.axiosInterceptorQueue = [];\n  };\n  AuthHttpRequest.getUserId = function (input) {\n    return fetch_1.default.recipeImpl.getUserId({\n      userContext: (0, utils_1.getNormalisedUserContext)(input === undefined ? undefined : input.userContext)\n    });\n  };\n  AuthHttpRequest.getAccessTokenPayloadSecurely = function (input) {\n    return __awaiter(this, void 0, void 0, function () {\n      return __generator(this, function (_b) {\n        return [2 /*return*/, fetch_1.default.recipeImpl.getAccessTokenPayloadSecurely({\n          userContext: (0, utils_1.getNormalisedUserContext)(input === undefined ? undefined : input.userContext)\n        })];\n      });\n    });\n  };\n  var _a;\n  _a = AuthHttpRequest;\n  AuthHttpRequest.axiosInterceptorQueue = [];\n  AuthHttpRequest.attemptRefreshingSession = function () {\n    return __awaiter(void 0, void 0, void 0, function () {\n      return __generator(_a, function (_b) {\n        return [2 /*return*/, fetch_1.default.attemptRefreshingSession()];\n      });\n    });\n  };\n  AuthHttpRequest.doesSessionExist = function (input) {\n    return fetch_1.default.recipeImpl.doesSessionExist({\n      userContext: (0, utils_1.getNormalisedUserContext)(input === undefined ? undefined : input.userContext)\n    });\n  };\n  /**\n   * @deprecated\n   */\n  AuthHttpRequest.addAxiosInterceptors = function (axiosInstance, userContext) {\n    if (!fetch_1.default.initCalled) {\n      // the recipe implementation has not been initialised yet, so add\n      // this to the queue and wait for it to be initialised, and then on\n      // init call, we add all the interceptors.\n      AuthHttpRequest.axiosInterceptorQueue.push(function () {\n        fetch_1.default.recipeImpl.addAxiosInterceptors({\n          axiosInstance: axiosInstance,\n          userContext: (0, utils_1.getNormalisedUserContext)(userContext)\n        });\n      });\n    } else {\n      fetch_1.default.recipeImpl.addAxiosInterceptors({\n        axiosInstance: axiosInstance,\n        userContext: (0, utils_1.getNormalisedUserContext)(userContext)\n      });\n    }\n  };\n  AuthHttpRequest.signOut = function (input) {\n    return fetch_1.default.recipeImpl.signOut({\n      userContext: (0, utils_1.getNormalisedUserContext)(input === undefined ? undefined : input.userContext)\n    });\n  };\n  AuthHttpRequest.getInvalidClaimsFromResponse = function (input) {\n    return __awaiter(this, void 0, void 0, function () {\n      return __generator(this, function (_b) {\n        return [2 /*return*/, fetch_1.default.recipeImpl.getInvalidClaimsFromResponse({\n          response: input.response,\n          userContext: (0, utils_1.getNormalisedUserContext)(input.userContext)\n        })];\n      });\n    });\n  };\n  AuthHttpRequest.getClaimValue = function (input) {\n    return __awaiter(this, void 0, void 0, function () {\n      var userContext, accessTokenPayload;\n      return __generator(this, function (_b) {\n        switch (_b.label) {\n          case 0:\n            userContext = (0, utils_1.getNormalisedUserContext)(input === undefined ? undefined : input.userContext);\n            return [4 /*yield*/, AuthHttpRequest.getAccessTokenPayloadSecurely({\n              userContext: userContext\n            })];\n          case 1:\n            accessTokenPayload = _b.sent();\n            return [2 /*return*/, input.claim.getValueFromPayload(accessTokenPayload, userContext)];\n        }\n      });\n    });\n  };\n  AuthHttpRequest.validateClaims = function (overrideGlobalClaimValidators, userContext) {\n    var normalisedUserContext = (0, utils_1.getNormalisedUserContext)(userContext);\n    var claimValidatorsAddedByOtherRecipes = sessionClaimValidatorStore_1.SessionClaimValidatorStore.getClaimValidatorsAddedByOtherRecipes();\n    var globalClaimValidators = fetch_1.default.recipeImpl.getGlobalClaimValidators({\n      claimValidatorsAddedByOtherRecipes: claimValidatorsAddedByOtherRecipes,\n      userContext: normalisedUserContext\n    });\n    var claimValidators = overrideGlobalClaimValidators !== undefined ? overrideGlobalClaimValidators(globalClaimValidators, normalisedUserContext) : globalClaimValidators;\n    if (claimValidators.length === 0) {\n      return [];\n    }\n    return fetch_1.default.recipeImpl.validateClaims({\n      claimValidators: claimValidators,\n      userContext: (0, utils_1.getNormalisedUserContext)(userContext)\n    });\n  };\n  AuthHttpRequest.getAccessToken = function (input) {\n    return __awaiter(void 0, void 0, void 0, function () {\n      return __generator(_a, function (_b) {\n        switch (_b.label) {\n          case 0:\n            return [4 /*yield*/, fetch_1.default.recipeImpl.doesSessionExist({\n              userContext: (0, utils_1.getNormalisedUserContext)(input === undefined ? undefined : input.userContext)\n            })];\n          case 1:\n            // This takes care of refreshing the access token if necessary.\n            if (_b.sent()) {\n              return [2 /*return*/, (0, fetch_1.getTokenForHeaderAuth)(\"access\")];\n            }\n            return [2 /*return*/, undefined];\n        }\n      });\n    });\n  };\n  return AuthHttpRequest;\n}();\nexports.default = AuthHttpRequest;\nexports.init = AuthHttpRequest.init;\nexports.getUserId = AuthHttpRequest.getUserId;\nexports.getAccessTokenPayloadSecurely = AuthHttpRequest.getAccessTokenPayloadSecurely;\nexports.getAccessToken = AuthHttpRequest.getAccessToken;\nexports.attemptRefreshingSession = AuthHttpRequest.attemptRefreshingSession;\nexports.doesSessionExist = AuthHttpRequest.doesSessionExist;\n/**\n * @deprecated\n */\nexports.addAxiosInterceptors = AuthHttpRequest.addAxiosInterceptors;\nexports.signOut = AuthHttpRequest.signOut;\nexports.validateClaims = AuthHttpRequest.validateClaims;\nexports.getClaimValue = AuthHttpRequest.getClaimValue;\nexports.getInvalidClaimsFromResponse = AuthHttpRequest.getInvalidClaimsFromResponse;\nvar primitiveClaim_1 = require(\"./claims/primitiveClaim\");\nObject.defineProperty(exports, \"PrimitiveClaim\", {\n  enumerable: true,\n  get: function () {\n    return primitiveClaim_1.PrimitiveClaim;\n  }\n});\nvar primitiveArrayClaim_1 = require(\"./claims/primitiveArrayClaim\");\nObject.defineProperty(exports, \"PrimitiveArrayClaim\", {\n  enumerable: true,\n  get: function () {\n    return primitiveArrayClaim_1.PrimitiveArrayClaim;\n  }\n});\nvar booleanClaim_1 = require(\"./claims/booleanClaim\");\nObject.defineProperty(exports, \"BooleanClaim\", {\n  enumerable: true,\n  get: function () {\n    return booleanClaim_1.BooleanClaim;\n  }\n});", "/* Copyright (c) 2020, VRAI Labs and/or its affiliates. All rights reserved.\n *\n * This software is licensed under the Apache License, Version 2.0 (the\n * \"License\") as published by the Apache Software Foundation.\n * \n * You may not use this file except in compliance with the License. You may\n * obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n * \n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\n * License for the specific language governing permissions and limitations\n * under the License. \n*/\n\"use strict\";\n\nfunction __export(m) {\n  for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n}\nexports.__esModule = true;\n__export(require(\"./lib/build\"));", "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar RecipeModule = /** @class */function () {\n  function RecipeModule(config) {\n    this.config = config;\n  }\n  return RecipeModule;\n}();\nexports.default = RecipeModule;", "\"use strict\";\n\n/* Copyright (c) 2024, VRAI Labs and/or its affiliates. All rights reserved.\n *\n * This software is licensed under the Apache License, Version 2.0 (the\n * \"License\") as published by the Apache Software Foundation.\n *\n * You may not use this file except in compliance with the License. You may\n * obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\n * License for the specific language governing permissions and limitations\n * under the License.\n */\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.EMAILVERIFICATION_CLAIM_ID = void 0;\nexports.EMAILVERIFICATION_CLAIM_ID = \"st-ev\";", "\"use strict\";\n\nvar __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n    };\n    return extendStatics(d, b);\n  };\n  return function (d, b) {\n    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n    extendStatics(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nvar __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n    return t;\n  };\n  return __assign.apply(this, arguments);\n};\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nvar __generator = this && this.__generator || function (thisArg, body) {\n  var _ = {\n      label: 0,\n      sent: function () {\n        if (t[0] & 1) throw t[1];\n        return t[1];\n      },\n      trys: [],\n      ops: []\n    },\n    f,\n    y,\n    t,\n    g;\n  return g = {\n    next: verb(0),\n    throw: verb(1),\n    return: verb(2)\n  }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function () {\n    return this;\n  }), g;\n  function verb(n) {\n    return function (v) {\n      return step([n, v]);\n    };\n  }\n  function step(op) {\n    if (f) throw new TypeError(\"Generator is already executing.\");\n    while (_) try {\n      if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n      if (y = 0, t) op = [op[0] & 2, t.value];\n      switch (op[0]) {\n        case 0:\n        case 1:\n          t = op;\n          break;\n        case 4:\n          _.label++;\n          return {\n            value: op[1],\n            done: false\n          };\n        case 5:\n          _.label++;\n          y = op[1];\n          op = [0];\n          continue;\n        case 7:\n          op = _.ops.pop();\n          _.trys.pop();\n          continue;\n        default:\n          if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {\n            _ = 0;\n            continue;\n          }\n          if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {\n            _.label = op[1];\n            break;\n          }\n          if (op[0] === 6 && _.label < t[1]) {\n            _.label = t[1];\n            t = op;\n            break;\n          }\n          if (t && _.label < t[2]) {\n            _.label = t[2];\n            _.ops.push(op);\n            break;\n          }\n          if (t[2]) _.ops.pop();\n          _.trys.pop();\n          continue;\n      }\n      op = body.call(thisArg, _);\n    } catch (e) {\n      op = [6, e];\n      y = 0;\n    } finally {\n      f = t = 0;\n    }\n    if (op[0] & 5) throw op[1];\n    return {\n      value: op[0] ? op[1] : void 0,\n      done: true\n    };\n  }\n};\nvar __spreadArray = this && this.__spreadArray || function (to, from, pack) {\n  if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n    if (ar || !(i in from)) {\n      if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n      ar[i] = from[i];\n    }\n  }\n  return to.concat(ar || Array.prototype.slice.call(from));\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Recipe = void 0;\n/* Copyright (c) 2022, VRAI Labs and/or its affiliates. All rights reserved.\n *\n * This software is licensed under the Apache License, Version 2.0 (the\n * \"License\") as published by the Apache Software Foundation.\n *\n * You may not use this file except in compliance with the License. You may\n * obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\n * License for the specific language governing permissions and limitations\n * under the License.\n */\nvar recipeModule_1 = require(\"../recipeModule\");\nvar supertokens_website_1 = require(\"supertokens-website\");\nvar utils_1 = require(\"../../utils\");\nvar constants_1 = require(\"../emailverification/constants\");\nvar priorityValidatorIds = [constants_1.EMAILVERIFICATION_CLAIM_ID];\nvar Recipe = /** @class */function (_super) {\n  __extends(Recipe, _super);\n  function Recipe(config) {\n    var _this = _super.call(this, config) || this;\n    _this.getUserId = function (input) {\n      return supertokens_website_1.default.getUserId({\n        userContext: input.userContext\n      });\n    };\n    _this.getAccessToken = function (input) {\n      return __awaiter(_this, void 0, void 0, function () {\n        return __generator(this, function (_a) {\n          return [2 /*return*/, supertokens_website_1.default.getAccessToken({\n            userContext: input.userContext\n          })];\n        });\n      });\n    };\n    _this.getAccessTokenPayloadSecurely = function (input) {\n      return __awaiter(_this, void 0, void 0, function () {\n        return __generator(this, function (_a) {\n          return [2 /*return*/, supertokens_website_1.default.getAccessTokenPayloadSecurely({\n            userContext: input.userContext\n          })];\n        });\n      });\n    };\n    _this.doesSessionExist = function (input) {\n      return supertokens_website_1.default.doesSessionExist({\n        userContext: input.userContext\n      });\n    };\n    _this.signOut = function (input) {\n      return supertokens_website_1.default.signOut({\n        userContext: input.userContext\n      });\n    };\n    _this.attemptRefreshingSession = function () {\n      return __awaiter(_this, void 0, void 0, function () {\n        return __generator(this, function (_a) {\n          return [2 /*return*/, supertokens_website_1.default.attemptRefreshingSession()];\n        });\n      });\n    };\n    _this.validateClaims = function (input) {\n      return supertokens_website_1.default.validateClaims(input.overrideGlobalClaimValidators, input.userContext);\n    };\n    supertokens_website_1.default.init(__assign(__assign({}, config), {\n      override: {\n        functions: function (originalImpl, builder) {\n          var _a;\n          builder.override(function (oI) {\n            return __assign(__assign({}, oI), {\n              getGlobalClaimValidators: function (input) {\n                var res = oI.getGlobalClaimValidators(input);\n                return __spreadArray(__spreadArray([], res.filter(function (x) {\n                  return priorityValidatorIds.includes(x.id);\n                }), true), res.filter(function (x) {\n                  return !priorityValidatorIds.includes(x.id);\n                }), true);\n              }\n            });\n          });\n          if ((_a = config.override) === null || _a === void 0 ? void 0 : _a.functions) {\n            builder.override(config.override.functions);\n          }\n          return originalImpl;\n        }\n      },\n      preAPIHook: function (context) {\n        return __awaiter(_this, void 0, void 0, function () {\n          var headers, response;\n          return __generator(this, function (_a) {\n            headers = new Headers(context.requestInit.headers);\n            headers.set(\"rid\", config.recipeId);\n            response = __assign(__assign({}, context), {\n              requestInit: __assign(__assign({}, context.requestInit), {\n                headers: headers\n              })\n            });\n            if (config.preAPIHook === undefined) {\n              return [2 /*return*/, response];\n            } else {\n              return [2 /*return*/, config.preAPIHook(context)];\n            }\n            return [2 /*return*/];\n          });\n        });\n      },\n      apiDomain: config.appInfo.apiDomain.getAsStringDangerous(),\n      apiBasePath: config.appInfo.apiBasePath.getAsStringDangerous()\n    }));\n    return _this;\n  }\n  Recipe.init = function (config) {\n    return function (appInfo, _, enableDebugLogs) {\n      Recipe.instance = new Recipe(__assign(__assign({}, config), {\n        appInfo: appInfo,\n        recipeId: Recipe.RECIPE_ID,\n        enableDebugLogs: enableDebugLogs\n      }));\n      return Recipe.instance;\n    };\n  };\n  Recipe.prototype.getClaimValue = function (input) {\n    return supertokens_website_1.default.getClaimValue(input);\n  };\n  // The strange typing is to avoid adding a dependency to axios\n  Recipe.prototype.getInvalidClaimsFromResponse = function (input) {\n    return supertokens_website_1.default.getInvalidClaimsFromResponse(input);\n  };\n  Recipe.addAxiosInterceptors = function (axiosInstance, userContext) {\n    return supertokens_website_1.default.addAxiosInterceptors(axiosInstance, userContext);\n  };\n  Recipe.getInstanceOrThrow = function () {\n    if (Recipe.instance === undefined) {\n      var error = \"No instance of Session found. Ensure that the 'Session.init' method is called within the 'SuperTokens.init' recipeList.\";\n      error = (0, utils_1.checkForSSRErrorAndAppendIfNeeded)(error);\n      throw Error(error);\n    }\n    return Recipe.instance;\n  };\n  Recipe.reset = function () {\n    if (!(0, utils_1.isTest)()) {\n      return;\n    }\n    Recipe.instance = undefined;\n    return;\n  };\n  Recipe.RECIPE_ID = \"session\";\n  return Recipe;\n}(recipeModule_1.default);\nexports.Recipe = Recipe;\nexports.default = Recipe;"],
  "mappings": "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",
  "names": ["WindowHandlerReference", "require_windowHandler", "require_windowHandler", "NormalisedURLDomain", "NormalisedURLPath", "require_normalisedURLDomain", "NormalisedURLDomain", "require_normalisedURLPath", "NormalisedURLPath", "sessionScope", "PROCESS_STATE", "ProcessState", "_this", "require_defaultImplementation", "CookieHandlerReference", "ProcessLocking", "resolve", "SuperTokensLock", "_this", "_a", "LockFactoryReference", "require_defaultImplementation", "DateProvider", "DateProviderReference", "AntiCsrfToken", "FrontToken", "AuthHttpRequest", "SessionClaimValidatorStore", "require_globalClaimValidators", "require_utils", "config", "AuthHttpRequest", "_b", "d", "b", "STGeneralError", "self", "name_1", "prop", "xhr", "body", "_a", "config", "k", "_i", "OverrideableBuilder", "proxyInd", "PrimitiveClaim", "PrimitiveArrayClaim", "d", "b", "BooleanClaim", "require_build", "AuthHttpRequest", "RecipeModule", "require_constants", "d", "b", "Recipe"]
}
